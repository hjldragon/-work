webpackJsonp([152],{RgA8:function(t,e){},"p+yJ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("P9l9"),n=i("6nXL"),a=i("r2UX"),r=i("HBwt"),o=i.n(r),l={components:{EmptyTable:a.a},data:function(){return{vendor_id:"",list:[],emptyType:1,multipleSelection:[],total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,base_url:"./php",AisleStatus:n.e,VendorAisleNotice:n.R}},computed:{isListEmpty:function(){return 0===this.list.length}},created:function(){this.vendor_id=this.$route.query.vendorid||"",this.vendor_id&&this.getList()},mounted:function(){this.$refs.cargowayCounterTable.$refs.bodyWrapper.style.minHeight="400px"},methods:{getList:function(){var t=this,e={get_aisle_list:1,vendor_id:this.vendor_id,page_size:this.listQuery.limit,page_no:this.listQuery.page};this.isSort&&(e.sortby=this.sortLabel,e.sort=this.sortOrder),Object(s.p)(e).then(function(e){if(0===e.ret){var i=null,s={width:1,height:38,displayValue:!1};t.list=e.data.aisle_list||[],t.total=e.data.total,t.list=t.list.map(function(e){return e.picture_str=(e.img||[])[0],t.$nextTick(function(){e.goods_bar_code&&(i=this.$refs["barcode"+e.aisle_id],o()(i,e.goods_bar_code,s))}),e})}else t.$slnotify({message:n.X.toString(e.ret)})})},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},noticeReplenClickHandle:function(t){var e=this,i={save_aisle:1,aisle_id:t};Object(s.q)(i).then(function(t){0===t.ret?(e.$notify({title:"成功",message:"通知成功",type:"success"}),e.getList()):e.$slnotify({message:n.X.toString(t.ret)})})}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"cargoway-counter-table"}},[i("div",{staticClass:"table-content change-default"},[i("el-table",{ref:"cargowayCounterTable",attrs:{data:t.list,stripe:""},on:{"sort-change":t.sort}},[i("el-table-column",{attrs:{prop:"aisle_name",label:"货道编号","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.aisle_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"img",label:"商品图片","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticClass:"goods_img",attrs:{src:t.base_url+"/img_get.php?img=1&imgname="+e.row.picture_str}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goods_name",label:"商品名称","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.goods_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goods_bar_code",label:"商品条码","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{ref:"barcode"+t.row.aisle_id})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goods_price",label:"商品价格","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.goods_price))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"aisle_capacity",label:"容量","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.aisle_capacity))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goods_num",label:"货道存量","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.goods_num))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"aisle_status",label:"货道状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.AisleStatus.toString(e.row.aisle_status)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"cargoway_id",label:"操作","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"table-oprbtn-group"},[e.row.is_inform===t.VendorAisleNotice.NO?i("span",{staticClass:"opr-btn",on:{click:function(i){t.noticeReplenClickHandle(e.row.aisle_id)}}},[t._v("通知补货")]):t._e(),t._v(" "),e.row.is_inform===t.VendorAisleNotice.YES?i("span",{staticClass:"opr-btn"},[t._v("已通知")]):t._e()])]}}])})],1),t._v(" "),t.isListEmpty?i("empty-table",{attrs:{type:t.emptyType}}):t._e()],1),t._v(" "),i("div",{staticClass:"pagination-contentrr change-pagination-default"},[i("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)])},staticRenderFns:[]};var u=i("C7Lr")(l,c,!1,function(t){i("RgA8")},"data-v-07684b72",null);e.default=u.exports}});