# 运营后台商城管理HTTP协议

该文档为初稿，仅定义HTTP输入输出， 不涉及其他内容

# 一、商品管理

## 1.商品列表/新增

### 1.1 获取商品详情

#### 接口地址
    good_save.php
           
#### 输入 POST
``` js
	{
        save:1,  //新建
        edit:1, //编辑
        good_type: 1, //1：实体商品，2：虚拟商品
        sale_off: 0, // 0上架 1下架
        is_draft: 0, // 0,正式 1,草稿
        good_id: "2222", //商品id
        category_id: ["111","222","333"], //三级分类ID
        good_img_list: ["e9b98d90bed8247ca96290ea5f59ee64.jpg"], //图片
        spec_type: 1, // 1: 规格（颜色） 2：套餐 3：规格（颜色）和套餐 4：授权端 :5：服务年限
        spec_price: [{
            spec_id: "",
            spec_name: "", //规格名称
            package: "", //套餐名
            terminal: 1,  //1：pc,2：平板，3：收银机， 4：手机app
            time: "",
            time_unit: 1,  //1:日 //2:月 //3:季 //4:年
            price: "", //价格
            stock_num: "", //库存数量
            sale_price: "", //促销价格
            sale_time: [11111,2222] //促销时间
        }]
        sale_num: 2, //起售数量
        sale_off_way: 0, //0 不设置 1自定义
        good_sale_time: [221123,123131], //（int）时间戳，自定义时间段，上架方式选择自定义是上传
        freight_type: 1 //1: 免运费 2：按重量 3：按件 
        freight: "", //重量时是重量， 按件时是一件收费
        invoice: 1, //1：提供发票  0: 不提供发票
        good_describe: {  //商品的一些描述，不填则不传
            name: "", //商品名称
            spec: "", //商品规格
            material: "", //商品材质
            weight: "", //商品重量
            model: "", //商品型号
            brand: "", //品牌
            screen: "", //显示屏
            screen_size: "", //屏幕尺寸
            screen_num: "", //屏幕数量
            touch_type: "", //触摸类型
            cpu: "",//处理器
            system: "", //操作系统
            ram: "", //内存空间（RAM)
            rom: "", //存储空间（ROM）
            printer: "", //打印机
            power: "",//电源适配器
            horn: "", //喇叭
            bluetooth: "", //蓝牙
            key: "", //按键
            external_interface: "", //外部接口
            work_temp: "", //外部温度
            standard: "", //商品标准
            pack: "", //包装清单
            software_name: "", //虚拟商品名称
            software_version: "", //虚拟商品适用系统
            software_system: "", //虚拟商品适用系统
        },
        desc_img_pc: ["e9b98d90bed8247ca96290ea5f59ee64.jpg"], //pc图文描述
        desc_img_phone: ["e9b98d90bed8247ca96290ea5f59ee64.jpg"], //phone图文描述
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{}
	}
```

### 1.2 获取商品列表

#### 接口地址
    good_get.php
#### 输入 POST
``` js
	{
        goodlist: 1,
        category_id: "硬件",
        page_size: 10, //分页
        page_no: 1, //页数
        sale_off: 0, //上下架状态（0：上架， 1：上架）
        good_name: "点餐机", //商品名字
        is_draft: 0, //查看草稿时传1
        is_recycle: 0, //查看回收站时传1
        sale_num_begin: 1231223142, //(int) 时间戳，销售查询开始时间
        sale_num_end: 1231223142, //(int) 时间戳，销售查询结束时间
        price: [111,222] //查询价格范围内的商品
	}
```
#### 输出
``` js
    {
    "ret":0,
    "data": {
        good_list:[{
            good_id: "", //商品id,商品序号
            good_img_list: [ "e9b98d90bed8247ca96290ea5f59ee64.jpg",    "e9b98d90bed8247ca96290ea5f59ee64.jpg"]
            good_name: "点餐机", //商品名字
            food_price: "", //商品价格
            category_name: "硬件",  //所属分类名称
            category_id: "222233", //所属分类id
            sale_num: 1111, //（int）销量
            sale_off: 0,  //上下架状态 0: 上架  1: 下架
            stock_num: 22, //库存
        }],
    }
    }
```
### 1.3 获取商品详情

#### 接口地址
    good_get.php
           
#### 输入 POST
``` js
	{
        goodinfo: 1,
        good_id: "", //商品id     
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{
            goodinfo: {
                good_type: 1, //1：实体商品，2：虚拟商品
                sale_off: 0, // 0上架 1下架
                is_draft: 0, // 0,正式 1,草稿
                good_id: "2222", //商品id
                category_id_list: ["111","222","333"], //三级分类ID
                category: [{
                    "category_id": "111",
                    "category_name": "收银机1", 
                },{
                    "category_id": "222",
                    "category_name": "收银机2", 
                },{
                    "category_id": "333",
                    "category_name": "收银机3", 
                }]
                good_img_list: ["e9b98d90bed8247ca96290ea5f59ee64.jpg"], //图片
                spec_type: 1, // 1: 规格（颜色） 2：套餐 3：规格（颜色）和套餐 4：授权端 :5：服务年限
                spec_price: [{
                    spec_id: "",
                    spec_name: "", //规格名称
                    package: "", //套餐名
                    terminal: 1,  //1：pc,2：平板，3：收银机， 4：手机app
                    time: "",
                    time_unit: 1,  //1:日 //2:月 //3:季 //4:年
                    price: "", //价格
                    stock_num: "", //库存数量
                    sale_price: "", //促销价格
                    sale_time: [11111,2222] //促销时间
                }]
                sale_num: 2, //起售数量
                sale_off_way: 0, //0 不设置 1自定义
                good_sale_time: [221123,123131], //（int）时间戳，自定义时间段，上架方式选择自定义是上传
                freight_type: 1 //1: 免运费 2：按重量 3：按件 
                freight: "", //重量时是重量， 按件时是一件收费
                invoice: 1, //1：提供发票  0: 不提供发票
                good_describe: {  //商品的一些描述，不填则不传
                    name: "", //商品名称
                    spec: "", //商品规格
                    material: "", //商品材质
                    weight: "", //商品重量
                    model: "", //商品型号
                    brand: "", //品牌
                    screen: "", //显示屏
                    screen_size: "", //屏幕尺寸
                    screen_num: "", //屏幕数量
                    touch_type: "", //触摸类型
                    cpu: "",//处理器
                    system: "", //操作系统
                    ram: "", //内存空间（RAM)
                    rom: "", //存储空间（ROM）
                    printer: "", //打印机
                    power: "",//电源适配器
                    horn: "", //喇叭
                    bluetooth: "", //蓝牙
                    key: "", //按键
                    external_interface: "", //外部接口
                    work_temp: "", //外部温度
                    standard: "", //商品标准
                    pack: "", //包装清单
                    software_name: "", //虚拟商品名称
                    software_version: "", //虚拟商品适用系统
                    software_system: "", //虚拟商品适用系统
                },
                desc_img_pc: ["e9b98d90bed8247ca96290ea5f59ee64.jpg"], //pc图文描述
                desc_img_phone: ["e9b98d90bed8247ca96290ea5f59ee64.jpg"], //phone图文描述
                    }
                }
	}
```
### 1.4 移入/移出回收站

#### 接口地址
    good_save.php
           
#### 输入 POST
``` js
	{
        recycle_opr: 1,
        good_id_list: ["22","22"], //需要移入的商品id
        recycle_status: 0, //1:移入 0:移出
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{}
	}
```
### 1.5 回收站中删除

#### 接口地址
    good_save.php
           
#### 输入 POST
``` js
	{
        del_good: 1,
        good_id_list: ["22","22"], //删除的商品id
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{}
	}
```
### 1.6 上架/下架

#### 接口地址
    good_save.php
           
#### 输入 POST
``` js
	{
        sale_off_opr: 1,
        good_id_list: ["22","22"], //需要移入的商品id
        is_sale_off: 0, //1:下架 0:上架
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{}
	}
```

### 1.7 拉取所有商品分类

#### 接口地址
    good_category_get.php
           
#### 输入 POST
``` js
	{
        "list": 1,
	}
```
#### 输出
``` js
	{//list结构 map   key是分类id, value是分类对象，默认有实体商品和虚拟商品分类,一共三级分类
		"ret":0,
		"data":{
            "list": {
                "11": {
                    "category_id": "11",
                    "category_name": "实体商品",
                    "has_good": 1, //分类下及子分类下是否有商品
                    "list": {
                        "111": {
                            "category_id": "111",
                            "category_name": "硬件",
                            "has_good": 0,
                            "list": {
                                "1111": {
                                    "category_id": "1111",
                                    "category_name": "收银机", 
                                }
                            }
                        }
                    }
                },    
                "22": {
                    "category_id": "22",
                    "category_name": "虚拟商品"
                }
            }
        }
	}
```

### 1.8 新增/编辑商品分类

#### 接口地址
    good_category_save.php
           
#### 输入 POST
``` js
	{
        "save": 1,
        "category_name": "sss",
        "category_id": "22",  //编辑时传当前分类id
        "parent_id": "333",   //新增时要存放的父级分类   
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{}
	}
```

### 1.9 删除商品分类

分类下有商品时不能删除
#### 接口地址
    good_category_save.php
           
#### 输入 POST
``` js
	{
        "delete": 1,
        "category_id": "22",
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{}
	}
```

### 1.10 新增的时候获取商品id

#### 接口地址
    gene_id.php
           
#### 输入 POST
``` js
	{
        "geneid": 1,
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{
            "good_id": "22222"
        }
	}
```