# 自动售货机管理HTTP协议

该文档为初稿，仅定义HTTP输入输出， 不涉及其他内容

# 一、自动售货机设备管理

## 1.0设备商品列表

#### 接口地址
    vendor_goods_get.php
          
#### 输入 POST
``` js
	{
        get_home_data: 1, //参数
        shop_id: "VI107"  //设备id
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{
		 "shopinfo": { //设备信息
                    "shop_id": "VI107",//设备id
                    "shop_name": "测试货道" //设备名称
                },
                "menuinfo": [//商品信息
                    {
                        "category_id": "VGC19",//商品分类id
                        "category_name": "可乐",//商品分类名
                        "food_list": [
                            {
                                "food_id": "VG9", //商品ID
                                "food_name": "百事可乐",//商品名称
                                "food_img_list": [
                                    "a5fa865ce8b3f248cb73126d721f89b0.jpg"
                                ],//图片
                                "food_price": 3, //价格
                                "spec": "320ml", //规格
                                "food_num": 5 //货道该商品总库存
                            },
                            {
                                "food_id": "VG13",
                                "food_name": "可口可乐",
                                "food_img_list": [
                                    "a5fa865ce8b3f248cb73126d721f89b0.jpg"
                                ],
                                "food_price": 3,
                                "spec": null,
                                "food_num": 10
                            }
                        ]
                    },
                    {
                        "category_id": "VGC20",
                        "category_name": "薯片1",
                        "food_list": [
                            {
                                "food_id": "VG22",
                                "food_name": "辣条",
                                "food_img_list": [
                                    "aa682220d778f9130060d1ddb54d0d49.jpg"
                                ],
                                "food_price": 4,
                                "spec": "卫龙",
                                "food_num": 5
                            }
                        ]
                    }
                ]
            }
		
		
		}
	}
```
}
### 2.0 下单(属于未支付订单)

#### 接口地址
    vendor_order_save.php
           
#### 输入 POST
``` js
	{
        save:1,                            // 参数
        shop_id:"VI107",                   // 设备id
        customer_id: "CU969",             // 顾客id
        food_price_all:9.0,               //商品总价
        pay_way: 1,                       //支付方式( 1.微信支付，2.支付宝 )
        food_list:[
           {
             food_id:"VG9",//商品ID
             food_price:3.0,//商品单价
             food_name:"百事可乐",//商品名称
             food_num:2,    //商品数量
             spec:"320ml",  //商品规格
           },
           {
            food_id:"VG13",//商品ID
            food_price:3.0,//商品单价
            food_name:"可口可乐",//商品名称
            food_num:1,    //商品数量
            spec:"",  //商品规格
          }
        ]
     
	}
```
#### 输出
``` js
	{
		"ret":0,
		"data":{
		  'order_id':"VI10"
		}
	}
```
}
 ### 3.0 订单详情
    
#### 接口地址
        vendor_order_get.php
#### 输入 POST
    ``` js
    	{
            get_order_info:1,    //参数
            vendor_order_id:"VO284",     //订单id,列表中获取
    	}
    ```
#### 输出
    ``` js
    	{
    		"ret":0,
    		"data":{
       "info": {//内容和后台哪里是一样的
                 "vendor_order_id": "VO284",
                 "customer_id": "CU969",
                 "vendor_id": "VI107",
                 "goods_list": [
                     {
                         "vendor_goods_id": "VG9",
                         "goods_name": "百事可乐",//商品名称
                         "goods_price": 3,//商品单价
                         "goods_num": 2,//商品个数
                         "aisle_id": "AI56",
                         "aisle_name": "1",//货道名称
                         "all_money": 6//该商品的总价格
                     },
                     {
                         "vendor_goods_id": "VG13",
                         "goods_name": "可口可乐",
                         "goods_price": 3,
                         "goods_num": 1,
                         "aisle_id": "AI61",
                         "aisle_name": "3",
                         "all_money": 3
                     }
                 ],
                 "shop_id": "SH888",
                 "order_time": 1545986331,//下单时间
                 "pay_time": 1545986359,//支付时间
                 "order_fee": 9,//订单金额/应付金额
                 "paid_price": 9,//支付金额
                 "order_status": 2,//订单状态(1:未支付(待付款),2:已支付(交易完成),3:退款成功,)
                 "pay_way": 1,//支付方式 （1:微信支付, 2:支付宝支付)
                 "lastmodtime": 1545986359,
                 "delete": null,
                 "vendor_num": "测试货道",//设备编号
                 "goods_all_num": 3//商品总数
             }
    	}
    ``` 