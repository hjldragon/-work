webpackJsonp([93],{CISB:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Ym9J"),a=i.n(s),n=i("Fzxs"),l=i("EuEE"),o=i("lbRB"),r=i("6nXL"),c={name:"industryTable",components:{EmptyTable:n.a},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},agentName:"",creatTime:null,list:[],emptyType:1,total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,dialogAgent:{},freezeDialogVisible:!1,delAgentDialogVisible:!1,sucTipDialogVisible:!1,sucTipText:"",sucTipImg:i("qrEq"),AgentIsFreeze:r.c}},created:function(){},mounted:function(){this.getList()},computed:{isListEmpty:function(){return 0===this.list.length}},methods:{getList:function(){var e=this,t={agent_list:1,agent_type:r.f.INDUSTRY,page_size:this.listQuery.limit,page_no:this.listQuery.page};if(!l.a.isEmpty(this.creatTime)){var i=this.creatTime[0],s=this.creatTime[1];t.begin_time=parseInt(a()(i).format("X")),t.end_time=parseInt(a()(s).format("X"))+86400}""!==this.agentName&&(t.agent_name=this.agentName),this.isSort&&(t.sort_name=this.sortLabel,t.desc=this.sortOrder),Object(o.c)(t).then(function(t){0===t.ret?(e.list=t.data.list||[],e.total=t.data.total,e.list=e.list.map(function(e){return e.ctime&&(e.ctime=a()(1e3*e.ctime).format("YYYY.MM.DD")),e.agent_level&&(e.agent_level=r.d.toString(e.agent_level)),e.business_time?e.business_time=a()(1e3*e.business_time).format("YYYY.MM.DD"):e.business_time="--",l.a.isEmpty(e.business_status)||(e.business_status=r.b.toString(e.business_status)),e.is_freeze=e.is_freeze||r.c.NO,e.is_freeze_text=r.c.toString(e.is_freeze),e})):console.warn("获取列表数据错误")})},search:function(){this.emptyType=2,this.listQuery.page=1,this.getList()},sort:function(e){this.sortLabel=e.prop,"descending"===e.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===e.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},goeditor:function(e){this.$router.push({path:"/agentlist/editor",query:{agentid:e}})},godetail:function(e){this.$router.push({path:"/agentlist/detail",query:{agentid:e}})},openDelAgentDialog:function(e){this.dialogAgent=e,this.delAgentDialogVisible=!0},hideDelAgentDialog:function(){this.delAgentDialogVisible=!1},deleteAgentOk:function(){var e=this,t=[];t.push(this.dialogAgent.agent_id);var i={agent_del:1,agent_id:t};Object(o.d)(i).then(function(t){0===t.ret?(e.hideDelAgentDialog(),e.getList(),e.openTilSuc("数据删除成功！")):e.$slnotify({message:r.w.toString(t.ret)})})},openReezeDialog:function(e){this.dialogAgent=e,this.freezeDialogVisible=!0},hideReezeDialog:function(){this.freezeDialogVisible=!1},hideReezeDialogHandle:function(){var e=this;setTimeout(function(){e.dialogAgent={}},300)},freezeOk:function(){var e=this,t={agent_freeze:1,agent_id:this.dialogAgent.agent_id,is_freeze:r.c.YES};Object(o.d)(t).then(function(t){0===t.ret?(e.hideReezeDialog(),e.getList(),e.openTilSuc("冻结成功！")):e.$slnotify({message:r.w.toString(t.ret)})})},freeEnable:function(){var e=this,t={agent_freeze:1,agent_id:this.dialogAgent.agent_id,is_freeze:r.c.NO};Object(o.d)(t).then(function(t){0===t.ret?(e.hideReezeDialog(),e.getList(),e.openTilSuc("启用成功！")):e.$slnotify({message:r.w.toString(t.ret)})})},openTilSuc:function(e,t){var s=this;this.sucTipText=e,t&&(this.sucTipImg=i("6MC9")),setTimeout(function(){s.sucTipDialogVisible=!0},500)},hideTipSuc:function(){this.sucTipDialogVisible=!1}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"industry-table"}},[i("div",{staticClass:"search-content clearfix"},[i("div",{staticClass:"time fl clearfix search-item"},[e._m(0),e._v(" "),i("div",{staticClass:"fl"},[i("el-date-picker",{attrs:{"unlink-panels":"",editable:!1,type:"daterange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.creatTime,callback:function(t){e.creatTime=t},expression:"creatTime"}})],1)]),e._v(" "),i("div",{staticClass:"name fl clearfix search-item"},[e._m(1),e._v(" "),i("div",{staticClass:"fl"},[i("el-input",{attrs:{placeholder:"请输入代理商名称"},model:{value:e.agentName,callback:function(t){e.agentName=t},expression:"agentName"}})],1)]),e._v(" "),i("div",{staticClass:"search-btn fl",on:{click:e.search}},[e._v("搜索")])]),e._v(" "),i("div",{staticClass:"table-content change-default"},[i("el-table",{ref:"industryTable",attrs:{data:e.list,stripe:""},on:{"sort-change":e.sort}},[i("el-table-column",{attrs:{prop:"ctime",label:"创建时间","min-width":"80",align:"center",sortable:"true"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"adjust-center"},[e._v(e._s(t.row.ctime))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"agent_name",label:"名称","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.agent_name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"agent_level",label:"级别","min-width":"80",align:"center",sortable:"true"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"adjust-center"},[e._v(e._s(t.row.agent_level))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"business_time",label:"审核时间","min-width":"80",align:"center",sortable:"true"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"adjust-center"},[e._v(e._s(t.row.business_time))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"business_status",label:"审核状态","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.business_status))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ctime",label:"首次业务时间","min-width":"110",align:"center",sortable:"true"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"adjust-center"},[e._v(e._s(t.row.ctime))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"from_salesman",label:"所属销售","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"adjuest-spacing"},[e._v(e._s(t.row.from_salesman))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"from",label:"来源","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"adjuest-spacing"},[e._v(e._s(t.row.from))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"is_freeze",label:"启用状态","min-width":"80",align:"center",sortable:"true"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"adjust-center"},[e._v(e._s(t.row.is_freeze_text))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"date",label:"操作","min-width":"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_freeze===e.AgentIsFreeze.NO?i("span",{staticClass:"red freeze-btn",on:{click:function(i){e.openReezeDialog(t.row)}}},[e._v("冻结")]):i("span",{staticClass:"green",on:{click:function(i){e.openReezeDialog(t.row)}}},[e._v("启用")]),e._v(" "),i("span",{staticClass:"blue no-margin",on:{click:function(i){e.godetail(t.row.agent_id)}}},[e._v("查看")]),e._v(" "),i("br"),e._v(" "),i("span",{staticClass:"blue",on:{click:function(i){e.goeditor(t.row.agent_id)}}},[e._v("编辑")]),e._v(" "),i("span",{staticClass:"red no-margin",on:{click:function(i){e.openDelAgentDialog(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.isListEmpty?i("empty-table",{attrs:{type:e.emptyType}}):e._e()],1),e._v(" "),i("div",{staticClass:"pagination-content change-pagination-default"},[i("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,40],"page-size":e.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),i("el-dialog",{staticClass:"nopadding freeze-dialog",attrs:{visible:e.freezeDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(t){e.freezeDialogVisible=t},close:e.hideReezeDialogHandle}},[i("div",{staticClass:"freeze-content"},[i("span",[e._v("确定要执行冻结操作？")])]),e._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[this.dialogAgent.is_freeze===e.AgentIsFreeze.NO?i("div",{staticClass:"btn-Dialogok",on:{click:e.freezeOk}},[e._v("确认")]):i("div",{staticClass:"btn-DialogEnable",on:{click:e.freeEnable}},[e._v("确认")]),e._v(" "),i("div",{staticClass:"btn-Dialogcancel",on:{click:e.hideReezeDialog}},[e._v("取消")])])]),e._v(" "),i("el-dialog",{staticClass:"nopadding change-tip-dialog",attrs:{visible:e.sucTipDialogVisible,width:"500px",top:"35vh",center:""},on:{"update:visible":function(t){e.sucTipDialogVisible=t}}},[i("div",{staticClass:"change-tip-content"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:e.sucTipImg}})]),e._v(" "),i("div",{staticClass:"text"},[i("span",[e._v(e._s(e.sucTipText))])])]),e._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-tip",on:{click:e.hideTipSuc}},[e._v("知道了")])])]),e._v(" "),i("el-dialog",{staticClass:"nopadding freeze-dialog",attrs:{visible:e.delAgentDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(t){e.delAgentDialogVisible=t},close:e.hideReezeDialogHandle}},[i("div",{staticClass:"freeze-content"},[i("span",[e._v("确定要删除此数据？")])]),e._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok",on:{click:e.deleteAgentOk}},[e._v("确认")]),e._v(" "),i("div",{staticClass:"btn-Dialogcancel",on:{click:e.hideDelAgentDialog}},[e._v("取消")])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("创建时间")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("名称")])])}]};var g=i("X4nt")(c,u,!1,function(e){i("zU3k"),i("XWVW")},"data-v-0c24e6da",null);t.default=g.exports},XWVW:function(e,t){},zU3k:function(e,t){}});