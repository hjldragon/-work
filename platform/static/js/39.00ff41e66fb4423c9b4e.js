webpackJsonp([39],{"1qEt":function(t,e){},IXtC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("9aGi"),a=i("6j3y"),n=i("Xtis"),o=i("6nXL"),c=i("EuEE"),r=i("a2vD"),l={components:{SelectCity:s.a,SlUpload:a.a},data:function(){return{shop_id:"",shop_name:"",shop_logo:"",shop_logo_src:i("Umpw"),telephone:"",shop_area:"",province:"",city:"",area:"",address:"",shop_model:1,cityinfo:{province:"",city:"",area:""},nameErr:!1,telephoneErr:!1,areaErr:!1,addressErr:!1,cancelDialogVisible:!1,btnText:"更换",base_url:"./php"}},computed:{showBtn:function(){return!!(this.shop_name&&this.shop_logo&&this.telephone&&this.shop_area&&this.province&&this.address&&this.shop_model)}},created:function(){this.shop_id=this.$route.query.shopid||"",this.getShopinfo()},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$refs.adjustHeight;c.a.AdjustHeight(e)})},methods:{getShopinfo:function(){var t=this,e={get_shop_info:1,shop_id:this.shop_id};Object(n.l)(e).then(function(e){if(0===e.ret){var i=e.data.shopinfo;t.shop_name=i.shop_name,t.shop_logo_src="./php/img_get.php?img=1&imgname="+i.shop_logo,t.shop_logo=i.shop_logo,t.telephone=i.telephone,t.shop_area=i.shop_area,t.address=i.address,t.province=i.province,t.city=i.city,t.area=i.area,t.cityinfo.province=i.province,t.cityinfo.city=i.city,t.cityinfo.area=i.area}else t.$slnotify({message:o.w.toString(e.ret),duration:1500})})},goDetail:function(){this.$router.push({path:"/areamerchant/detail",query:{shopid:this.shop_id}})},clearTip:function(){this.nameErr=!1,this.telephoneErr=!1,this.areaErr=!1,this.addressErr=!1},getCity:function(t){this.province=t.province,this.city=t.city,this.area=t.blocks},getImg:function(t){this.shop_logo=t,this.shop_logo_src="./php/img_get.php?img=1&imgname="+t},checkShopName:function(){var t=this.shop_name.trim(),e=c.a.checkStrLen(t,50);return e||(this.nameErr=!0),e},checkTelephone:function(){var t=this.telephone.trim(),e=c.a.checkFixPhone(t);return e||(this.telephoneErr=!0),e},checkArea:function(){this.shop_area=c.a.clearNoNum(this.shop_area)},check:function(){var t=!1;return this.checkShopName()||(t=!0),this.checkTelephone()||(t=!0),t},save:function(){var t=this;if(!this.check()){var e={shop_save:1,shop_userid:r.a.getUserid(),shop_id:this.shop_id,shop_name:this.shop_name,shop_logo:this.shop_logo,shop_area:this.shop_area,address:this.address,shop_model:this.shop_model,telephone:this.telephone,province:this.province};this.city&&(e.city=this.city),this.area&&(e.area=this.area),Object(n.m)(e).then(function(e){0===e.ret?(t.$slnotify({message:"保存成功",duration:1500}),setTimeout(function(){t.goDetail()},1500)):t.$slnotify({message:o.w.toString(e.ret),duration:1500})})}},openCancelDialog:function(){this.cancelDialogVisible=!0},hideCancelDialog:function(){this.cancelDialogVisible=!1},cancelEditor:function(){this.goDetail()}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"areamerchant-baseinfo-editor"}},[i("div",{staticClass:"breadcrumb"},[i("el-breadcrumb",{attrs:{separator:">"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/areaagent/merchant"}}},[t._v("商户列表")]),t._v(" "),i("el-breadcrumb-item",{nativeOn:{click:function(e){t.goDetail(e)}}},[t._v("商户详情")]),t._v(" "),i("el-breadcrumb-item",[t._v("编辑基础信息")])],1)],1),t._v(" "),i("div",{staticClass:"editor-content"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"item clearfix"},[t._m(1),t._v(" "),i("div",{staticClass:"item-right fl"},[i("el-input",{class:{"border-redtip":t.nameErr},attrs:{placeholder:"请输入店铺名称"},on:{blur:t.checkShopName},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.shop_name,callback:function(e){t.shop_name=e},expression:"shop_name"}})],1),t._v(" "),t.nameErr?i("div",{staticClass:"errtip fl"},[i("span",[t._v("店铺名称不能超过50个字符")])]):t._e()]),t._v(" "),i("div",{staticClass:"item clearfix logo"},[t._m(2),t._v(" "),i("div",{staticClass:"item-right fl clearfix"},[i("div",{staticClass:"fl img-content"},[i("img",{attrs:{src:t.shop_logo_src}})]),t._v(" "),i("div",{staticClass:"fl upload-content"},[i("sl-upload",{attrs:{BtnText:t.btnText,ImageSize:1024},on:{"send-image":t.getImg,"on-change":t.clearTip}}),t._v(" "),i("span",{staticClass:"upload-tip"},[t._v("一个月内只能更换一次，文件类型必须为JPG、JPEG、PNG，宽500像素，高500像素，文件大小不得超过1M")])],1)])]),t._v(" "),i("div",{staticClass:"item clearfix"},[t._m(3),t._v(" "),i("div",{staticClass:"item-right fl"},[i("el-input",{class:{"border-redtip":t.telephoneErr},attrs:{placeholder:"请输入联系人电话"},on:{blur:t.checkTelephone},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.telephone,callback:function(e){t.telephone=e},expression:"telephone"}})],1),t._v(" "),t.telephoneErr?i("div",{staticClass:"errtip fl"},[i("span",[t._v("请输入正确格式的电话号码")])]):t._e()])]),t._v(" "),i("div",{staticClass:"item clearfix"},[t._m(4),t._v(" "),i("div",{staticClass:"item-right fl"},[i("el-input",{class:{"border-redtip":t.areaErr},attrs:{placeholder:"请输入店铺面积"},nativeOn:{input:function(e){t.clearTip(e)},keyup:function(e){t.checkArea(e)}},model:{value:t.shop_area,callback:function(e){t.shop_area=e},expression:"shop_area"}}),t._v("\n                      ㎡\n                  ")],1),t._v(" "),t.areaErr?i("div",{staticClass:"errtip fl"},[i("span",[t._v("请输入数字格式")])]):t._e()]),t._v(" "),i("div",{staticClass:"item clearfix address"},[t._m(5),t._v(" "),i("div",{staticClass:"item-right fl"},[i("div",{staticClass:"selectCity"},[i("select-city",{attrs:{cityinfo:t.cityinfo},on:{changeProvinces:t.getCity}})],1),t._v(" "),i("div",[i("el-input",{class:{"border-redtip":t.addressErr},attrs:{placeholder:"街道楼盘名称房号"},on:{blur:function(t){}},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)])]),t._v(" "),t._m(6),t._v(" "),i("div",{ref:"adjustHeight"}),t._v(" "),i("div",{staticClass:"btn-group"},[t.showBtn?i("div",{staticClass:"create",on:{click:t.save}},[t._v("保存")]):i("div",{staticClass:"create-disabled"},[t._v("保存")]),t._v(" "),i("div",{staticClass:"cancel",on:{click:t.openCancelDialog}},[t._v("取消")])])]),t._v(" "),i("el-dialog",{staticClass:"nopadding cancel-dialog",attrs:{visible:t.cancelDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.cancelDialogVisible=e}}},[i("div",{staticClass:"cancel-content"},[i("span",[t._v("将放弃填写内容，确定取消本次编辑？")])]),t._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok",on:{click:t.cancelEditor}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel",on:{click:t.hideCancelDialog}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title clearfix"},[e("span",[this._v("基础信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("店铺名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("店铺Logo")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("联系电话")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("店铺面积")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("店铺地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item clearfix shop-model"},[e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("营业模式")])]),this._v(" "),e("div",{staticClass:"item-right fl"},[e("span",{staticClass:"model-btn"},[this._v("简餐")])])])}]};var p=i("X4nt")(l,h,!1,function(t){i("1qEt"),i("hcpO")},"data-v-32c77cfc",null);e.default=p.exports},Umpw:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAABRdJREFUeAHtnMlOKzEQRR0I8zyISQg2LNjw/x/CB7BgAwgxiEnM751IRiHqvBi6fV39VCWhJB2nXb7H5bFN5+Tk5DO4mVFgzIwn7khPAQdirCI4EAdiTAFj7niEOBBjChhzxyPEgRhTwJg7HiEOxJgCxtzxCHEgxhQw5o5HiAMxpoAxdzxCHIgxBYy54xHiQIwpYMwdjxAHYkwBY+54hDgQYwoYc8cjxIEYU8CYOx4hxoB0jfnz5c78/HyYnZ0Nk5OTYXx8PHx8fIS3t7fw9PQU7u/ve++/Ev9Hb8wBmZmZCaurq2FiYuKbzEDhb2pqKiwtLYW7u7twfX0dPj//rydhTQFZWFjoweh0Ot9gDH7g+8XFxV70nJ2dDX7d6s9m+hCaJyJjFIx+taenp8Pa2lr/pda/NwEECAj7ExhReaJqbm4ufmz9q4kmC1HpH35ry8vL4eHh4evngKWvifdkMPD6+tobGHwlMvrGBBCaqzrGACAOAoDD/aqi7fn5Odze3obHx8c62WX9rQkgDG3r2sbGRuh2u5Ug4r2JGtK9vLyEi4sLk0Pn4n3I2NhY4K+uESFVUVF1XyrA9vZ2YFBgzeorUaNE1GhGViWM/oVoif1MCR+q8izSZFGTAcFsPLVWVzlf9xqRub6+Hs7Pz+veqrHfy4EAYHNz00xzwcrAzs5ObxRG30KHz4islHWUp3CtwRgmOutlV1dXRcBI+xDmGxY70kEwMWpoUtUmA0J0sCjYFsNf+hcqkdJkQOrOxpWi9OfF4IP5i8pkQGgG2mhEinJoLgPSxGy8FFAiRFWhZECamI2XAkK+ddfbUn2XAWELts2m6kdkQFgCb7OxzKMwGRAmW26jFZABYQOpzQ8kvL+/j1azgRQyIKwP9e/qNeC79Bascykse8PILl00nhBh9qtqj2O+TbyythXLkrODzw7k9PT0W1P1dzGzCX2K3YOJ4sHBQbb8szdZ1jaA6iqZuzzZgbR9QjgIMHd5HMig4iM+tz5CchdghH6Nf527PNkjpM2LilU04/NfVd81cS07kDbsEP5EyNzlyQ4k55j9J0I2lTZ3ebIDIcRzt7tNiT3qPpSj9U0WhVTtJYwStO73ik2q7BGCCOoHBeoKP+z3inJIgBAhbW+28F9xDkUChPWfEs84Davpv7lOdFCO3CYBQiE4t9FmUz1TJgPCBJGDmm20eMBU4bsMCIX57TlChRDD8qCZUh4slQJhY2plZWVY2U1e5yE55YaaFAiKU8Dcyw9NkcVPdQWSA6EJ4DiZ9WEw/uGnYmTVX4HkQMicJmBra6vfD1PvY6VRNlVRgCJAyJzJIieX1DUwFnzYK/5wwkuxTFLlQzEgOMPM1xIUtmfxR7FEUgWDa0WB4ACRsru7m30Vlbz+ZTRP+FF6IbQ4EERiNLO3t1fshBWz8P39fenBnGGVI/tzWcMyHrxOc8G5cZqxy8vL3n9bGEzT9GdWD8izVH9RVR4zQKJzAEGo4+PjHpQcxxgY0rLRdHR0VLypjOWOr+aA4BiC3dzcZP3vPUSkxbmQiT4k1o74iliHh4fZai/Rwf3Jx5pJ/3GAtcJb9MdeFbGoktAnByIUOyUrB5KikjCNAxGKnZKVA0lRSZjGgQjFTsnKgaSoJEzjQIRip2TlQFJUEqZxIEKxU7JyICkqCdM4EKHYKVk5kBSVhGkciFDslKwcSIpKwjQORCh2SlYOJEUlYRoHIhQ7JSsHkqKSMI0DEYqdktUfG4KzdcXn9bsAAAAASUVORK5CYII="},hcpO:function(t,e){}});