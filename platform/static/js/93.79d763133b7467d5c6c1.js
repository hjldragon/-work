webpackJsonp([93],{C5pm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Ym9J"),i=a.n(s),n=a("Fzxs"),l=a("6nXL"),o=a("lbRB"),r=a("EuEE"),p={components:{EmptyTable:n.a},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},applyTime:null,statusSelect:"",statusOtion:[{label:"全部",value:2},{label:l.a.toString(l.a.YES),value:l.a.YES},{label:l.a.toString(l.a.NO),value:l.a.NO}],list:[],emptyType:1,multipleSelection:[],total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1}},computed:{isListEmpty:function(){return 0===this.list.length}},created:function(){this.getList()},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$refs.applyTable.$refs.bodyWrapper;r.a.AdjustHeight(e)})},methods:{getList:function(){var t=this,e={agent_apply_list:1,page_size:this.listQuery.limit,page_no:this.listQuery.page};if(!r.a.isEmpty(this.applyTime)){var a=this.applyTime[0],s=this.applyTime[1];e.begin_time=parseInt(i()(a).format("X")),e.end_time=parseInt(i()(s).format("X"))+86400}2!==this.statusSelect&&(e.apply_status=this.statusSelect),this.isSort&&(e.sort_name=this.sortLabel,e.desc=this.sortOrder),Object(o.a)(e).then(function(e){0===e.ret&&(t.list=e.data.apply_list||[],t.total=e.data.total,t.list.map(function(t){return t.apply_time&&(t.apply_time=i()(1e3*t.apply_time).format("YYYY.MM.DD")),t.apply_status===l.a.YES?t.isShowbtn=!1:t.isShowbtn=!0,t.apply_status=l.a.toString(t.apply_status),t}))})},search:function(){this.emptyType=2,this.listQuery.page=1,this.getList()},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},mulDelte:function(){var t=this,e=this.multipleSelection.map(function(t){return t.apply_id});if(0!==e.length){var a={change_apply_status:1,apply_id_list:e,type:1};Object(o.b)(a).then(function(e){0===e.ret?(t.$slnotify({message:"所选项已删除成功",duration:1500}),t.getList()):t.$slnotify({message:l.w.toString(e.ret),duration:1500})})}else this.$slnotify({message:"您还没有勾选任何选项",duration:1500})},mulChangeStatus:function(){var t=this,e=this.multipleSelection.map(function(t){return t.apply_id});if(0!==e.length){var a={change_apply_status:1,apply_id_list:e,type:2};Object(o.b)(a).then(function(e){0===e.ret?(t.$slnotify({message:"所选项已标记为已处理",duration:1500}),t.getList()):t.$slnotify({message:l.w.toString(e.ret),duration:1500})})}else this.$slnotify({message:"您还没有勾选任何选项",duration:1500})},changeStatus:function(t){var e=this,a=[];a.push(t);var s={change_apply_status:1,apply_id_list:a,type:2};Object(o.b)(s).then(function(t){0===t.ret?(e.$slnotify({message:"标记成功",duration:1500}),e.getList()):e.$slnotify({message:l.w.toString(t.ret),duration:1500})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"agent-apply-list"}},[a("div",{staticClass:"search-content"},[a("div",{staticClass:"time fl clearfix search-item"},[t._m(0),t._v(" "),a("div",{staticClass:"fl"},[a("el-date-picker",{attrs:{"unlink-panels":"",editable:!1,type:"daterange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.applyTime,callback:function(e){t.applyTime=e},expression:"applyTime"}})],1)]),t._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[t._m(1),t._v(" "),a("div",{staticClass:"fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.statusSelect,callback:function(e){t.statusSelect=e},expression:"statusSelect"}},t._l(t.statusOtion,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("div",{staticClass:"search-btn fl",on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("div",{staticClass:"operate-btn fr"},[a("div",{staticClass:"handling-btn",on:{click:t.mulChangeStatus}},[t._v("标记为已处理")]),t._v(" "),a("div",{staticClass:"delete-btn",on:{click:t.mulDelte}},[t._v("删除")])])]),t._v(" "),a("div",{staticClass:"table-content change-default"},[a("el-table",{ref:"applyTable",attrs:{data:t.list,stripe:""},on:{"sort-change":t.sort,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"apply_time",label:"创建时间","min-width":"80",align:"center",sortable:"true","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"adjust-center"},[t._v(t._s(e.row.apply_time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"apply_name",label:"联系人姓名","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.apply_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"telephone",label:"联系电话","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.telephone))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.email))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.address))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"apply_status",label:"状态","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.apply_status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"apply_status",label:"操作","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isShowbtn?a("span",{staticClass:"wait-btn",on:{click:function(a){t.changeStatus(e.row.apply_id)}}},[t._v("待处理")]):a("span",{staticClass:"dealwith-btn"},[t._v("已处理")])]}}])})],1),t._v(" "),t.isListEmpty?a("empty-table",{attrs:{type:t.emptyType}}):t._e()],1),t._v(" "),a("div",{staticClass:"pagination-content change-pagination-default"},[a("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("申请时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("状态")])])}]},u=a("8AGX")(p,c,!1,function(t){a("O40p"),a("VTrw")},"data-v-05a1b83c",null);e.default=u.exports},O40p:function(t,e){},VTrw:function(t,e){}});