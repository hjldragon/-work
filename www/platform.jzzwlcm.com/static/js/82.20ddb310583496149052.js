webpackJsonp([82],{I60Y:function(t,e){},WQna:function(t,e){},evqY:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4YfN"),i=s.n(a),r=s("9aGi"),n=s("9rMa"),l=s("6nXL"),c=s("lbRB"),o=s("EuEE"),p=s("a2vD"),d=s("N6PA"),h={components:{SelectCity:r.a},data:function(){return{agent_name:"",phone:"",password:"",passwordRepeat:"",real_name:"",telephone:"",email:"",address:"",agent_province:"",agent_city:"",agent_area:"",from:"",from_salesman:"",nameErr:!1,phoneErr:!1,passwordErr:!1,passwordformatErr:!1,contactErr:!1,contactPhoneErr:!1,emailErr:!1,isHidepwd:!0,isHidepwdrepeat:!0,cancelDialogVisible:!1,fromOptions:[],salesmanOptions:[],AgentType:l.f,AgentLevel:l.d}},computed:i()({},Object(n.b)(["creat_agent"]),{agent_type:function(){return this.creat_agent.type},agent_level:function(){return this.creat_agent.level},agent_type_text:function(){return l.f.toString(this.agent_type)},agent_level_text:function(){return l.d.toString(this.agent_level)},isShowAddressTip:function(){return!(this.address.length>15)},showCreatedBtn:function(){return this.agent_type===l.f.AREA?!!(this.agent_province&&this.agent_name&&this.phone&&this.password&&this.passwordRepeat&&this.real_name&&this.telephone&&this.address&&this.from&&this.from_salesman):!!(this.agent_name&&this.phone&&this.password&&this.passwordRepeat&&this.real_name&&this.telephone&&this.address&&this.from&&this.from_salesman)}}),created:function(){this.getPlatformerinfo()},methods:{clearTip:function(){this.nameErr=!1,this.phoneErr=!1,this.passwordErr=!1,this.passwordformatErr=!1,this.contactErr=!1,this.contactPhoneErr=!1,this.emailErr=!1},hidepwd:function(){this.isHidepwd=!0},showpwd:function(){this.isHidepwd=!1},hidepwdReapeat:function(){this.isHidepwdrepeat=!0},showpwdReapeat:function(){this.isHidepwdrepeat=!1},checkPwd:function(){return this.password===this.passwordRepeat||(this.passwordErr=!0,!1)},openCancelDialog:function(){this.cancelDialogVisible=!0},hideCancelDialog:function(){this.cancelDialogVisible=!1},cancelEditor:function(){this.$router.push("/agent/create")},check:function(){var t=!1;return this.checkPhone()||(t=!0),this.checkTelephone()||(t=!0),this.checkAgentName()||(t=!0),this.checkRealName()||(t=!0),this.checkPwd()||(t=!0),this.checkPasswordFormat()||(t=!0),""===this.email||this.checkEmail()||(t=!0),t},creatAgent:function(){var t=this;if(!this.check()){var e={agent_save:1,platformer_id:p.a.getPlatformerid(),phone:this.phone,password:this.password,re_password:this.passwordRepeat,agent_type:this.agent_type,agent_level:this.agent_level,agent_name:this.agent_name,telephone:this.telephone,real_name:this.real_name,address:this.address,from:this.from,from_salesman:this.from_salesman};this.email&&(e.email=this.email),this.agent_type===l.f.AREA&&(e.agent_province=this.agent_province,this.agent_city&&(e.agent_city=this.agent_city),this.agent_area&&(e.agent_area=this.agent_area)),Object(c.d)(e).then(function(e){0===e.ret?(t.$slnotify({message:"创建成功"}),setTimeout(function(){t.goList(),t.$store.commit("CHANGE_AGENTTYPE",1),t.$store.commit("CHANGE_AGENTLEVEL",1)},1500)):t.$slnotify({message:l.C.toString(e.ret)})})}},getCity:function(t){this.agent_province=t.province,this.agent_city=t.city,this.agent_area=t.blocks},checkPhone:function(){var t=d.a.isTelePhone(this.phone);return t||(this.phoneErr=!0),t},checkTelephone:function(){var t=d.a.isTelePhone(this.telephone);return t||(this.contactPhoneErr=!0),t},checkEmail:function(){var t=o.a.checkEmail(this.email);return t||(this.emailErr=!0),t},checkAgentName:function(){var t=this.agent_name.trim(),e=o.a.checkName(t);return e||(this.nameErr=!0),e},checkRealName:function(){var t=this.real_name.trim(),e=o.a.checkName(t);return e||(this.contactErr=!0),e},checkPasswordFormat:function(){var t=o.a.checkPassword(this.password);return t||(this.passwordformatErr=!0),t},getPlatformerinfo:function(){var t=this,e={get_platformer_info:1,platformer_id:p.a.getPlatformerid()};Object(c.f)(e).then(function(e){if(0===e.ret){var s=e.data.platformer;t.salesmanOptions=s.salesman_record||[],t.fromOptions=s.from_record||[]}})},goList:function(){var t=void 0;t=this.agent_type===l.f.INDUSTRY,this.$router.push({path:"/agent/list",query:{isindustry:t}}),this.$store.commit("CHANGE_SELECTMENU","/agent/list")}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"create-agentdetail"}},[s("div",{staticClass:"breadcrumb"},[s("el-breadcrumb",{attrs:{separator:">"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/agent/create"}}},[t._v("创建代理商")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑代理商信息")])],1)],1),t._v(" "),s("div",{staticClass:"editor-content"},[s("div",{staticClass:"title"},[t._v("基础信息")]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"item clearfix"},[t._m(0),t._v(" "),s("div",{staticClass:"item-right fl"},[s("span",[t._v(t._s(t.agent_type_text))])])]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(1),t._v(" "),s("div",{staticClass:"item-right fl"},[s("span",[t._v(t._s(t.agent_level_text))])])]),t._v(" "),t.AgentType.AREA===t.agent_type?s("div",{staticClass:"item clearfix selectCity"},[t._m(2),t._v(" "),s("div",{staticClass:"item-right fl"},[s("select-city",{on:{changeProvinces:t.getCity}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(3),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.nameErr},attrs:{placeholder:"请输入代理商名称"},on:{blur:t.checkAgentName},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.agent_name,callback:function(e){t.agent_name=e},expression:"agent_name"}})],1),t._v(" "),t.nameErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入中文、字母或数字")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(4),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.phoneErr},attrs:{placeholder:"请输入登录手机号"},on:{blur:t.checkPhone},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),t.phoneErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入正确格式的手机号码")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(5),t._v(" "),t.isHidepwd?s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.passwordErr||t.passwordformatErr},attrs:{type:"password",placeholder:"请输入登录密码"},on:{blur:t.checkPasswordFormat},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[s("i",{staticClass:"iconfont icon-yanjing1",attrs:{slot:"suffix"},on:{click:t.showpwd},slot:"suffix"})])],1):s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.passwordErr||t.passwordformatErr},attrs:{type:"text",placeholder:"请输入登录密码"},on:{blur:t.checkPasswordFormat},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[s("i",{staticClass:"iconfont icon-yanjing",attrs:{slot:"suffix"},on:{click:t.hidepwd},slot:"suffix"})])],1),t._v(" "),t.passwordformatErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("密码的格式必须是字母，数字，长度在6-20之间")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(6),t._v(" "),t.isHidepwdrepeat?s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.passwordErr||t.passwordformatErr},attrs:{type:"password",placeholder:"请重复登录密码"},on:{blur:t.checkPwd},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.passwordRepeat,callback:function(e){t.passwordRepeat=e},expression:"passwordRepeat"}},[s("i",{staticClass:"iconfont icon-yanjing1",attrs:{slot:"suffix"},on:{click:t.showpwdReapeat},slot:"suffix"})])],1):s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.passwordErr||t.passwordformatErr},attrs:{type:"text",placeholder:"请重复登录密码"},on:{blur:t.checkPwd},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.passwordRepeat,callback:function(e){t.passwordRepeat=e},expression:"passwordRepeat"}},[s("i",{staticClass:"iconfont icon-yanjing",attrs:{slot:"suffix"},on:{click:t.hidepwdReapeat},slot:"suffix"})])],1),t._v(" "),t.passwordErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("两次密码输入不一致")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(7),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.contactErr},attrs:{placeholder:"请输入联系人姓名"},on:{blur:t.checkRealName},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.real_name,callback:function(e){t.real_name=e},expression:"real_name"}})],1),t._v(" "),t.contactErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入中文、字母或数字")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(8),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.contactPhoneErr},attrs:{placeholder:"请输入联系人电话"},on:{blur:t.checkTelephone},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.telephone,callback:function(e){t.telephone=e},expression:"telephone"}})],1),t._v(" "),t.contactPhoneErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入正确格式的手机号码")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(9),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.emailErr},attrs:{placeholder:"请输入联系人邮箱"},on:{blur:t.checkEmail},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),t.emailErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入正确格式的邮箱")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(10),t._v(" "),s("div",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"item-right fl"},[s("el-input",{attrs:{placeholder:"请输入详细地址"},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),t._v(" "),s("el-popover",{ref:"popover",attrs:{disabled:t.isShowAddressTip,placement:"top-start",width:"300",trigger:"hover",content:t.address}})],1)]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(11),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择来源"},on:{change:t.clearTip},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}},t._l(t.fromOptions,function(t,e){return s("el-option",{key:e,attrs:{label:t,value:t}})}))],1)]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(12),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择所属销售"},on:{change:t.clearTip},model:{value:t.from_salesman,callback:function(e){t.from_salesman=e},expression:"from_salesman"}},t._l(t.salesmanOptions,function(t,e){return s("el-option",{key:e,attrs:{label:t,value:t}})}))],1)])]),t._v(" "),s("div",{staticClass:"btn-group"},[t.showCreatedBtn?s("div",{staticClass:"create",on:{click:t.creatAgent}},[t._v("创建")]):s("div",{staticClass:"create-disabled"},[t._v("创建")]),t._v(" "),s("div",{staticClass:"cancel",on:{click:t.openCancelDialog}},[t._v("取消")])])]),t._v(" "),s("el-dialog",{staticClass:"nopadding cancel-dialog",attrs:{visible:t.cancelDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.cancelDialogVisible=e}}},[s("div",{staticClass:"cancel-content"},[s("span",[t._v("将放弃填写内容，确定取消本次编辑？")])]),t._v(" "),s("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"btn-Dialogok",on:{click:t.cancelEditor}},[t._v("确认")]),t._v(" "),s("div",{staticClass:"btn-Dialogcancel",on:{click:t.hideCancelDialog}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理商类型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理商级别")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理区域")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理商名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("登录手机号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("登录密码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("确认登录密码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("联系人")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("联系电话")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",[this._v("邮箱")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("来源")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("所属销售")])])}]};var v=s("C7Lr")(h,f,!1,function(t){s("WQna"),s("I60Y")},"data-v-7f32260e",null);e.default=v.exports}});