webpackJsonp([95],{BvQe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("9aGi"),s=a("N6PA"),n=a("a2vD"),r=a("EuEE"),l=a("6nXL"),c=a("lbRB"),o={components:{SelectCity:i.a},data:function(){return{agent_id:"",agent_type:"",agent_level:"",agent_name:"",phone:"",password:"",passwordRepeat:"",real_name:"",telephone:"",email:"",address:"",agent_province:"",agent_city:"",agent_area:"",from:"",from_salesman:"",nameErr:!1,phoneErr:!1,passwordErr:!1,passwordformatErr:!1,contactErr:!1,contactPhoneErr:!1,emailErr:!1,isHidepwd:!0,isHidepwdrepeat:!0,cancelDialogVisible:!1,agentTypeData:[{label:l.f.toString(l.f.AREA),value:l.f.AREA},{label:l.f.toString(l.f.INDUSTRY),value:l.f.INDUSTRY}],agentLevelData:[{label:l.d.toString(l.d.FIRST),value:l.d.FIRST},{label:l.d.toString(l.d.SECOND),value:l.d.SECOND},{label:l.d.toString(l.d.THREE),value:l.d.THREE}],salesmanOptions:[],fromOptions:[],cityinfo:{province:"",city:"",area:""},AgentType:l.f,AgentLevel:l.d}},computed:{showCreatedBtn:function(){return this.agent_type===l.f.AREA?!!(this.agent_province&&this.agent_name&&this.phone&&this.real_name&&this.telephone&&this.address&&this.from&&this.from_salesman):!!(this.agent_name&&this.phone&&this.real_name&&this.telephone&&this.address&&this.from&&this.from_salesman)},isShowAddressTip:function(){return!(this.address.length>15)}},created:function(){this.getAgentinfo(),this.getPlatformerinfo()},methods:{goagentdetail:function(){this.$router.push({path:"/agentlist/detail",query:{agentid:this.agent_id}})},goList:function(){var e=void 0;e=this.agent_type===l.f.INDUSTRY,this.$router.push({path:"/agent/list",query:{isindustry:e}})},clearTip:function(){this.nameErr=!1,this.phoneErr=!1,this.passwordErr=!1,this.passwordformatErr=!1,this.contactErr=!1,this.contactPhoneErr=!1,this.emailErr=!1},hidepwd:function(){this.isHidepwd=!0},showpwd:function(){this.isHidepwd=!1},hidepwdReapeat:function(){this.isHidepwdrepeat=!0},showpwdReapeat:function(){this.isHidepwdrepeat=!1},checkPwd:function(){return this.password===this.passwordRepeat||(this.passwordErr=!0,!1)},openCancelDialog:function(){this.cancelDialogVisible=!0},hideCancelDialog:function(){this.cancelDialogVisible=!1},cancelEditor:function(){this.$router.go(-1)},getCity:function(e){this.agent_province=e.province,this.agent_city=e.city,this.agent_area=e.blocks},getAgentinfo:function(){var e=this;this.agent_id=this.$route.query.agentid||"";var t={agent_info:1,agent_id:this.agent_id,type:1};Object(c.c)(t).then(function(t){if(0===t.ret){var a=t.data.agent_info;e.agent_type=a.agent_type,e.agent_level=a.agent_level,e.agent_name=a.agent_name,e.phone=a.phone,e.real_name=a.real_name,e.telephone=a.telephone,e.email=a.email||"",e.address=a.address,e.from=a.from,e.from_salesman=a.from_salesman,e.agent_type===l.f.AREA&&(e.agent_province=a.agent_province,e.agent_city=a.agent_city,e.agent_area=a.agent_area,e.cityinfo.province=a.agent_province,e.cityinfo.city=a.agent_city,e.cityinfo.area=a.agent_area)}})},getPlatformerinfo:function(){var e=this,t={get_platformer_info:1,platformer_id:n.a.getPlatformerid()};Object(c.f)(t).then(function(t){if(0===t.ret){var a=t.data.platformer;e.salesmanOptions=a.salesman_record||[],e.fromOptions=a.from_record||[]}})},check:function(){var e=!1;return this.checkPhone()||(e=!0),this.checkTelephone()||(e=!0),this.checkAgentName()||(e=!0),this.checkRealName()||(e=!0),""===this.email||this.checkEmail()||(e=!0),e},saveAgent:function(){var e=this;if(!this.check()){var t={agent_save:1,platformer_id:n.a.getPlatformerid(),agent_id:this.agent_id,phone:this.phone,agent_type:this.agent_type,agent_level:this.agent_level,agent_name:this.agent_name,telephone:this.telephone,real_name:this.real_name,address:this.address,from:this.from,from_salesman:this.from_salesman};this.email&&(t.email=this.email),this.agent_type===l.f.AREA&&(t.agent_province=this.agent_province,this.agent_city&&(t.agent_city=this.agent_city),this.agent_area&&(t.agent_area=this.agent_area)),Object(c.d)(t).then(function(t){0===t.ret?(e.$slnotify({message:"操作成功"}),setTimeout(function(){e.goList()},1500)):e.$slnotify({message:l.C.toString(t.ret)})})}},checkPhone:function(){var e=s.a.isTelePhone(this.phone);return e||(this.phoneErr=!0),e},checkTelephone:function(){var e=s.a.isTelePhone(this.telephone);return e||(this.contactPhoneErr=!0),e},checkAgentName:function(){var e=this.agent_name.trim(),t=r.a.checkName(e);return t||(this.nameErr=!0),t},checkRealName:function(){var e=this.real_name.trim(),t=r.a.checkName(e);return t||(this.contactErr=!0),t},checkEmail:function(){var e=r.a.checkEmail(this.email);return e||(this.emailErr=!0),e},checkPasswordFormat:function(){var e=r.a.checkPassword(this.password);return e||(this.passwordformatErr=!0),e}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"agnet-detail-editor"}},[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{separator:">"}},[a("el-breadcrumb-item",{nativeOn:{click:function(t){return e.goList(t)}}},[e._v("代理商列表")]),e._v(" "),a("el-breadcrumb-item",{nativeOn:{click:function(t){return e.goagentdetail(t)}}},[e._v("代理商详情")]),e._v(" "),a("el-breadcrumb-item",[e._v("编辑代理商")])],1)],1),e._v(" "),a("div",{staticClass:"editor-content"},[a("div",{staticClass:"title"},[e._v("基础信息")]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"item clearfix"},[e._m(0),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.agent_type,callback:function(t){e.agent_type=t},expression:"agent_type"}},e._l(e.agentTypeData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(1),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.agent_level,callback:function(t){e.agent_level=t},expression:"agent_level"}},e._l(e.agentLevelData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.AgentType.AREA===e.agent_type,expression:"AgentType.AREA === agent_type"}],staticClass:"item clearfix selectCity"},[e._m(2),e._v(" "),a("div",{staticClass:"item-right fl"},[a("select-city",{attrs:{cityinfo:e.cityinfo},on:{changeProvinces:e.getCity}})],1)]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(3),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":e.nameErr},attrs:{placeholder:"请输入代理商名称"},nativeOn:{input:function(t){return e.clearTip(t)}},model:{value:e.agent_name,callback:function(t){e.agent_name=t},expression:"agent_name"}})],1),e._v(" "),e.nameErr?a("div",{staticClass:"errtip fl"},[a("span",[e._v("请输入中文、字母或数字")])]):e._e()]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(4),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":e.phoneErr},attrs:{placeholder:"请输入登录手机号"},nativeOn:{input:function(t){return e.clearTip(t)}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),e.phoneErr?a("div",{staticClass:"errtip fl"},[a("span",[e._v("请输入正确格式的手机号码")])]):e._e()]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(5),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":e.contactErr},attrs:{placeholder:"请输入联系人姓名"},nativeOn:{input:function(t){return e.clearTip(t)}},model:{value:e.real_name,callback:function(t){e.real_name=t},expression:"real_name"}})],1),e._v(" "),e.contactErr?a("div",{staticClass:"errtip fl"},[a("span",[e._v("请输入中文、字母或数字")])]):e._e()]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(6),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":e.contactPhoneErr},attrs:{placeholder:"请输入联系人电话"},nativeOn:{input:function(t){return e.clearTip(t)}},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}})],1),e._v(" "),e.contactPhoneErr?a("div",{staticClass:"errtip fl"},[a("span",[e._v("请输入正确格式的手机号码")])]):e._e()]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(7),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":e.emailErr},attrs:{placeholder:"请输入联系人邮箱"},nativeOn:{input:function(t){return e.clearTip(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),e.emailErr?a("div",{staticClass:"errtip fl"},[a("span",[e._v("请输入正确格式的邮箱")])]):e._e()]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(8),e._v(" "),a("div",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"item-right fl"},[a("el-input",{attrs:{placeholder:"请输入详细地址"},nativeOn:{input:function(t){return e.clearTip(t)}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),e._v(" "),a("el-popover",{ref:"popover",attrs:{disabled:e.isShowAddressTip,placement:"top-start",width:"300",trigger:"hover",content:e.address}})],1)]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(9),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择来源"},on:{change:e.clearTip},model:{value:e.from,callback:function(t){e.from=t},expression:"from"}},e._l(e.fromOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1)]),e._v(" "),a("div",{staticClass:"item clearfix"},[e._m(10),e._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择所属销售"},on:{change:e.clearTip},model:{value:e.from_salesman,callback:function(t){e.from_salesman=t},expression:"from_salesman"}},e._l(e.salesmanOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1)])]),e._v(" "),a("div",{staticClass:"btn-group"},[e.showCreatedBtn?a("div",{staticClass:"create",on:{click:e.saveAgent}},[e._v("保存")]):a("div",{staticClass:"create-disabled"},[e._v("保存")]),e._v(" "),a("div",{staticClass:"cancel",on:{click:e.openCancelDialog}},[e._v("取消")])])]),e._v(" "),a("el-dialog",{staticClass:"nopadding cancel-dialog",attrs:{visible:e.cancelDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(t){e.cancelDialogVisible=t}}},[a("div",{staticClass:"cancel-content"},[a("span",[e._v("将放弃填写内容，确定取消本次编辑？")])]),e._v(" "),a("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"btn-Dialogok",on:{click:e.cancelEditor}},[e._v("确认")]),e._v(" "),a("div",{staticClass:"btn-Dialogcancel",on:{click:e.hideCancelDialog}},[e._v("取消")])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("代理商类型")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("代理商级别")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("代理区域")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("代理商名称")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("登录手机号")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("联系人")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("联系电话")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",[this._v("邮箱")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("地址")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("来源")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item-left fl"},[t("span",{staticClass:"sl-must"},[this._v("所属销售")])])}]};var v=a("C7Lr")(o,h,!1,function(e){a("zeJR"),a("NW1n")},"data-v-34e43d3e",null);t.default=v.exports},NW1n:function(e,t){},zeJR:function(e,t){}});