webpackJsonp([49],{"1iug":function(t,i){},"5Hb+":function(t,i){},"7c2Y":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("4YfN"),a=s.n(e),o=s("5aCZ"),n=s("6j3y"),c=s("9rMa"),d=s("EuEE"),r=s("RgnA"),g=s("6nXL"),l={components:{Tinymce:o.a,SlUpload:n.a},data:function(){return{goodName:"",goodPrice:"",describe:"",imgsrc:s("Idcw"),imgName:"",isEditor:!1,isSaleOn:!1}},computed:a()({},Object(c.b)(["select_categoryid"]),{isShowBtn:function(){return!!(this.goodName&&this.goodPrice&&this.imgName&&this.describe&&'<p><br data-mce-bogus="1"></p>'!==this.describe)}}),created:function(){this.goodid=this.$route.query.goodid||"",this.goodid?(this.isEditor=!0,this.getGoodinfo()):this.isEditor=!1},methods:{getGoodinfo:function(){var t=this,i={goods_info:1,goods_id:this.goodid};Object(r.c)(i).then(function(i){if(0===i.ret){var s=i.data.info;t.goodName=s.goods_name,t.describe=s.describe,t.goodPrice=s.goods_price,t.imgName=s.goods_img,t.imgsrc="./php/img_get.php?img=1&imgname="+s.goods_img}else t.$slnotify({message:g.C.toString(i.ret),duration:1500})})},checkPrice:function(){this.goodPrice=d.a.clearNoNum(this.goodPrice)},getImg:function(t){this.imgName=t,this.imgsrc="./php/img_get.php?img=1&imgname="+t},saveOn:function(){this.isSaleOn=!0,this.save()},save:function(){var t=this,i={goods_save:1,goods_name:this.goodName,goods_price:this.goodPrice,goods_img:this.imgName,describe:this.describe,category_id:this.select_categoryid};this.isSaleOn?i.sale_off=0:i.sale_off=1,this.isEditor&&(i.goods_id=this.goodid),Object(r.d)(i).then(function(i){0===i.ret?(t.isSaleOn?t.$slnotify({message:"保存并上架成功",duration:1500}):t.$slnotify({message:"保存成功",duration:1500}),setTimeout(function(){t.$router.go(-1)},1500)):t.$slnotify({message:g.C.toString(i.ret),duration:1500})})}}},m={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"good-editor"}},[s("div",{staticClass:"breadcrumb"},[s("el-breadcrumb",{attrs:{separator:">"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/good/list"}}},[t._v("商品列表")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑详情")])],1)],1),t._v(" "),s("div",{staticClass:"title clearfix"},[s("span",[t._v("编辑商品")]),t._v(" "),s("div",{staticClass:"btn-group fr"},[t.isShowBtn?t._e():s("div",{staticClass:"send-gray-btn"},[t._v("保存")]),t._v(" "),t.isShowBtn?t._e():s("div",{staticClass:"send-time-gray-btn"},[t._v("保存并上架")]),t._v(" "),t.isShowBtn?s("div",{staticClass:"send-btn",on:{click:t.save}},[t._v("保存")]):t._e(),t._v(" "),t.isShowBtn?s("div",{staticClass:"send-time-btn",on:{click:t.saveOn}},[t._v("保存并上架")]):t._e(),t._v(" "),s("div",{staticClass:"cancel-btn",on:{click:function(i){t.$router.go(-1)}}},[t._v("取消")])])]),t._v(" "),s("div",{staticClass:"editor-content"},[s("div",{staticClass:"editor-item good-name"},[t._m(0),t._v(" "),s("div",{staticClass:"item-right"},[s("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.goodName,callback:function(i){t.goodName=i},expression:"goodName"}})],1)]),t._v(" "),s("div",{staticClass:"editor-item good-price"},[t._m(1),t._v(" "),s("div",{staticClass:"item-right"},[s("el-input",{attrs:{placeholder:"请输入商品价格"},nativeOn:{keyup:function(i){return t.checkPrice(i)}},model:{value:t.goodPrice,callback:function(i){t.goodPrice=i},expression:"goodPrice"}})],1)]),t._v(" "),s("div",{staticClass:"editor-item good-images"},[t._m(2),t._v(" "),s("div",{staticClass:"item-right clearfix"},[s("div",{staticClass:"fl img-content"},[s("img",{attrs:{src:t.imgsrc}})]),t._v(" "),s("div",{staticClass:"fl upload-content"},[s("sl-upload",{attrs:{ImageSize:512},on:{"send-image":t.getImg}}),t._v(" "),s("span",{staticClass:"upload-tip"},[t._v("一个月内只能更换一次，文件类型必须为JPG、JPEG、PNG，宽高比为1：1。")])],1)])]),t._v(" "),s("div",{staticClass:"editor-item describe-content"},[t._m(3),t._v(" "),s("div",{staticClass:"item-right"},[s("tinymce",{ref:"editor",attrs:{height:400,noImgupload:!0},model:{value:t.describe,callback:function(i){t.describe=i},expression:"describe"}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"item-left"},[i("span",{staticClass:"sl-must"},[this._v("商品名称")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"item-left"},[i("span",{staticClass:"sl-must"},[this._v("价格")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"item-left"},[i("span",{staticClass:"sl-must"},[this._v("商品图片")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"item-left"},[i("span",{staticClass:"sl-must"},[this._v("商品描述")])])}]};var h=s("C7Lr")(l,m,!1,function(t){s("5Hb+"),s("1iug")},"data-v-5efa2ce3",null);i.default=h.exports},Idcw:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAABRdJREFUeAHtnMlOKzEQRR0I8zyISQg2LNjw/x/CB7BgAwgxiEnM751IRiHqvBi6fV39VCWhJB2nXb7H5bFN5+Tk5DO4mVFgzIwn7khPAQdirCI4EAdiTAFj7niEOBBjChhzxyPEgRhTwJg7HiEOxJgCxtzxCHEgxhQw5o5HiAMxpoAxdzxCHIgxBYy54xHiQIwpYMwdjxAHYkwBY+54hDgQYwoYc8cjxIEYU8CYOx4hxoB0jfnz5c78/HyYnZ0Nk5OTYXx8PHx8fIS3t7fw9PQU7u/ve++/Ev9Hb8wBmZmZCaurq2FiYuKbzEDhb2pqKiwtLYW7u7twfX0dPj//rydhTQFZWFjoweh0Ot9gDH7g+8XFxV70nJ2dDX7d6s9m+hCaJyJjFIx+taenp8Pa2lr/pda/NwEECAj7ExhReaJqbm4ufmz9q4kmC1HpH35ry8vL4eHh4evngKWvifdkMPD6+tobGHwlMvrGBBCaqzrGACAOAoDD/aqi7fn5Odze3obHx8c62WX9rQkgDG3r2sbGRuh2u5Ug4r2JGtK9vLyEi4sLk0Pn4n3I2NhY4K+uESFVUVF1XyrA9vZ2YFBgzeorUaNE1GhGViWM/oVoif1MCR+q8izSZFGTAcFsPLVWVzlf9xqRub6+Hs7Pz+veqrHfy4EAYHNz00xzwcrAzs5ObxRG30KHz4islHWUp3CtwRgmOutlV1dXRcBI+xDmGxY70kEwMWpoUtUmA0J0sCjYFsNf+hcqkdJkQOrOxpWi9OfF4IP5i8pkQGgG2mhEinJoLgPSxGy8FFAiRFWhZECamI2XAkK+ddfbUn2XAWELts2m6kdkQFgCb7OxzKMwGRAmW26jFZABYQOpzQ8kvL+/j1azgRQyIKwP9e/qNeC79Bascykse8PILl00nhBh9qtqj2O+TbyythXLkrODzw7k9PT0W1P1dzGzCX2K3YOJ4sHBQbb8szdZ1jaA6iqZuzzZgbR9QjgIMHd5HMig4iM+tz5CchdghH6Nf527PNkjpM2LilU04/NfVd81cS07kDbsEP5EyNzlyQ4k55j9J0I2lTZ3ebIDIcRzt7tNiT3qPpSj9U0WhVTtJYwStO73ik2q7BGCCOoHBeoKP+z3inJIgBAhbW+28F9xDkUChPWfEs84Davpv7lOdFCO3CYBQiE4t9FmUz1TJgPCBJGDmm20eMBU4bsMCIX57TlChRDD8qCZUh4slQJhY2plZWVY2U1e5yE55YaaFAiKU8Dcyw9NkcVPdQWSA6EJ4DiZ9WEw/uGnYmTVX4HkQMicJmBra6vfD1PvY6VRNlVRgCJAyJzJIieX1DUwFnzYK/5wwkuxTFLlQzEgOMPM1xIUtmfxR7FEUgWDa0WB4ACRsru7m30Vlbz+ZTRP+FF6IbQ4EERiNLO3t1fshBWz8P39fenBnGGVI/tzWcMyHrxOc8G5cZqxy8vL3n9bGEzT9GdWD8izVH9RVR4zQKJzAEGo4+PjHpQcxxgY0rLRdHR0VLypjOWOr+aA4BiC3dzcZP3vPUSkxbmQiT4k1o74iliHh4fZai/Rwf3Jx5pJ/3GAtcJb9MdeFbGoktAnByIUOyUrB5KikjCNAxGKnZKVA0lRSZjGgQjFTsnKgaSoJEzjQIRip2TlQFJUEqZxIEKxU7JyICkqCdM4EKHYKVk5kBSVhGkciFDslKwcSIpKwjQORCh2SlYOJEUlYRoHIhQ7JSsHkqKSMI0DEYqdktUfG4KzdcXn9bsAAAAASUVORK5CYII="}});