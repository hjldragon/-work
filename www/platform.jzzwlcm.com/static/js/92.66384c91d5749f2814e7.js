webpackJsonp([92],{iDRn:function(t,e){},"l6+F":function(t,e){},rIsQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("6j3y"),i=s("6ROu"),n=s.n(i),l=s("EuEE"),r=s("a2vD"),c=s("Xtis"),o=s("6nXL"),_={components:{SlUpload:a.a},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-6048e5),t.$emit("pick",[s,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-2592e6),t.$emit("pick",[s,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-7776e6),t.$emit("pick",[s,e])}}]},agentid:r.a.getAgentid(),company_name:"",legal_person:"",legal_card:"",legal_card_photo:[s("V/59"),s("m4Q4")],business_num:"",business_date:null,business_photo:"",business_scope:"",legal_card_front:s("V/59"),legal_card_back:s("m4Q4"),card_front_name:"",card_back_name:"",business_photo_src:s("CVRw"),uploadText:"上传",ImageSize:2048,companyNameErr:!1,legalPersonErr:!1,legalCardErr:!1,businessNumErr:!1,cancelDialogVisible:!1,base_url:"./php"}},computed:{showBtn:function(){return!!(this.company_name&&this.legal_person&&this.legal_card&&this.card_front_name&&this.card_back_name&&this.business_num&&this.business_date&&this.business_photo&&this.business_scope)}},created:function(){this.getAgentinfo()},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$refs.adjustHeight;l.a.AdjustHeight(e)})},methods:{clearTip:function(){this.companyNameErr=!1,this.legalPersonErr=!1,this.legalCardErr=!1,this.businessNumErr=!1},getCardFront:function(t){this.card_front_name=t,this.legal_card_front="./php/img_get.php?img=1&imgname="+t},getCardBack:function(t){this.card_back_name=t,this.legal_card_back="./php/img_get.php?img=1&imgname="+t},getBussiness:function(t){this.business_photo=t,this.business_photo_src="./php/img_get.php?img=1&imgname="+t},checkCompanyName:function(){var t=this.company_name.trim(),e=l.a.checkName(t);return e||(this.companyNameErr=!0),e},checkLegalPerson:function(){var t=this.legal_person.trim(),e=l.a.checkName(t);return e||(this.legalPersonErr=!0),e},checkLegalCard:function(){var t=this.legal_card.trim(),e=l.a.checkCard(t);return e||(this.legalCardErr=!0),e},checkBusinessNum:function(){var t=this.business_num.trim(),e=l.a.checkNum(t);return e||(this.businessNumErr=!0),e},check:function(){var t=!1;return this.checkCompanyName()||(t=!0),this.checkLegalPerson()||(t=!0),this.checkLegalCard()||(t=!0),this.checkBusinessNum()||(t=!0),t},submit:function(){var t=this;if(!this.check()){var e={agent_business_save:1,agent_id:this.agentid,company_name:this.company_name,legal_person:this.legal_person,legal_card:this.legal_card,business_num:parseInt(this.business_num),business_photo:this.business_photo,business_scope:this.business_scope.trim()};l.a.isEmpty(this.business_date)||(e.business_date=this.business_date.map(function(t){return parseInt(n()(t).format("X"))}));var s=[];s.push(this.card_front_name),s.push(this.card_back_name),e.legal_card_photo=s,Object(c.f)(e).then(function(e){0===e.ret?(t.$slnotify({message:"提交成功",duration:1500}),setTimeout(function(){t.$router.push("/areaagent/agentinfo")},1500)):t.$slnotify({message:o.C.toString(e.ret),duration:1500})})}},getAgentinfo:function(){var t=this,e={agent_info:1,agent_id:this.agentid};Object(c.e)(e).then(function(e){if(0===e.ret){var s=e.data.agent_info,a=s.agent_business||{};if(s.business_status===o.b.NO)return;t.uploadText="更换",t.company_name=a.company_name,t.legal_person=a.legal_person,t.legal_card=a.legal_card,t.business_num=a.business_num,t.business_scope=a.business_scope,t.business_photo=a.business_photo,t.business_photo_src="./php/img_get.php?img=1&imgname="+t.business_photo,t.card_front_name=(a.legal_card_photo||[])[0],t.card_back_name=(a.legal_card_photo||[])[1],t.legal_card_front="./php/img_get.php?img=1&imgname="+t.card_front_name,t.legal_card_back="./php/img_get.php?img=1&imgname="+t.card_back_name;var i=n()(1e3*(a.business_date||[])[0]).toISOString(),l=n()(1e3*(a.business_date||[])[1]).toISOString();t.business_date=[i,l]}else t.$slnotify({message:o.C.toString(e.ret),duration:1500})})},openCancelDialog:function(){this.cancelDialogVisible=!0},hideCancelDialog:function(){this.cancelDialogVisible=!1},cancelEditor:function(){this.$router.push("/areaagent/agentinfo")}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"areaagent-cert-editor"}},[s("div",{staticClass:"breadcrumb"},[s("el-breadcrumb",{attrs:{separator:">"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/areaagent/agentinfo"}}},[t._v("代理商信息")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑工商信息")])],1)],1),t._v(" "),s("div",{staticClass:"baseinfo-content"},[t._m(0),t._v(" "),s("div",{staticClass:"editor-content"},[s("div",{staticClass:"item clearfix"},[t._m(1),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.companyNameErr},attrs:{placeholder:"请输入企业名称"},on:{blur:t.checkCompanyName},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.company_name,callback:function(e){t.company_name=e},expression:"company_name"}})],1),t._v(" "),t.companyNameErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入中文、字母或数字")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(2),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.legalPersonErr},attrs:{placeholder:"请输入法人代表"},on:{blur:t.checkLegalPerson},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.legal_person,callback:function(e){t.legal_person=e},expression:"legal_person"}})],1),t._v(" "),t.legalPersonErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入中文、字母或数字")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(3),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.legalCardErr},attrs:{placeholder:"请输入法人身份证号码"},on:{blur:t.checkLegalCard},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.legal_card,callback:function(e){t.legal_card=e},expression:"legal_card"}})],1),t._v(" "),t.legalCardErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入正确格式身份证号码")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix legal-card"},[t._m(4),t._v(" "),s("div",{staticClass:"item-right fl"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"legalcard-content fl"},[s("div",[t._v("正面")]),t._v(" "),s("div",{staticClass:"img-content"},[s("img",{attrs:{src:t.legal_card_front,alt:"card"}})]),t._v(" "),s("div",{staticClass:"upload-content"},[s("sl-upload",{attrs:{ImageSize:t.ImageSize,BtnText:t.uploadText,FreedomCrop:!0},on:{"send-image":t.getCardFront,"on-change":t.clearTip}})],1)]),t._v(" "),s("div",{staticClass:"legalcard-content fl"},[s("div",[t._v("反面")]),t._v(" "),s("div",{staticClass:"img-content"},[s("img",{attrs:{src:t.legal_card_back,alt:"card"}})]),t._v(" "),s("div",{staticClass:"upload-content"},[s("sl-upload",{attrs:{ImageSize:t.ImageSize,BtnText:t.uploadText,FreedomCrop:!0},on:{"send-image":t.getCardBack,"on-change":t.clearTip}})],1)])]),t._v(" "),s("div",{staticClass:"upload-tip"},[t._v("注：支持JPG、JPEG、PNG文件格式，每张大小不得大于2M")])])]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(5),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{class:{"border-redtip":t.businessNumErr},attrs:{placeholder:"请输入营业执照注册号"},on:{blur:t.checkBusinessNum},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.business_num,callback:function(e){t.business_num=e},expression:"business_num"}})],1),t._v(" "),t.businessNumErr?s("div",{staticClass:"errtip fl"},[s("span",[t._v("请输入正确格式营业执照注册号")])]):t._e()]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(6),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-date-picker",{attrs:{"unlink-panels":"",editable:!1,type:"daterange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.clearTip},model:{value:t.business_date,callback:function(e){t.business_date=e},expression:"business_date"}})],1)]),t._v(" "),s("div",{staticClass:"item clearfix business-photo"},[t._m(7),t._v(" "),s("div",{staticClass:"item-right fl"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl img-content"},[s("img",{attrs:{src:t.business_photo_src,alt:"photo"}})]),t._v(" "),s("div",{staticClass:"fl"},[s("sl-upload",{attrs:{ImageSize:t.ImageSize,BtnText:t.uploadText,FreedomCrop:!0},on:{"send-image":t.getBussiness,"on-change":t.clearTip}}),t._v(" "),s("p",{staticClass:"upload-tip"},[t._v("注：支持JPG、JPEG、PNG文件格式，大小不得大于2M")])],1)])])]),t._v(" "),s("div",{staticClass:"item clearfix"},[t._m(8),t._v(" "),s("div",{staticClass:"item-right fl"},[s("el-input",{attrs:{placeholder:"请输入经营范围"},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.business_scope,callback:function(e){t.business_scope=e},expression:"business_scope"}})],1)]),t._v(" "),s("div",{ref:"adjustHeight"}),t._v(" "),s("div",{staticClass:"btn-group"},[t.showBtn?s("div",{staticClass:"create",on:{click:t.submit}},[t._v("提交审核")]):s("div",{staticClass:"create-disabled"},[t._v("提交审核")]),t._v(" "),s("div",{staticClass:"cancel",on:{click:t.openCancelDialog}},[t._v("取消")])])])]),t._v(" "),s("el-dialog",{staticClass:"nopadding cancel-dialog",attrs:{visible:t.cancelDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.cancelDialogVisible=e}}},[s("div",{staticClass:"cancel-content"},[s("span",[t._v("将放弃填写内容，确定取消本次编辑？")])]),t._v(" "),s("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"btn-Dialogok",on:{click:t.cancelEditor}},[t._v("确认")]),t._v(" "),s("div",{staticClass:"btn-Dialogcancel",on:{click:t.hideCancelDialog}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title clearfix"},[e("span",[this._v("工商信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("企业名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("法人代表")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("法人身份证号码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("法人身份证照片")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("营业执照注册号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("营业期限")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("营业执照扫描件")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("经营范围")])])}]};var d=s("C7Lr")(_,u,!1,function(t){s("iDRn"),s("l6+F")},"data-v-4db3f8c6",null);e.default=d.exports}});