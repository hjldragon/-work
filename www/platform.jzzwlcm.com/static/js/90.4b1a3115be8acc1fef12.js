webpackJsonp([90],{SCD4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("6ROu"),a=i.n(n),s=i("Fzxs"),o=i("CW5y"),l=i("EuEE"),r=i("6nXL"),c=i("lbRB"),g={components:{EmptyTable:s.a},props:{agentinfo:{type:Object}},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}}]},serviceOptions:[{label:"全部",value:0},{label:r.e.toString(r.e.NO),value:r.e.NO},{label:r.e.toString(r.e.YES),value:r.e.YES},{label:r.e.toString(r.e.TIMEOUT),value:r.e.TIMEOUT}],serviceSelect:0,creatTime:null,list:[],emptyType:1,agent_id:"",shop_id:"",agent_type:1,total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,changeAgentDialogVisible:!1,changeAgentOption:[],selectAgent:"",sucChangeAgentDialog:!1,AgentServiceStatus:r.e,businessType:r.A}},computed:{showAgentSend:function(){return!!this.selectAgent},isListEmpty:function(){return 0===this.list.length}},created:function(){this.agent_id=this.$route.query.agentid||"",this.listQuery.limit=o.a.get(this.$route),this.getList()},watch:{agentinfo:{handler:function(){this.init()},deep:!0}},methods:{init:function(){this.agent_type=this.agentinfo.agent_type,this.getList()},search:function(){this.emptyType=2,this.listQuery.page=1,this.getList()},getList:function(){var t=this,e={get_shop_list:1,agent_id:this.agent_id,page_size:this.listQuery.limit,page_no:this.listQuery.page};if(!l.a.isEmpty(this.creatTime)){var i=this.creatTime[0],n=this.creatTime[1];e.begin_time=parseInt(a()(i).format("X")),e.end_time=parseInt(a()(n).format("X"))+86400}this.isSort&&(e.sort_name=this.sortLabel,e.desc=this.sortOrder),Object(c.g)(e).then(function(e){0===e.ret&&(t.list=e.data.list||[],t.total=e.data.total,t.list=t.list.map(function(t){return t.ctime&&(t.ctime=a()(1e3*t.ctime).format("YYYY.MM.DD")),t.shop_model?t.shop_model_str=r.A.toString(t.shop_model):t.shop_model_str="--",t}))})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList(),o.a.set(this.$route,t)},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},openChangeDialog:function(t){var e=this;this.shop_id=t,this.changeAgentDialogVisible=!0;var i={get_agent_list:1,agent_type:this.agent_type};Object(c.c)(i).then(function(t){0===t.ret&&(e.changeAgentOption=t.data.agent_list)})},hideChangeDialog:function(){this.changeAgentDialogVisible=!1},closeHandler:function(){this.shop_id="",this.selectAgent=""},changeSend:function(){var t=this,e={shop_change_agent:1,shop_id:this.shop_id,agent_id:this.selectAgent};Object(c.h)(e).then(function(e){0===e.ret?(t.getList(),t.hideChangeDialog(),setTimeout(function(){t.opentipDialog()},500)):t.$slnotify({message:r.C.toString(e.ret),duration:1500})})},opentipDialog:function(){this.sucChangeAgentDialog=!0},hidetipDialog:function(){this.sucChangeAgentDialog=!1},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"agent-shop-table"}},[n("div",{staticClass:"search-content clearfix"},[t._m(0),t._v(" "),n("div",{staticClass:"search-item fl"},[n("el-date-picker",{attrs:{"unlink-panels":"",editable:!1,type:"daterange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.creatTime,callback:function(e){t.creatTime=e},expression:"creatTime"}})],1),t._v(" "),n("div",{staticClass:"search-btn fl",on:{click:t.search}},[t._v("搜索")])]),t._v(" "),n("div",{staticClass:"table-content change-default"},[n("el-table",{ref:"shoptable",attrs:{data:t.list,stripe:""},on:{"sort-change":t.sort}},[n("el-table-column",{attrs:{prop:"ctime",label:"创建时间","min-width":"80",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"adjust-center"},[t._v(t._s(e.row.ctime))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"shop_name",label:"商户店铺","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.shop_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"店铺账号","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.phone))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"telephone",label:"联系电话","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.telephone))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"shop_model",label:"营业模式","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.shop_model_str))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"form",label:"来源","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.from))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"opearte",label:"操作","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"change-agent-btn",on:{click:function(i){t.openChangeDialog(e.row.shop_id)}}},[t._v("变更代理")])]}}])})],1),t._v(" "),t.isListEmpty?n("empty-table",{attrs:{type:t.emptyType,isSmall:!0}}):t._e()],1),t._v(" "),n("div",{staticClass:"pagination-content change-pagination-default"},[n("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),n("el-dialog",{staticClass:"nopadding change-agent",attrs:{visible:t.changeAgentDialogVisible,width:"600px",top:"35vh",center:""},on:{close:t.closeHandler,"update:visible":function(e){t.changeAgentDialogVisible=e}}},[n("div",{staticClass:"change-content"},[n("div",{staticClass:"title"},[t._v("变更代理商")]),t._v(" "),n("div",{staticClass:"select"},[n("el-select",{attrs:{placeholder:"请选择代理商"},model:{value:t.selectAgent,callback:function(e){t.selectAgent=e},expression:"selectAgent"}},t._l(t.changeAgentOption,function(t){return n("el-option",{key:t.agent_id,attrs:{label:t.agent_name,value:t.agent_id}})}))],1)]),t._v(" "),n("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[t.showAgentSend?n("div",{staticClass:"btn-Dialogok",on:{click:t.changeSend}},[t._v("确认")]):n("div",{staticClass:"btn-disabled"},[t._v("确认")]),t._v(" "),n("div",{staticClass:"btn-Dialogcancel",on:{click:t.hideChangeDialog}},[t._v("取消")])])]),t._v(" "),n("el-dialog",{staticClass:"nopadding change-tip-dialog",attrs:{visible:t.sucChangeAgentDialog,width:"500px",top:"35vh",center:""},on:{"update:visible":function(e){t.sucChangeAgentDialog=e}}},[n("div",{staticClass:"change-tip-content"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:i("qrEq"),alt:""}})]),t._v(" "),n("div",{staticClass:"text"},[n("span",[t._v("变更成功!")])])]),t._v(" "),n("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"btn-tip",on:{click:t.hidetipDialog}},[t._v("知道了")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lable fl"},[e("span",[this._v("创建时间")])])}]};var p=i("C7Lr")(g,h,!1,function(t){i("okQ5"),i("t+qn")},"data-v-5a705f9c",null);e.default=p.exports},okQ5:function(t,e){},"t+qn":function(t,e){}});