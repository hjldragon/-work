webpackJsonp([100],{TiHC:function(t,e){},kvNo:function(t,e){},vfcx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("6ROu"),a=i.n(s),n=i("5aCZ"),l=i("6nXL"),c=i("a2vD"),r=i("monS"),o={components:{Tinymce:n.a},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},articleTypeOption:[{label:l.i.toString(l.i.COMPANY),value:l.i.COMPANY}],articleType:"",articleTitle:"",articleContent:"",msgSengTime:"",sengTimeDialog:!1,articleid:""}},computed:{isShowBtn:function(){return!!(this.articleType&&this.articleTitle&&this.articleContent&&'<p><br data-mce-bogus="1"></p>'!==this.articleContent&&0!==this.articleTitle.replace(/(^\s*)|(\s*$)/,"").length)}},created:function(){this.articleid=this.$route.query.articleid||"",this.articleid&&this.getarticle()},methods:{getarticle:function(){var t=this,e={get_article_info:1,article_id:this.articleid};Object(r.a)(e).then(function(e){if(0===e.ret){var i=e.data.info;t.articleType=i.article_type,t.articleTitle=i.title,t.articleContent=i.content}else t.$slnotify({message:l.C.toString(e.ret),duration:1500})})},openSengTimeDialog:function(){this.sengTimeDialog=!0},hideSengTimeDialog:function(){this.sengTimeDialog=!1},closeHandler:function(){this.msgSengTime=""},send:function(t){var e=this;if(!t||this.msgSengTime){var i={article_save:1,article_type:this.articleType,title:this.articleTitle.trim(),content:this.articleContent};i.platformer_id=c.a.getPlatformerid(),this.articleid&&(i.article_id=this.articleid),this.checkData()||(this.msgSengTime&&(i.send_time=parseInt(a()(this.msgSengTime).format("X"))),Object(r.b)(i).then(function(t){0===t.ret?(e.$slnotify({message:"发布成功",duration:1500}),setTimeout(function(){e.$router.push("/message/article")},1500)):e.$slnotify({message:l.C.toString(t.ret),duration:1500})}))}else this.$slnotify({message:"请选择发送时间！"})},cancel:function(){this.$router.push("/message/article")},checkData:function(){var t=!1;this.msgSengTime&&(parseInt(a()(this.msgSengTime).format("x"))<Date.now()&&(t=!0,this.$slnotify({message:"设定的时间已经过期",duration:1500})));return t}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"editore-article"}},[i("div",{staticClass:"breadcrumb"},[i("el-breadcrumb",{attrs:{separator:">"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/message/article"}}},[t._v("官网文章")]),t._v(" "),i("el-breadcrumb-item",[t._v("编辑官网文章")])],1)],1),t._v(" "),i("div",{staticClass:"title clearfix"},[i("span",[t._v("编辑官网文章")]),t._v(" "),i("div",{staticClass:"btn-group fr"},[t.isShowBtn?t._e():i("div",{staticClass:"send-gray-btn"},[t._v("发布")]),t._v(" "),t.isShowBtn?t._e():i("div",{staticClass:"send-time-gray-btn"},[t._v("定时发布")]),t._v(" "),t.isShowBtn?i("div",{staticClass:"send-btn",on:{click:function(e){t.send(!1)}}},[t._v("发布")]):t._e(),t._v(" "),t.isShowBtn?i("div",{staticClass:"send-time-btn",on:{click:t.openSengTimeDialog}},[t._v("定时发布")]):t._e(),t._v(" "),i("div",{staticClass:"cancel-btn",on:{click:t.cancel}},[t._v("取消")])])]),t._v(" "),i("div",{staticClass:"editor-content"},[i("div",{staticClass:"editor-item article-type"},[t._m(0),t._v(" "),i("div",{staticClass:"item-right"},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.articleType,callback:function(e){t.articleType=e},expression:"articleType"}},t._l(t.articleTypeOption,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),i("div",{staticClass:"editor-item article-title"},[t._m(1),t._v(" "),i("div",{staticClass:"item-right"},[i("el-input",{model:{value:t.articleTitle,callback:function(e){t.articleTitle=e},expression:"articleTitle"}})],1)]),t._v(" "),i("div",{staticClass:"editor-item article-content"},[t._m(2),t._v(" "),i("div",{staticClass:"item-right"},[i("tinymce",{ref:"editor",attrs:{height:400},model:{value:t.articleContent,callback:function(e){t.articleContent=e},expression:"articleContent"}})],1)])]),t._v(" "),i("el-dialog",{staticClass:"nopadding operate-dialog",attrs:{visible:t.sengTimeDialog,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.sengTimeDialog=e},close:t.closeHandler}},[i("div",{staticClass:"operate-content"},[i("div",{staticClass:"sent-title"},[t._v("定时发布")]),t._v(" "),i("div",{staticClass:"select-time"},[i("span",[t._v("发布时间")]),t._v(" "),i("el-date-picker",{attrs:{type:"datetime","picker-options":t.pickerOptions,placeholder:"选择日期时间"},model:{value:t.msgSengTime,callback:function(e){t.msgSengTime=e},expression:"msgSengTime"}})],1)]),t._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok",on:{click:function(e){t.send(!0)}}},[t._v("确定")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel",on:{click:t.hideSengTimeDialog}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left"},[e("span",{staticClass:"sl-must"},[this._v("文章类型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left"},[e("span",{staticClass:"sl-must"},[this._v("文章标题")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left"},[e("span",{staticClass:"sl-must"},[this._v("文章正文")])])}]};var v=i("C7Lr")(o,d,!1,function(t){i("TiHC"),i("kvNo")},"data-v-293be8c7",null);e.default=v.exports}});