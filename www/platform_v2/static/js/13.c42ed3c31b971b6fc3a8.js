webpackJsonp([13,63,65,109],{"5Kqy":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),i=a.n(s),n=a("4YfN"),l=a.n(n),r=a("9rMa"),o=a("6nXL"),c=a("P9l9"),u=a("a2vD"),_=a("6ROu"),f=a.n(_),d={data:function(){return{width:"300px",state1:null,employee_list:[],agentid:u.a.getAgentid(),statusOption:[{label:o.a.toString(o.a.NO),value:o.a.NO},{label:o.a.toString(o.a.DURING),value:o.a.DURING},{label:o.a.toString(o.a.FAIL),value:o.a.FAIL}],fromOption:[],levelOption:[{label:"全部",value:""},{label:o.c.toString(o.c.FIRST),value:o.c.FIRST},{label:o.c.toString(o.c.SECOND),value:o.c.SECOND},{label:o.c.toString(o.c.THREE),value:o.c.THREE}],agentClassOption:[{label:"全部",value:""},{label:o.d.toString(o.d.AREA),value:o.d.AREA},{label:o.d.toString(o.d.INDUSTRY),value:o.d.INDUSTRY}],employeeOptions:[],searchMain:{business_status:o.a.DURING,agent_name:"",agent_id:"",from:null,employee_name:null,date:"",begin_time:"",end_time:"",agent_level:null,agent_type:null}}},props:["from_route"],created:function(){this.getEmployeeOption(),this.getFromList();var e=this.pageSearchState[this.$route.path];/\/officialmanage\/certifipage|\/officialmanage\/certiResult|\/officialmanage\/certiApply/gi.test(this.from_route)||e&&(e.business_status=o.a.DURING),e&&(this.searchMain.business_status=e.business_status),this.search()},computed:l()({},Object(r.d)({pageSearchState:function(e){return e.app.pageSearchState}})),watch:{"searchMain.date":function(e){return e?(this.searchMain.begin_time=parseInt(f()(e[0]).format("X")),this.searchMain.end_time=parseInt(f()(e[1]).format("X"))+86400):(this.searchMain.begin_time="",this.searchMain.end_time=""),e}},methods:l()({},Object(r.c)(["PAGE_SEARCH_STATE"]),{search:function(){var e=i()({},this.searchMain);this.PAGE_SEARCH_STATE({key:this.$route.path,value:e}),this.$emit("search",e)},getEmployeeOption:function(){var e=this;Object(c.Y)({get_pl_salesman_list:1}).then(function(t){0===t.ret?e.employeeOptions=t.data.list:e.$slnotify({message:o.N.toString(t.ret)})})},getFromList:function(){var e=this;Object(c.D)({get_from_list:1,only_from:1}).then(function(t){0===t.ret?e.fromOption=t.data.list:e.$slnotify({message:o.N.toString(t.ret)})})}})},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-content clearfix search-content-width-fix"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"name fl clearfix search-item"},[e._m(0),e._v(" "),a("div",{staticClass:"fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchMain.agent_level,callback:function(t){e.$set(e.searchMain,"agent_level",t)},expression:"searchMain.agent_level"}},e._l(e.levelOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[e._m(1),e._v(" "),a("div",{staticClass:"fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchMain.agent_type,callback:function(t){e.$set(e.searchMain,"agent_type",t)},expression:"searchMain.agent_type"}},e._l(e.agentClassOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[e._m(2),e._v(" "),a("div",{staticClass:"fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchMain.from,callback:function(t){e.$set(e.searchMain,"from",t)},expression:"searchMain.from"}},[a("el-option",{key:"全部",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.fromOption,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})],2)],1)]),e._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[e._m(3),e._v(" "),a("div",{staticClass:"fl"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchMain.date,callback:function(t){e.$set(e.searchMain,"date",t)},expression:"searchMain.date"}})],1)])]),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"name fl clearfix search-item"},[e._m(4),e._v(" "),a("div",{staticClass:"fl"},[a("el-input",{attrs:{placeholder:"代理商名称"},model:{value:e.searchMain.agent_name,callback:function(t){e.$set(e.searchMain,"agent_name",t)},expression:"searchMain.agent_name"}})],1)]),e._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[e._m(5),e._v(" "),a("div",{staticClass:"fl"},[a("el-input",{attrs:{placeholder:"代理商ID"},model:{value:e.searchMain.agent_id,callback:function(t){e.$set(e.searchMain,"agent_id",t)},expression:"searchMain.agent_id"}})],1)]),e._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[e._m(6),e._v(" "),a("div",{staticClass:"fl"},[a("el-select",{attrs:{placeholder:"全部"},model:{value:e.searchMain.employee_name,callback:function(t){e.$set(e.searchMain,"employee_name",t)},expression:"searchMain.employee_name"}},[a("el-option",{key:"全部",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.employeeOptions,function(e){return a("el-option",{key:e.pl_name,attrs:{label:e.pl_name,value:e.pl_name}})})],2)],1)]),e._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[e._m(7),e._v(" "),a("div",{staticClass:"fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchMain.business_status,callback:function(t){e.$set(e.searchMain,"business_status",t)},expression:"searchMain.business_status"}},e._l(e.statusOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticClass:"name fl clearfix search-item"},[a("div",{staticClass:"fr search-btn-box"},[a("div",{staticClass:"search-btn of-btn-bd-search fl",on:{click:e.search}},[e._v("搜索")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("代理商级别")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text agnet-name"},[this._v("代理商类型")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("代理商来源")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("新增时间:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text agnet-name"},[this._v("代理商名称:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("ID:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("销售人员:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("span",{staticClass:"label-text"},[this._v("状态:")])])}]};var m=a("C7Lr")(d,p,!1,function(e){a("d5vp")},"data-v-471be499",null);t.default=m.exports},CzTJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),i=a.n(s),n=a("4YfN"),l=a.n(n),r=a("r2UX"),o=(a("EuEE"),a("6nXL")),c=a("a2vD"),u=a("9rMa"),_={components:{EmptyTable:r.a},data:function(){return{AgentBusinessStatus:o.a,auditPlan:c.a.getAuditPer(),isAdmin:c.a.getIsAdmin(),wxDialogShow:!1,certiTitle:"",certifiObj:null}},props:{list:{type:[Array,Object],default:function(){return[]}},emptyType:{type:[Number],default:1},businessStatus:{type:[Number,Array]}},computed:l()({isListEmpty:function(){return 0===this.list.length},waitCertifi:function(){return this.businessStatus==o.a.DURING},noCertifi:function(){return this.businessStatus==o.a.NO},errCertifi:function(){return this.businessStatus==o.a.FAIL}},Object(u.d)({ACS:function(e){return e.perimission.sysPermis},PL_K:function(e){return e.perimission.PL_K}})),methods:{certifi:function(e){if(!this.ACS[this.PL_K.AGENT_AUDIT])return this.$slnotify({message:"操作权限不足"});var t=i()({},e);this.$emit("certifi",t)},certifiPro:function(e,t){if(1==t&&!this.ACS[this.PL_K.PL_AGENT_AUDIT_SEE])return this.$slnotify({message:"操作权限不足"});var a=i()({},e);this.$emit("certifiPro",a,t)},certifiPush:function(e){if(!this.ACS[this.PL_K.PL_SAVE_BS])return this.$slnotify({message:"操作权限不足"});var t=i()({},e);this.$emit("certifiPush",t)},certifiApply:function(e){if(!this.ACS[this.PL_K.APPLY_CER])return this.$slnotify({message:"操作权限不足"});var t=i()({},e);this.$emit("certifiApply",t)},handlerOnKey:function(e){this.wxDialogShow=!0,this.certiTitle=e.agent_name,this.certifiObj=i()({},e)},onKeyCerti:function(e){this.wxDialogShow=!1,this.$emit("onKeyCerti",this.certifiObj)},sort:function(e){this.$emit("sort",e)},clearClose:function(){this.wxDialogShow=!1,this.certifiObj={}}},mounted:function(){this.$refs.merchantAuthenticationTable.$refs.bodyWrapper.style.minHeight="460px"}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"certi-table-id"},[a("el-table",{ref:"merchantAuthenticationTable",attrs:{data:e.list,stripe:"","default-sort":{prop:"ctime",order:"descending"}},on:{"sort-change":e.sort}},[a("el-table-column",{attrs:{type:"index",sortable:"",label:"序号",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"ctime",label:"新增时间","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatTimeD")(t.row.ctime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"agent_id",label:"ID","min-width":"50",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.agent_id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"agent_type",label:"类型","min-width":"50",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("agentType")(t.row.agent_type)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"agent_level",label:"级别","min-width":"50",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("agentLevel")(t.row.agent_level)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shop_name",label:"代理商名称","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.agent_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.agent_province+t.row.agent_city+t.row.agent_area+t.row.address||"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"from_salesman",label:"销售人员","min-width":"50",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.real_name||"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"from",label:"来源","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.from||"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"business_status",label:"认证状态",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{"err-status":t.row.business_status==e.AgentBusinessStatus.FAIL}},[e._v(e._s(e._f("shopState")(t.row.business_status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作","min-width":"130",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.waitCertifi?a("span",[e.isAdmin?e._e():a("span",[e.auditPlan==t.row.audit_plan&&null!==t.row.audit_plan?a("span",{staticClass:"examine-btn btn-oprate-blue",on:{click:function(a){e.certifi(t.row)}}},[e._v("审核")]):a("span",{staticClass:"examine-btn btn-oprate-gray"},[e._v("审核")]),e._v(" "),a("span",{staticClass:"examine-btn btn-oprate-green certi-btn-big",on:{click:function(a){e.certifiPro(t.row,1)}}},[e._v("审核进度")])]),e._v(" "),e.isAdmin?a("span",[a("span",{staticClass:"btn-oprate-blue certi-btn-big",on:{click:function(a){e.handlerOnKey(t.row)}}},[e._v("一键审核")])]):e._e()]):e._e(),e._v(" "),e.errCertifi?a("span",[a("span",{staticClass:"examine-btn btn-oprate-blue certi-btn-big",on:{click:function(a){e.certifiPush(t.row)}}},[e._v("补充资料")]),e._v(" "),a("span",{staticClass:"examine-btn btn-oprate-green certi-btn-big",on:{click:function(a){e.certifiPro(t.row,2)}}},[e._v("审核结果")])]):e._e(),e._v(" "),e.noCertifi?a("span",[a("span",{staticClass:"examine-btn btn-oprate-green certi-btn-big",on:{click:function(a){e.certifiApply(t.row)}}},[e._v("申请认证")])]):e._e()]}}])})],1),e._v(" "),e.isListEmpty?a("empty-table",{attrs:{type:e.emptyType}}):e._e(),e._v(" "),a("el-dialog",{attrs:{visible:e.wxDialogShow,top:"35vh",width:"520px"},on:{"update:visible":function(t){e.wxDialogShow=t},close:e.clearClose}},[a("div",[a("div",{staticClass:"head-nav"},[a("span",[e._v("代理商一键审核")])]),e._v(" "),a("div",{staticClass:"dialog-main-c"},[e._v("\n\n        确定一键通过审核 代理商: "+e._s(e.certiTitle)+"?\n      ")]),e._v(" "),a("div",{staticClass:"foot-btn-box"},[a("div",{staticClass:"btn of-btn-bd-m-blue",on:{click:e.clearClose}},[e._v("取消")]),e._v(" "),a("div",{staticClass:"btn save-s-gradient",on:{click:e.onKeyCerti}},[e._v("确定")])])])])],1)},staticRenderFns:[]};var d=a("C7Lr")(_,f,!1,function(e){a("NI4E"),a("ac6B")},"data-v-5968857a",null);t.default=d.exports},NI4E:function(e,t){},OIKV:function(e,t){},ac6B:function(e,t){},d5vp:function(e,t){},"j/Ov":function(e,t){},"kq/+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("ZLEe"),i=a.n(s),n=a("aA9S"),l=a.n(n),r=a("4YfN"),o=a.n(r),c=a("6nXL"),u=a("EU70"),_=a("GAg9"),f=a("Q0Ca"),d=a("P9l9"),p=a("a2vD"),m=a("9rMa"),v=1,h=2,g=3,b=4,y=5,C={components:{PreviewImg:u.a,ImgUpload:_.a},data:function(){return{inputTipMsg:"请输入(20字以内)",maxlength:20,userid:p.a.getUserid(),agent_id:null,base_url:"./php",audit_plan:1,stepsTitle:["销售审核","销售经理审核","运营审核","运营经理审核","财务审核","财务经理审核"],certificationData:{businessName:{label:"企业名称:",name:"--",state:null,note:"",save:0,type:v},legalPerson:{label:"法人代表：",name:"--",state:null,note:"",save:0,type:v},legalPersonId:{label:"法人身份证号:",name:"--",state:null,note:"",save:0,type:v},legalPersonImg:{label:"法人身份证照片:",name:"--",state:null,note:"",type:h,save:0,idFrontalImg:"",idReverseImg:""},businessId:{label:"营业执照注册号:",name:"--",state:null,note:"",save:0,type:v},businessDate:{label:"营业期限:",name:"--",state:null,note:"",save:0,type:v},businessImg:{label:"营业执照扫描件:",name:"--",state:null,note:"",type:g,save:0,imgSrc:""},operateRange:{label:"经营范围:",name:"--",state:null,note:"",save:0,type:v},businessSever:{label:"代理费:",name:"",state:"无",number:"",type:b},isSever:{type:y,label:"代理费",name:"",state:"无"}},certifiBaseInfo:{ctime:{label:"创建时间:",name:"--"},from:{label:"来源:",name:"--"},agentType:{label:"代理商类型:",name:"--"},employee_name:{label:"销售人员:",name:"--"},agent_name:{label:"代理商名称:",name:"--"},contacts:{label:"联系人:",name:"--"},level:{label:"级别:",name:"--"},contactsPhone:{label:"联系电话:",name:"--"},loginId:{label:"登录账号:",name:"--"},email:{label:"邮箱:",name:"--"},address:{label:"地址:",name:"--"}},certifiRecord:[]}},filters:{person_name:function(e){return c.H.toString(e)}},created:function(){this.agent_id=this.$route.query.agent_id,this.getCertiPage()},beforeRouteEnter:function(e,t,a){a(function(e){e.SET_SELECTMENU({selectMenu:"/official/agentmanage/certificate"})})},beforeRouteLeave:function(e,t,a){this.SET_SELECTMENU({selectMenu:""}),a()},methods:o()({},Object(m.c)(["SET_SELECTMENU"]),{allAgree_m:function(e){var t=this.certificationData;for(var a in t)e?(t[a].state=1,t[a].note=""):t[a].state=0;this.complete()},agree:function(e){e.state=1,e.save=0,e.note=""},noAgree:function(e){e.state=0,1==e.save&&(e.save=0)},saveInput:function(e){e.save=1},editSave:function(e){e.save=0},getPhoto:function(e){this.certificationData.businessSever.name=e},validateData:function(){var e=this.certificationData;for(var t in e){if(null===e[t].state)return this.$slnotify({message:e[t].label+"未选择通过或不通过",duration:1500}),!1;if(0===e[t].state&&(0===e[t].save||""==e[t].note)&&"businessSever"!=t&&"isSever"!=t)return this.$slnotify({message:"请填写并保存"+e[t].label+"不通过理由",duration:1500}),!1}return 5==this.audit_plan&&1==e.businessSever.state&&""==e.businessSever.number?(this.$slnotify({message:"请输入代理费水单号",duration:1500}),!1):5==this.audit_plan&&1==e.businessSever.state&&e.businessSever.number.indexOf(" ")>=0?(this.$slnotify({message:"请输入正确代理费水单号",duration:1500}),!1):5!=this.audit_plan||1!=e.businessSever.state||""!=e.businessSever.name||(this.$slnotify({message:"请上传代理费水单图片",duration:1500}),!1)},getCertiPage:function(){var e=this,t={business_info:1,agent_id:this.agent_id,platform:1};Object(d.t)(t).then(function(t){0===t.ret?e.handleData(t.data.business_info):e.$slnotify({message:c.N.toString(t.ret),duration:1500})});var a={agent_info:1,agent_id:this.agent_id};Object(d.n)(a).then(function(t){0===t.ret&&e.handleBaseInfo(t.data.agent_info)});var s={get_audit_list:1,agent_id:this.agent_id,platform:1};Object(d.r)(s).then(function(t){0===t.ret&&(e.certifiRecord=t.data.audit_list)})},submitCertifi:function(e){var t=this,a={save_business_status:1,agent_id:this.agent_id,userid:this.userid};a=l()({},a,e),Object(d.s)(a).then(function(e){0===e.ret?(t.$slnotify({message:"提交成功",duration:1500}),setTimeout(function(){t.closePage()},1500)):t.$slnotify({message:c.N.toString(e.ret),duration:1500})})},handleBaseInfo:function(e){if(0!=i()(e).length){var t=this.certifiBaseInfo,a=e;t.ctime.name=Object(f.formatTimeS)(a.ctime),t.agent_name.name=a.agent_name||"--",t.employee_name.name=a.real_name||"--",t.address.name=a.agent_province+a.agent_city+a.agent_area+a.address,t.from.name=a.from,t.email.name=a.email||"--",t.contactsPhone.name=a.telephone||"--",t.loginId.name=a.phone||"--",t.contacts.name=a.relation_name||"--",t.level.name=c.c.toString(a.agent_level),t.agentType.name=c.d.toString(a.agent_type),this.audit_plan=a.audit_plan}},handleData:function(e){if(0!=i()(e).length){var t=this.certificationData,a=e;t.businessName.name=a.agent_name||"--",t.legalPerson.name=a.legal_person||"--",t.legalPersonId.name=a.legal_card||"--",t.legalPersonImg.idFrontalImg=a.legal_card_photo&&a.legal_card_photo[0],t.legalPersonImg.idReverseImg=a.legal_card_photo&&a.legal_card_photo[1],t.businessId.name=a.business_num||"--",t.businessDate.name=a.business_date?Object(f.formatTimeD)(a.business_date[0])+"至"+Object(f.formatTimeD)(a.business_date[1]):"--",t.businessImg.name=a.business_photo,t.operateRange.name=a.business_scope||"--"}},complete:function(){if(this.validateData()){var e={},t=this.certificationData;return e.agent_name_status=t.businessName.state,e.agent_name_reason=t.businessName.note,e.legal_person_status=t.legalPerson.state,e.legal_person_reason=t.legalPerson.note,e.legal_card_status=t.legalPersonId.state,e.legal_card_reason=t.legalPersonId.note,e.legal_card_photo_status=t.legalPersonImg.state,e.legal_card_photo_reason=t.legalPersonImg.note,e.business_num_status=t.businessId.state,e.business_num_reason=t.businessId.note,e.business_date_status=t.businessDate.state,e.business_date_reason=t.businessDate.note,e.business_photo_status=t.businessImg.state,e.business_photo_reason=t.businessImg.note,e.business_scope_status=t.operateRange.state,e.business_scope_reason=t.operateRange.note,5==this.audit_plan&&1==t.businessSever.state&&(e.business_sever_money=t.businessSever.name,e.water_num=t.businessSever.number),this.submitCertifi(e),e}return!1},closePage:function(){this.$router.push("/official/agentmanage/certificate")},goCertiList:function(){this.$router.push("/official/agentmanage/certificate")}})},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"certification-page",attrs:{id:"certification-page"}},[a("div",{staticClass:"nav-own-bar"},[a("span",{staticClass:"cant-click-nav"},[e._v("代理商管理")]),e._v("\n    >\n    "),a("span",{staticClass:"can-click-nav",on:{click:e.goCertiList}},[e._v("代理商认证")]),e._v("\n    >\n    "),a("span",{staticClass:"current-nav"},[e._v("审核")])]),e._v(" "),a("div",{staticClass:"steps-box"},[a("el-steps",{attrs:{active:e.audit_plan,"finish-status":"success","align-center":""}},e._l(e.stepsTitle,function(e){return a("el-step",{key:e,attrs:{title:e}},[a("span",{staticClass:"step-icon",attrs:{slot:"icon"},slot:"icon"})])}))],1),e._v(" "),a("div",{staticClass:"certification-data-box"},[a("div",{staticClass:"change-titlerr"},[e._v("代理商认证资料")]),e._v(" "),a("div",{staticClass:"certi-data-main"},e._l(e.certificationData,function(t,s){return a("div",{key:s,staticClass:"certi-data-item clearfix"},[4!=t.type&&5!==t.type?a("div",{staticClass:"fl"},[a("span",[e._v(e._s(t.label))]),e._v(" "),1==t.type?a("span",{staticClass:"baseInfo-height"},[e._v(e._s(t.name))]):e._e(),e._v(" "),2==t.type?a("div",[a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.idFrontalImg}}),e._v(" "),a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.idReverseImg}})],1):e._e(),e._v(" "),3==t.type?a("div",[a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.name}})],1):e._e()]):e._e(),e._v(" "),4==t.type&&5==e.audit_plan?a("div",[a("span",[e._v(e._s(t.label))]),e._v("    \n          "),a("el-radio-group",{model:{value:t.state,callback:function(a){e.$set(t,"state",a)},expression:"item.state"}},[a("el-radio",{attrs:{label:1}},[e._v("已收")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("未收")])],1),e._v(" "),1==t.state?a("el-input",{attrs:{placeholder:"请输入流水单号"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}}):e._e(),e._v(" "),1==t.state?a("div",{staticClass:"certi-upload"},[a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.name}}),e._v(" "),a("img-upload",{on:{"send-image":e.getPhoto}}),e._v(" "),a("div",{staticClass:"certi-notes notes-bott"},[e._v("注：支持JPG、JPEG、PNG文件格式")])],1):e._e()],1):e._e(),e._v(" "),5==t.type&&6==e.audit_plan?a("div",[a("span",[e._v(e._s(t.label))]),e._v("\n              已收\n        ")]):e._e(),e._v(" "),4!=t.type&&5!=t.type?a("div",{staticClass:"fr"},[a("span",{staticClass:"certification-btn sl-btn-bd-m-blue",class:{succ:1===t.state},on:{click:function(a){e.agree(t)}}},[e._v("通过")]),e._v(" "),a("span",{staticClass:"certification-btn sl-btn-bd-m-blue no-agree",class:{error:0===t.state},on:{click:function(a){e.noAgree(t)}}},[e._v("不通过")]),e._v(" "),a("div",{staticClass:"save-box"},[0===t.state?a("div",[0==t.save?a("span",[a("el-input",{staticClass:"certifi-note-input",attrs:{maxlength:e.maxlength,placeholder:e.inputTipMsg},model:{value:t.note,callback:function(a){e.$set(t,"note",a)},expression:"item.note"}}),e._v(" "),a("span",{staticClass:"certification-btn-small sl-btn-bd-s-blue",on:{click:function(a){e.saveInput(t)}}},[e._v("保存")])],1):e._e(),e._v(" "),1==t.save&&t.note?a("span",{on:{click:function(a){e.editSave(t)}}},[e._v("("+e._s(t.note)+")")]):e._e()]):e._e()])]):e._e()])})),e._v(" "),a("div",{staticClass:"certification-btn-foot"},[a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:function(t){e.allAgree_m(!0)}}},[e._v("全部通过")]),e._v(" "),a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:function(t){e.allAgree_m(!1)}}},[e._v("全部不通过")]),e._v(" "),a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:e.complete}},[e._v("完成审核")]),e._v(" "),a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:e.closePage}},[e._v("取消")])])]),e._v(" "),a("div",{staticClass:"certi-base-info"},[a("div",{staticClass:"change-titlerr"},[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"certi-baseInfo-main"},[a("el-row",e._l(e.certifiBaseInfo,function(t,s){return a("el-col",{key:s,staticClass:"baseInfo-item",attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("span",[e._v(e._s(t.label))]),e._v(" \n          "),a("span",{staticClass:"baseInfo-height"},[e._v(e._s(t.name||"--")+" ")])])}))],1)]),e._v(" "),a("div",{staticClass:"certifi-base-record"},[a("div",{staticClass:"change-titlerr"},[e._v("审核记录")]),e._v(" "),a("div",{staticClass:"certifi-record-box"},[a("div",{staticClass:"certifi-record-table"},[a("el-row",{staticClass:"certifi-table-head"},[a("el-col",{attrs:{span:6}},[e._v("职位")]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("审核结果")]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("审核人")]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("审核时间")])],1),e._v(" "),e._l(e.certifiRecord,function(t,s){return a("el-row",{key:s,staticClass:"certifi-table-tr"},[a("el-col",{attrs:{span:6}},[e._v(e._s(e._f("person_name")(t.audit_person)))]),e._v(" "),a("el-col",{attrs:{span:6}},[1==t.audit_code?a("span",{staticClass:"certifi-succ"},[e._v("通过")]):e._e(),e._v(" "),0==t.audit_code?a("span",{staticClass:"certifi-err"},[e._v("未通过")]):e._e()]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v(e._s(t.real_name||"--"))]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v(e._s(e._f("formatTimeD")(t.audit_time)))])],1)}),e._v(" "),0==e.certifiRecord.length?a("el-row",{staticClass:"certifi-table-tr"},[e._v("无审核记录")]):e._e()],2)])])])},staticRenderFns:[]};var w=a("C7Lr")(C,S,!1,function(e){a("lbkM"),a("OIKV")},"data-v-69de4532",null);t.default=w.exports},lbkM:function(e,t){},w6yF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4YfN"),i=a.n(s),n=a("5Kqy"),l=a("CzTJ"),r=a("kq/+"),o=a("6nXL"),c=a("P9l9"),u=a("a2vD"),_=a("9rMa"),f={components:{certiSearch:n.default,certiTable:l.default,certiPage:r.default},data:function(){return{data_row:{},agent_id:null,userid:u.a.getUserid(),auditPlan:u.a.getAuditPer(),searchMain:{business_status:o.a.DURING,agent_name:"",agent_id:"",from:"",employee_name:"",date:"",begin_time:"",end_time:"",agent_level:"",agent_type:""},sort_name:"ctime",desc:-1,list:[],emptyType:1,total:10,listQuery:{page:1,limit:10},businessStatus:o.a.DURING,from_route:""}},created:function(){},computed:i()({},Object(_.d)({ACS:function(e){return e.perimission.sysPermis},PL_K:function(e){return e.perimission.PL_K}})),beforeRouteEnter:function(e,t,a){a(function(e){e.from_route=t.path})},methods:{getList:function(){var e=this;this.businessStatus=this.searchMain.business_status,console.log(this.businessStatus);var t={agent_list:1,sort_name:this.sort_name,business_status:this.searchMain.business_status,real_name:this.searchMain.employee_name,from:this.searchMain.from,agent_id:this.searchMain.agent_id,begin_time:this.searchMain.begin_time,end_time:this.searchMain.end_time,agent_name:this.searchMain.agent_name,agent_level:this.searchMain.agent_level,agent_type:this.searchMain.agent_type,desc:this.desc,page_size:this.listQuery.limit,page_no:this.listQuery.page,platform:1};Object(c.n)(t).then(function(t){if(0===t.ret)e.list=t.data.list,e.total=t.data.total,0==e.list.length&&e.listQuery.page>1&&(e.listQuery.page--,console.log("见见见见"),e.getList());else{if(-20011===t.ret)return;e.$slnotify({message:o.N.toString(t.ret)})}})},search_m:function(e){this.searchMain.agent_name=e.agent_name||"",this.searchMain.agent_id=e.agent_id||"",this.searchMain.from=e.from||"",this.searchMain.begin_time=e.begin_time||"",this.searchMain.end_time=e.end_time||"",this.searchMain.employee_name=e.employee_name||"",this.searchMain.business_status=e.business_status,this.searchMain.agent_level=e.agent_level||"",this.searchMain.agent_type=e.agent_type||"",this.listQuery.page=1,this.getList()},sort:function(e){this.sort_name=e.prop,"descending"===e.order?this.desc=-1:"ascending"===e.order?(this.desc=1,this.getList()):this.isSort=!1},handleSizeChange:function(e){this.listQuery.page=1,this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},certifiPush:function(e){this.agent_id=e.agent_id,this.$router.push({path:"/officialmanage/certiApply",query:{agent_id:this.agent_id,upPath:this.$route.path,apply:!1}})},certifiApply:function(e){this.agent_id=e.agent_id,this.$router.push({path:"/officialmanage/certiApply",query:{agent_id:this.agent_id,upPath:this.$route.path,apply:!0}})},certifi:function(e){var t=this;this.agent_id=e.agent_id;var a={agent_info:1,agent_id:this.agent_id,platform:1};Object(c.n)(a).then(function(e){0===e.ret?t.auditPlan!=e.data.agent_info.audit_plan?t.$slnotify({message:"无审核权限或已被同级审核",duration:1500}):t.auditPlan==e.data.agent_info.audit_plan&&t.$router.push({path:"/officialmanage/certifipage",query:{agent_id:t.agent_id}}):e.ret===o.N.USER_PERMISSION_ERR?t.$router.push({path:"/officialmanage/certifipage",query:{agent_id:t.agent_id}}):t.$slnotify({message:o.N.toString(e.ret),duration:1500})})},certifiPro:function(e,t){this.agent_id=e.agent_id,this.$router.push({path:"/officialmanage/certiResult",query:{agent_id:this.agent_id,title:t,audit_plan:e.audit_plan,business_status:e.business_status}})},onKeyCerti:function(e){var t=this,a={one_power_audit:1,userid:this.userid};a.agent_id=e.agent_id,Object(c.s)(a).then(function(e){0===e.ret?(t.getList(),t.$slnotify({message:"管理员一键审核代理商成功"})):t.$slnotify({message:o.N.toString(e.ret)})})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-certi-box"},[e._m(0),e._v(" "),e.from_route?a("certi-search",{attrs:{from_route:e.from_route},on:{search:e.search_m}}):e._e(),e._v(" "),a("div",{staticClass:"table-content change-default"},[a("certi-table",{attrs:{list:e.list,emptyType:e.emptyType,businessStatus:e.businessStatus},on:{certifi:e.certifi,certifiPro:e.certifiPro,certifiPush:e.certifiPush,certifiApply:e.certifiApply,onKeyCerti:e.onKeyCerti,sort:e.sort}})],1),e._v(" "),a("div",{staticClass:"pagination-content change-pagination-default"},[a("el-pagination",{staticClass:"page-el",attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,40],"page-size":e.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nav-own-bar"},[t("span",{staticClass:"cant-click-nav"},[this._v("代理商管理")]),this._v("\n    >\n    "),t("span",{staticClass:"current-nav"},[this._v("代理商认证")])])}]};var p=a("C7Lr")(f,d,!1,function(e){a("j/Ov")},"data-v-440dfb49",null);t.default=p.exports}});