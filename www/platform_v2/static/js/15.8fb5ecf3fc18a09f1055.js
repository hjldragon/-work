webpackJsonp([15,55,79],{"0FNI":function(e,t){},BdVp:function(e,t,a){"use strict";(function(e){var i=a("6nXL"),n=a("P9l9"),l=a("EuEE"),s=a("R/Ky"),r=a("CW5y");t.a={data:function(){return{city_level:"",tableData:[],areaDialog:!1,listQuery:{page:1,limit:10},total:10,cityLevelOption:[{label:"全部",value:0},{label:i.i.toString(i.i.FIRST),value:i.i.FIRST},{label:i.i.toString(i.i.SECEND),value:i.i.SECEND},{label:i.i.toString(i.i.THIRD),value:i.i.THIRD}]}},created:function(){this.getAreaList()},mounted:function(){var t=this.$refs.areaSet.$refs.bodyWrapper;this.$nextTick(function(){l.a.AdjustMinHeight(t)}),e(window).resize(function(){l.a.AdjustMinHeight(t)})},components:{AreaSetDialog:s.default},methods:{getAreaList:function(){var e=this,t={get_city_list:1,page_size:this.listQuery.limit,page_no:this.listQuery.page};this.city_level&&(t.city_level=this.city_level),Object(n.v)(t).then(function(t){0===t.ret?(e.tableData=t.data.city_list,e.listQuery.page>1&&0===e.tableData.length&&(e.listQuery.page--,e.getAreaList()),e.total=t.data.total,e.tableData.forEach(function(e){e.city_level&&(e.city_levelstr=i.i.toString(e.city_level))})):e.$slnotify({message:i.N.toString(t.ret)})})},searchCityLevel:function(){this.listQuery.page=1,this.getAreaList()},openDialog:function(e){this.areaDialog=!0,this.dialogInfo=e},handleClose:function(){this.areaDialog=!1,this.getAreaList()},handleSizeChange:function(e){this.listQuery.page=1,this.listQuery.limit=e,r.a.set(this.$route,e),this.$emit("handleSizeChange",e),this.getAreaList()},handleCurrentChange:function(e){this.listQuery.page=e,this.$emit("handleCurrentChange",e),this.getAreaList()}}}}).call(t,a("L7Pj"))},K3r1:function(e,t){},VFyW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("a3Yh"),n=a.n(i),l=a("6nXL"),s=a("GAg9"),r=a("U1Dd"),o=a("dlm/"),c=a("P9l9"),g=a("N6PA"),u={components:{imgUpload:s.a,BigImg:r.default,SetTable:o.default},data:function(){var e,t=function(e,t,a){var i=g.b.isDiscount(t);return t?isNaN(t)?a(new Error("请输入有效的折扣")):i?void a():a(new Error("请输入有效的折扣(大于0小于10，且最多保留一位小数点)")):a(new Error("请输入对应折扣"))};return{isBanner:1,isTextBtn:0,labelPosition:"right",isClickSave:!1,isEdit:!1,setData:[],clickData:{},agentFormSet:(e={agent_level:"",banner:"",city_level:"",hardware_rebates:"",software_rebates:"",supplies_rebates:"",uplevel_money:""},n()(e,"city_level",""),n()(e,"id",""),e),imgbase_url:"./php",imgSize:1024,showTips:!1,imgSrc:"",imgurl:"",img_link:"",agentLevel:"",cityLevel:"",showImg:!1,cityLevelOption:[{label:l.h.toString(l.h.AREA),value:l.h.AREA},{label:l.h.toString(l.h.INDUSTRY),value:l.h.INDUSTRY}],AgentLevelOption:[{label:l.c.toString(l.c.FIRST),value:l.c.FIRST},{label:l.c.toString(l.c.SECOND),value:l.c.SECOND},{label:l.c.toString(l.c.THREE),value:l.c.THREE}],agentRules:{city_level:[{required:!0,message:"请选择代理商类型",trigger:"change,click"}],uplevel_money:[{required:!0,validator:function(e,t,a){var i=g.b.isGreatZero(t);return t?0==t?a(new Error("代理价格(大于0,且最多保留一位小数点)")):isNaN(t)?a(new Error("请输入有效的代理价格")):i?void a():a(new Error("代理价格(大于0,且最多保留一位小数点)")):a(new Error("请输入代理价格"))},trigger:" change,blur,click"}],agent_level:[{required:!0,message:"请选择代理商级别",trigger:"change,click"}],software_rebates:[{required:!0,validator:t,trigger:"change,blur,click"}],hardware_rebates:[{required:!0,validator:t,trigger:"change,blur,click"}],supplies_rebates:[{required:!0,validator:t,trigger:"change,blur,click"}]},listQuery:{page:1,limit:10},total:10}},computed:{CityLevel:function(){return l.h}},created:function(){this.agentFormSet.banner&&(this.imgSrc=this.agentFormSet.banner),this.getSetList()},methods:{getShopphoto:function(e){this.imgurl=e,this.showImg=!0},clickImg:function(){this.showImg=!0,this.isEdit=!0},delt:function(){this.agentFormSet.banner="",this.img_link=""},checkInput:function(e){this.isClickSave&&!this.clickData&&this.$refs[e].validate(function(e){return!!e})},viewImg:function(){this.agentFormSet.banner=this.imgurl,this.showImg=!1},closeImg:function(){this.isEdit||this.clickData||(this.agentFormSet.banner="",this.isEdit=!1),this.showImg=!1},getPhoto:function(e){this.showImg=!1,this.agentFormSet.banner=e.imgSrc,this.img_link=e.img_link},saveAgentSet:function(e){var t=this;this.isClickSave=!0,this.$refs[e].validate(function(a){if(!a)return!1;if(t.agentFormSet.banner){var i={save_agent_cfg:1,agent_type:t.agentFormSet.city_level,uplevel_money:t.agentFormSet.uplevel_money,agent_level:t.agentFormSet.agent_level,software_rebates:t.agentFormSet.software_rebates,hardware_rebates:t.agentFormSet.hardware_rebates,supplies_rebates:t.agentFormSet.supplies_rebates,banner:t.agentFormSet.banner};t.agentFormSet.id&&(i.id=t.agentFormSet.id),t.img_link&&(i.url=t.img_link),Object(c.m)(i).then(function(a){0===a.ret?(t.$refs[e].resetFields(),t.$slnotify({message:"保存成功"}),t.agentFormSet.banner="",t.imgurl="",t.imgSrc="",t.img_link="",t.agentFormSet.id="",t.isClickSave=!1,t.getSetList()):t.$slnotify({message:l.N.toString(a.ret)})})}else t.$slnotify({message:"请上传banner图片"})})},getSetList:function(){var e=this,t={get_list:1,page_size:this.listQuery.limit,page_no:this.listQuery.page};Object(c.l)(t).then(function(t){0===t.ret?(e.setData=t.data.banner_list,e.listQuery.page>1&&0===e.setData.length&&(e.listQuery.page--,e.getSetList()),e.total=t.data.total,e.setData.map(function(e){e.agent_level?e.agent_level_txt=l.c.toString(e.agent_level):e.agent_level_txt="--",e.agent_type?e.agent_type_txt=l.h.toString(e.agent_type):e.agent_type_txt="--"}),e.isEdit=!1):e.$slnotify({message:l.N.toString(t.ret)})})},goToSetDetail:function(e){var t=this;this.$refs.agentFormSet.resetFields(),this.clickData=e;var a={get_cfg_info:1,id:e.id};Object(c.l)(a).then(function(e){0===e.ret?(t.agentFormSet.agent_level=e.data.info.agent_level,t.agentFormSet.city_level=e.data.info.agent_type,t.agentFormSet.uplevel_money=e.data.info.uplevel_money,t.agentFormSet.software_rebates=e.data.info.software_rebates,t.agentFormSet.supplies_rebates=e.data.info.supplies_rebates,t.agentFormSet.hardware_rebates=e.data.info.hardware_rebates,t.img_link=e.data.info.url,t.agentFormSet.id=e.data.info.id,scrollTo(0,0),e.data.info.banner&&(t.agentFormSet.banner=e.data.info.banner,t.imgurl=t.agentFormSet.banner)):t.$slnotify({message:l.N.toString(e.ret)})})},handleSizeChange:function(e){this.listQuery.page=1,this.listQuery.limit=e,this.getSetList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getSetList()}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-set-offici"},[a("div",{staticClass:"set-content clearfix"},[a("div",{staticClass:"set-left set-item"},[a("div",{staticClass:"set-title"},[e._v("\r\n          代理商设置\r\n        ")]),e._v(" "),a("el-form",{ref:"agentFormSet",staticClass:"set-form",attrs:{model:e.agentFormSet,rules:e.agentRules,"label-width":"135px",inline:!0,"label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"代理商类型",prop:"city_level"}},[a("el-select",{attrs:{placeholder:"请选择代理商类型"},on:{change:function(t){e.checkInput("agentFormSet")}},model:{value:e.agentFormSet.city_level,callback:function(t){e.$set(e.agentFormSet,"city_level",t)},expression:"agentFormSet.city_level"}},e._l(e.cityLevelOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"代理商级别",prop:"agent_level"}},[a("el-select",{attrs:{placeholder:"请选择代理商级别"},on:{change:function(t){e.checkInput("agentFormSet")}},model:{value:e.agentFormSet.agent_level,callback:function(t){e.$set(e.agentFormSet,"agent_level",t)},expression:"agentFormSet.agent_level"}},e._l(e.AgentLevelOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"代理价格",prop:"uplevel_money"}},[a("el-input",{on:{input:function(t){e.checkInput("agentFormSet")}},model:{value:e.agentFormSet.uplevel_money,callback:function(t){e.$set(e.agentFormSet,"uplevel_money",t)},expression:"agentFormSet.uplevel_money"}}),e._v(" 万\r\n          ")],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"软件类产品折扣",prop:"software_rebates"}},[a("el-input",{on:{input:function(t){e.checkInput("agentFormSet")}},model:{value:e.agentFormSet.software_rebates,callback:function(t){e.$set(e.agentFormSet,"software_rebates",t)},expression:"agentFormSet.software_rebates"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"硬件类产品折扣",prop:"hardware_rebates"}},[a("el-input",{on:{input:function(t){e.checkInput("agentFormSet")}},model:{value:e.agentFormSet.hardware_rebates,callback:function(t){e.$set(e.agentFormSet,"hardware_rebates",t)},expression:"agentFormSet.hardware_rebates"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"耗材类产品折扣",prop:"supplies_rebates"}},[a("el-input",{on:{input:function(t){e.checkInput("agentFormSet")}},model:{value:e.agentFormSet.supplies_rebates,callback:function(t){e.$set(e.agentFormSet,"supplies_rebates",t)},expression:"agentFormSet.supplies_rebates"}})],1)],1)],1)],1)]),e._v(" "),a("div",{staticClass:"banner-set"},[e._m(0),e._v(" "),a("div",{staticClass:"second-row clearfix"},[a("span",{staticClass:"item-label left"},[e._v("图片 :")]),e._v(" "),e.agentFormSet.banner?a("div",{ref:"info",staticClass:"shopinfo left"},[a("img",{attrs:{src:e.imgbase_url+"/img_get.php?img=1&height=130&width=200&imgname="+e.agentFormSet.banner,alt:"banner图片"}}),e._v(" "),a("span",{staticClass:"text-blue",on:{click:function(t){e.clickImg()}}},[e._v("编辑")]),e._v(" "),a("span",{staticClass:"text-red",on:{click:function(t){e.delt()}}},[e._v("删除")])]):e._e(),e._v(" "),a("img-upload",{attrs:{FreedomCrop:!0,isOfficial:1,isBanner:e.isBanner,isTextBtn:e.isTextBtn,"is-shop":!0},on:{"send-image":e.getShopphoto}})],1)]),e._v(" "),e.showImg?a("big-img",{attrs:{imgSrc:e.imgurl,link:e.img_link,agentLevel:e.agentFormSet.agent_level,cityLevel:e.agentFormSet.city_level},on:{clickit:e.viewImg,closeImg:e.closeImg,getPhoto:e.getPhoto}}):e._e(),e._v(" "),a("div",{staticClass:"footer"},[a("div",{staticClass:"save-b-gradient",on:{click:function(t){e.saveAgentSet("agentFormSet")}}},[e._v("\r\n    保存\r\n  ")])]),e._v(" "),e.total&&e.total>0?a("set-table",{attrs:{setDataList:e.setData,total:e.total},on:{goToSetDetail:e.goToSetDetail,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"change-titlerr"},[t("span",[this._v("Banner设置")])])}]};var v=a("C7Lr")(u,_,!1,function(e){a("0FNI"),a("jaUR")},"data-v-f846f644",null);t.default=v.exports},Y86h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4YfN"),n=a.n(i),l=a("9rMa"),s=a("VFyW"),r=a("cK0O"),o=(a("P9l9"),{components:{AgentSet:s.default,AreaSet:r.default},data:function(){return{activeName:"first",rowSetInfo:{city_level:""}}},created:function(){this.ACS[this.PL_K.ALL_AGENT_SET]?this.activeName="first":this.ACS[this.PL_K.AGENT_AREA_SET]&&(this.activeName="second")},computed:n()({},Object(l.d)({ACS:function(e){return e.perimission.sysPermis},PL_K:function(e){return e.perimission.PL_K}})),methods:{handleClick:function(e){},goToFromSet:function(){this.ACS[this.PL_K.PL_FROM_SET]?this.$router.push("/officialmanage/fromset"):this.$slnotify({message:"操作权限不足"})}}}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-set-official"},[e._m(0),e._v(" "),a("div",{staticClass:"set-header"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.ACS[e.PL_K.ALL_AGENT_SET]?a("el-tab-pane",{attrs:{name:"first"}},[a("span",{staticClass:"label-title",attrs:{slot:"label"},slot:"label"},[e._v("代理商设置")])]):e._e(),e._v(" "),e.ACS[e.PL_K.AGENT_AREA_SET]?a("el-tab-pane",{attrs:{name:"second"}},[a("span",{staticClass:"label-title",attrs:{slot:"label"},slot:"label"},[e._v("区域设置")])]):e._e()],1),e._v(" "),e.ACS[e.PL_K.PL_FROM_SET]?a("span",{staticClass:"fr from-set",on:{click:e.goToFromSet}},[e._v("来源设置")]):e._e()],1),e._v(" "),"first"===e.activeName&&e.ACS[e.PL_K.ALL_AGENT_SET]?a("agent-set",{attrs:{rowSetInfo:e.rowSetInfo}}):e._e(),e._v(" "),"second"===e.activeName&&e.ACS[e.PL_K.AGENT_AREA_SET]?a("area-set"):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nav-own-bar"},[t("span",{staticClass:"cant-click-nav"},[this._v("系统管理")]),this._v("\n    >\n    "),t("span",{staticClass:"current-nav"},[this._v("代理设置")])])}]};var g=a("C7Lr")(o,c,!1,function(e){a("n39b"),a("K3r1")},"data-v-16048529",null);t.default=g.exports},cK0O:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("BdVp"),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"area-set"},[a("div",{staticClass:"search-content"},[a("span",{staticClass:"span-label"},[e._v("区域类型")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择区域类型"},on:{change:e.searchCityLevel},model:{value:e.city_level,callback:function(t){e.city_level=t},expression:"city_level"}},e._l(e.cityLevelOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"area-table"},[a("div",{staticClass:"change-default"},[a("el-table",{ref:"areaSet",attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"区域类型","min-width":"40%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.city_levelstr))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"城市名称","min-width":"40%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.city_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"5%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"detail-btn",on:{click:function(a){e.openDialog(t.row)}}},[e._v("设置")])]}}])})],1)],1)]),e._v(" "),a("div",{staticClass:"page"},[a("div",{staticClass:"pagination-content change-pagination-default"},[a("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,40],"page-size":e.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.$set(e.listQuery,"page",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)]),e._v(" "),e.areaDialog?a("area-set-dialog",{attrs:{dialogInfo:e.dialogInfo},on:{handleClose:e.handleClose}}):e._e()],1)},staticRenderFns:[]};var l=function(e){a("wbIa")},s=a("C7Lr")(i.a,n,!1,l,"data-v-3d86a1ce",null);t.default=s.exports},jaUR:function(e,t){},n39b:function(e,t){},wbIa:function(e,t){}});