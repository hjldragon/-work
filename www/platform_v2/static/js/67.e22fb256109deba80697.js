webpackJsonp([67],{"0krA":function(t,e){},ZTYR:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("3cXf"),a=i.n(s),l=i("EuEE"),d=i("6nXL"),n=i("P9l9"),o=i("a2vD"),c=i("N6PA"),r={components:{CitySelect:i("9aGi").a},data:function(){return{defaultAddress:{people:{label:"发货人",value:""},addressCity:{label:"发货地区",value:""},address:{label:"地址",value:""},phone:{label:"手机",value:""}},showDefaultAddress:!1,addressList:[],editInfo:{people:"",province:"",city:"",area:"",address:"",phone:"",isDefault:!1},editCityInfo:{province:"",city:"",area:""},dialogTitleText:"",dialogVisible:!1,dialogId:"",singleDelete:!1,isShowSelectCity:!0}},computed:{isShowEditConfirm:function(){return!!(this.editInfo.people&&this.editInfo.province&&this.editInfo.city&&this.editInfo.area&&this.editInfo.address&&this.editInfo.phone)}},created:function(){this.getAddressList()},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$refs.adjustHeight;l.a.AdjustHeight(e)})},methods:{getAddressList:function(){var t=this,e={address_list:1,address_type:1,uid:o.a.getPlatformid()};Object(n.a)(e).then(function(e){if(0===e.ret){var i=e.data.info||[],s=i.filter(function(t){return 1===t.is_default})[0]||{};"{}"!==a()(s)?(t.showDefaultAddress=!0,t.defaultAddress.people.value=s.name,t.defaultAddress.addressCity.value=""+s.province+s.city+s.area,t.defaultAddress.address.value=s.address,t.defaultAddress.phone.value=s.phone,t.defaultAddress.address_id=s.address_id,t.defaultAddress.province=s.province,t.defaultAddress.city=s.city,t.defaultAddress.area=s.area,t.defaultAddress.is_default=1):(t.showDefaultAddress=!1,t.defaultAddress.people.value="",t.defaultAddress.addressCity.value="",t.defaultAddress.address.value="",t.defaultAddress.phone.value="");var l=i.filter(function(t){return 1!==t.is_default});t.addressList=l.map(function(t,e){var i=t.address,s=t.phone,a={};return a.people={label:"发货人",value:t.name},a.addressCity={label:"发货地区",value:""+t.province+t.city+t.area},a.address={label:"地址",value:i},a.phone={label:"手机",value:s},a.title="发货地址"+(e+1),a.address_id=t.address_id,a.province=t.province,a.city=t.city,a.area=t.area,a})}else t.$slnotify({message:d.N.toString(e.ret)})})},openDialog:function(){this.dialogVisible=!0,this.dialogId?this.dialogTitleText="编辑":this.dialogTitleText="新增",this.selectCityRender()},handleClose:function(){var t=this;this.editInfo={people:"",province:"",city:"",area:"",address:"",phone:"",isDefault:!1},this.editCityInfo={province:"",city:"",area:""},setTimeout(function(){t.dialogId=""},500),this.dialogVisible=!1},dialogConfirm:function(){var t=this;if(c.b.isTelePhone(this.editInfo.phone)){var e={address_save:1,address_type:1,uid:o.a.getPlatformid(),address:this.editInfo.address,province:this.editInfo.province,city:this.editInfo.city,area:this.editInfo.area,phone:this.editInfo.phone,name:this.editInfo.people};this.dialogId&&(e.address_id=this.dialogId),this.editInfo.isDefault&&(e.is_default=1),Object(n.b)(e).then(function(e){0===e.ret?(t.handleClose(),t.getAddressList()):t.$slnotify({message:d.N.toString(e.ret)})})}else this.$notify({title:"警告",message:"请输入11位手机号码",type:"warning"})},handlerCitySelect:function(t){this.editInfo.province=t.province,this.editInfo.city=t.city,this.editInfo.area=t.blocks},handlerRadioClick:function(){this.editInfo.isDefault&&(this.editInfo.isDefault=!this.editInfo.isDefault)},singleDialogDeleteOpen:function(t){this.dialogId=t,this.singleDelete=!0},singleDialogDeleteCancel:function(){this.dialogId="",this.singleDelete=!1},singleDialogDelete:function(){var t=this,e={address_del:1,address_id_list:[this.dialogId]};Object(n.b)(e).then(function(e){0===e.ret?(t.$notify({title:"成功",message:"删除成功",type:"success"}),t.singleDialogDeleteCancel(),t.getAddressList()):t.$slnotify({message:d.N.toString(e.ret)})})},setDefaultAddress:function(t){var e=this,i={address_save:1,address_id:t,is_default:1};Object(n.b)(i).then(function(t){0===t.ret?(e.$notify({title:"成功",message:"设置成功",type:"success"}),e.getAddressList()):e.$slnotify({message:d.N.toString(t.ret)})})},editAddress:function(t){this.editInfo.people=t.people.value,this.editInfo.province=t.province,this.editInfo.city=t.city,this.editInfo.area=t.area,this.editInfo.address=t.address.value,this.editInfo.phone=t.phone.value,this.dialogId=t.address_id,this.editCityInfo.province=t.province,this.editCityInfo.city=t.city,this.editCityInfo.area=t.area,t.is_default?this.editInfo.isDefault=!0:this.editInfo.isDefault=!1,this.openDialog()},selectCityRender:function(){var t=this;this.isShowSelectCity=!1,this.$nextTick(function(){t.isShowSelectCity=!0})}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"adjustHeight",staticClass:"ep-send-address",attrs:{id:"ep-send-address"}},[t.showDefaultAddress?s("div",{staticClass:"default-address card-item"},[s("div",{staticClass:"card-title change-titlerr clearfix"},[s("span",[t._v("默认地址")]),t._v(" "),s("div",{staticClass:"title-btn-group fr"},[s("span",{staticClass:"fr",on:{click:function(e){t.singleDialogDeleteOpen(t.defaultAddress.address_id)}}},[s("i",{staticClass:"iconfont icon-shanchu"}),t._v("\n                    删除\n                ")]),t._v(" "),s("span",{staticClass:"fr",on:{click:function(e){t.editAddress(t.defaultAddress)}}},[s("i",{staticClass:"iconfont icon-bianji"}),t._v("\n                    编辑\n                ")])])]),t._v(" "),s("div",{staticClass:"card-content"},t._l(t.defaultAddress,function(e,i){return s("div",{key:i,staticClass:"item clearfix"},[s("div",{staticClass:"item-left fl"},[t._v(t._s(e.label))]),t._v(" "),s("div",{staticClass:"item-right fl"},[t._v(t._s(e.value))])])}))]):t._e(),t._v(" "),t._l(t.addressList,function(e){return s("div",{key:e.address_id,staticClass:"address-list card-item"},[s("div",{staticClass:"card-title change-titlerr clearfix"},[s("span",[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"title-btn-group fr"},[s("span",{on:{click:function(i){t.setDefaultAddress(e.address_id)}}},[s("i",{staticClass:"iconfont icon-shiliangzhinengduixiang"}),t._v("\n                    设为默认地址\n                ")]),t._v(" "),s("span",{on:{click:function(i){t.editAddress(e)}}},[s("i",{staticClass:"iconfont icon-bianji"}),t._v("\n                    编辑\n                ")]),t._v(" "),s("span",{on:{click:function(i){t.singleDialogDeleteOpen(e.address_id)}}},[s("i",{staticClass:"iconfont icon-shanchu"}),t._v("\n                    删除\n                ")])])]),t._v(" "),s("div",{staticClass:"card-content"},t._l(e,function(e,i){return s("div",{key:i,staticClass:"item clearfix"},[s("div",{staticClass:"item-left fl"},[t._v(t._s(e.label))]),t._v(" "),s("div",{staticClass:"item-right fl"},[t._v(t._s(e.value))])])}))])}),t._v(" "),s("div",{staticClass:"add-btn flex-box cross-center",on:{click:t.openDialog}},[s("img",{attrs:{src:i("Rs2e")}}),t._v(" "),s("span",[t._v("添加")])]),t._v(" "),s("el-dialog",{staticClass:"edit-dialog dialog-custom-a nopadding",attrs:{visible:t.dialogVisible,"show-close":!1,"before-close":t.handleClose,width:"540px",top:"25vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[t._v("发货信息-"+t._s(t.dialogTitleText))]),t._v(" "),s("div",{staticClass:"dialog-content"},[s("div",{staticClass:"dl-item-content"},[s("div",{staticClass:"dl-item clearfix"},[s("div",{staticClass:"dl-item-left fl"},[s("span",{staticClass:"sl-must"},[t._v("发货人")])]),t._v(" "),s("div",{staticClass:"dl-item-right fl"},[s("el-input",{staticClass:"sl-input",attrs:{placeholder:"发货人"},model:{value:t.editInfo.people,callback:function(e){t.$set(t.editInfo,"people","string"==typeof e?e.trim():e)},expression:"editInfo.people"}})],1)]),t._v(" "),s("div",{staticClass:"dl-item clearfix"},[s("div",{staticClass:"dl-item-left fl"},[s("span",{staticClass:"sl-must"},[t._v("发货地区")])]),t._v(" "),s("div",{staticClass:"dl-item-right fl"},[t.isShowSelectCity?s("city-select",{staticClass:"ep-city-select",attrs:{cityinfo:t.editCityInfo},on:{changeProvinces:t.handlerCitySelect}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"dl-item clearfix"},[s("div",{staticClass:"dl-item-left fl"},[s("span",{staticClass:"sl-must"},[t._v("地址")])]),t._v(" "),s("div",{staticClass:"dl-item-right fl"},[s("el-input",{staticClass:"sl-input",attrs:{placeholder:"地址"},model:{value:t.editInfo.address,callback:function(e){t.$set(t.editInfo,"address","string"==typeof e?e.trim():e)},expression:"editInfo.address"}})],1)]),t._v(" "),s("div",{staticClass:"dl-item clearfix"},[s("div",{staticClass:"dl-item-left fl"},[s("span",{staticClass:"sl-must"},[t._v("手机")])]),t._v(" "),s("div",{staticClass:"dl-item-right fl"},[s("el-input",{staticClass:"sl-input",attrs:{placeholder:"手机"},model:{value:t.editInfo.phone,callback:function(e){t.$set(t.editInfo,"phone","string"==typeof e?e.trim():e)},expression:"editInfo.phone"}})],1)]),t._v(" "),this.dialogId?t._e():s("div",{staticClass:"redio-content"},[s("el-radio",{attrs:{label:!0},nativeOn:{click:function(e){return t.handlerRadioClick(e)}},model:{value:t.editInfo.isDefault,callback:function(e){t.$set(t.editInfo,"isDefault",e)},expression:"editInfo.isDefault"}},[t._v("设为默认地址")])],1)]),t._v(" "),s("div",{staticClass:"button-group"},[t.isShowEditConfirm?s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.dialogConfirm}},[t._v("确定")]):s("span",{staticClass:"sl-btn-bg-b-gray"},[t._v("确定")]),t._v(" "),s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.handleClose}},[t._v("取消")])])])]),t._v(" "),s("el-dialog",{staticClass:"dialog-custom-b nopadding",attrs:{visible:t.singleDelete,"show-close":!1,"before-close":t.singleDialogDeleteCancel,width:"540px",top:"30vh"},on:{"update:visible":function(e){t.singleDelete=e}}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),s("div",{staticClass:"dialog-content"},[s("div",{staticClass:"delete-tip"},[s("div",{staticClass:"delete-img"},[s("img",{attrs:{src:i("RrKl"),alt:"提示图片"}})]),t._v(" "),s("div",{staticClass:"delete-text"},[t._v("确认删除该地址？")])]),t._v(" "),s("div",{staticClass:"button-group"},[s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.singleDialogDelete}},[t._v("确定")]),t._v(" "),s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.singleDialogDeleteCancel}},[t._v("取消")])])])])],2)},staticRenderFns:[]};var u=i("C7Lr")(r,f,!1,function(t){i("0krA"),i("jL4q")},"data-v-4898e843",null);e.default=u.exports},jL4q:function(t,e){}});