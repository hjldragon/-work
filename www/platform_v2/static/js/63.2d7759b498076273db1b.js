webpackJsonp([63],{OIKV:function(e,t){},"kq/+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("ZLEe"),n=a.n(s),i=a("aA9S"),l=a.n(i),r=a("4YfN"),o=a.n(r),c=a("6nXL"),_=a("EU70"),u=a("GAg9"),v=a("Q0Ca"),d=a("P9l9"),m=a("a2vD"),g=a("9rMa"),b=1,f=2,p=3,h=4,C=5,I={components:{PreviewImg:_.a,ImgUpload:u.a},data:function(){return{inputTipMsg:"请输入(20字以内)",maxlength:20,userid:m.a.getUserid(),agent_id:null,base_url:"./php",audit_plan:1,stepsTitle:["销售审核","销售经理审核","运营审核","运营经理审核","财务审核","财务经理审核"],certificationData:{businessName:{label:"企业名称:",name:"--",state:null,note:"",save:0,type:b},legalPerson:{label:"法人代表：",name:"--",state:null,note:"",save:0,type:b},legalPersonId:{label:"法人身份证号:",name:"--",state:null,note:"",save:0,type:b},legalPersonImg:{label:"法人身份证照片:",name:"--",state:null,note:"",type:f,save:0,idFrontalImg:"",idReverseImg:""},businessId:{label:"营业执照注册号:",name:"--",state:null,note:"",save:0,type:b},businessDate:{label:"营业期限:",name:"--",state:null,note:"",save:0,type:b},businessImg:{label:"营业执照扫描件:",name:"--",state:null,note:"",type:p,save:0,imgSrc:""},operateRange:{label:"经营范围:",name:"--",state:null,note:"",save:0,type:b},businessSever:{label:"代理费:",name:"",state:"无",number:"",type:h},isSever:{type:C,label:"代理费",name:"",state:"无"}},certifiBaseInfo:{ctime:{label:"创建时间:",name:"--"},from:{label:"来源:",name:"--"},agentType:{label:"代理商类型:",name:"--"},employee_name:{label:"销售人员:",name:"--"},agent_name:{label:"代理商名称:",name:"--"},contacts:{label:"联系人:",name:"--"},level:{label:"级别:",name:"--"},contactsPhone:{label:"联系电话:",name:"--"},loginId:{label:"登录账号:",name:"--"},email:{label:"邮箱:",name:"--"},address:{label:"地址:",name:"--"}},certifiRecord:[]}},filters:{person_name:function(e){return c.H.toString(e)}},created:function(){this.agent_id=this.$route.query.agent_id,this.getCertiPage()},beforeRouteEnter:function(e,t,a){a(function(e){e.SET_SELECTMENU({selectMenu:"/official/agentmanage/certificate"})})},beforeRouteLeave:function(e,t,a){this.SET_SELECTMENU({selectMenu:""}),a()},methods:o()({},Object(g.c)(["SET_SELECTMENU"]),{allAgree_m:function(e){var t=this.certificationData;for(var a in t)e?(t[a].state=1,t[a].note=""):t[a].state=0;this.complete()},agree:function(e){e.state=1,e.save=0,e.note=""},noAgree:function(e){e.state=0,1==e.save&&(e.save=0)},saveInput:function(e){e.save=1},editSave:function(e){e.save=0},getPhoto:function(e){this.certificationData.businessSever.name=e},validateData:function(){var e=this.certificationData;for(var t in e){if(null===e[t].state)return this.$slnotify({message:e[t].label+"未选择通过或不通过",duration:1500}),!1;if(0===e[t].state&&(0===e[t].save||""==e[t].note)&&"businessSever"!=t&&"isSever"!=t)return this.$slnotify({message:"请填写并保存"+e[t].label+"不通过理由",duration:1500}),!1}return 5==this.audit_plan&&1==e.businessSever.state&&""==e.businessSever.number?(this.$slnotify({message:"请输入代理费水单号",duration:1500}),!1):5==this.audit_plan&&1==e.businessSever.state&&e.businessSever.number.indexOf(" ")>=0?(this.$slnotify({message:"请输入正确代理费水单号",duration:1500}),!1):5!=this.audit_plan||1!=e.businessSever.state||""!=e.businessSever.name||(this.$slnotify({message:"请上传代理费水单图片",duration:1500}),!1)},getCertiPage:function(){var e=this,t={business_info:1,agent_id:this.agent_id,platform:1};Object(d.t)(t).then(function(t){0===t.ret?e.handleData(t.data.business_info):e.$slnotify({message:c.N.toString(t.ret),duration:1500})});var a={agent_info:1,agent_id:this.agent_id};Object(d.n)(a).then(function(t){0===t.ret&&e.handleBaseInfo(t.data.agent_info)});var s={get_audit_list:1,agent_id:this.agent_id,platform:1};Object(d.r)(s).then(function(t){0===t.ret&&(e.certifiRecord=t.data.audit_list)})},submitCertifi:function(e){var t=this,a={save_business_status:1,agent_id:this.agent_id,userid:this.userid};a=l()({},a,e),Object(d.s)(a).then(function(e){0===e.ret?(t.$slnotify({message:"提交成功",duration:1500}),setTimeout(function(){t.closePage()},1500)):t.$slnotify({message:c.N.toString(e.ret),duration:1500})})},handleBaseInfo:function(e){if(0!=n()(e).length){var t=this.certifiBaseInfo,a=e;t.ctime.name=Object(v.formatTimeS)(a.ctime),t.agent_name.name=a.agent_name||"--",t.employee_name.name=a.real_name||"--",t.address.name=a.agent_province+a.agent_city+a.agent_area+a.address,t.from.name=a.from,t.email.name=a.email||"--",t.contactsPhone.name=a.telephone||"--",t.loginId.name=a.phone||"--",t.contacts.name=a.relation_name||"--",t.level.name=c.c.toString(a.agent_level),t.agentType.name=c.d.toString(a.agent_type),this.audit_plan=a.audit_plan}},handleData:function(e){if(0!=n()(e).length){var t=this.certificationData,a=e;t.businessName.name=a.agent_name||"--",t.legalPerson.name=a.legal_person||"--",t.legalPersonId.name=a.legal_card||"--",t.legalPersonImg.idFrontalImg=a.legal_card_photo&&a.legal_card_photo[0],t.legalPersonImg.idReverseImg=a.legal_card_photo&&a.legal_card_photo[1],t.businessId.name=a.business_num||"--",t.businessDate.name=a.business_date?Object(v.formatTimeD)(a.business_date[0])+"至"+Object(v.formatTimeD)(a.business_date[1]):"--",t.businessImg.name=a.business_photo,t.operateRange.name=a.business_scope||"--"}},complete:function(){if(this.validateData()){var e={},t=this.certificationData;return e.agent_name_status=t.businessName.state,e.agent_name_reason=t.businessName.note,e.legal_person_status=t.legalPerson.state,e.legal_person_reason=t.legalPerson.note,e.legal_card_status=t.legalPersonId.state,e.legal_card_reason=t.legalPersonId.note,e.legal_card_photo_status=t.legalPersonImg.state,e.legal_card_photo_reason=t.legalPersonImg.note,e.business_num_status=t.businessId.state,e.business_num_reason=t.businessId.note,e.business_date_status=t.businessDate.state,e.business_date_reason=t.businessDate.note,e.business_photo_status=t.businessImg.state,e.business_photo_reason=t.businessImg.note,e.business_scope_status=t.operateRange.state,e.business_scope_reason=t.operateRange.note,5==this.audit_plan&&1==t.businessSever.state&&(e.business_sever_money=t.businessSever.name,e.water_num=t.businessSever.number),this.submitCertifi(e),e}return!1},closePage:function(){this.$router.push("/official/agentmanage/certificate")},goCertiList:function(){this.$router.push("/official/agentmanage/certificate")}})},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"certification-page",attrs:{id:"certification-page"}},[a("div",{staticClass:"nav-own-bar"},[a("span",{staticClass:"cant-click-nav"},[e._v("代理商管理")]),e._v("\n    >\n    "),a("span",{staticClass:"can-click-nav",on:{click:e.goCertiList}},[e._v("代理商认证")]),e._v("\n    >\n    "),a("span",{staticClass:"current-nav"},[e._v("审核")])]),e._v(" "),a("div",{staticClass:"steps-box"},[a("el-steps",{attrs:{active:e.audit_plan,"finish-status":"success","align-center":""}},e._l(e.stepsTitle,function(e){return a("el-step",{key:e,attrs:{title:e}},[a("span",{staticClass:"step-icon",attrs:{slot:"icon"},slot:"icon"})])}))],1),e._v(" "),a("div",{staticClass:"certification-data-box"},[a("div",{staticClass:"change-titlerr"},[e._v("代理商认证资料")]),e._v(" "),a("div",{staticClass:"certi-data-main"},e._l(e.certificationData,function(t,s){return a("div",{key:s,staticClass:"certi-data-item clearfix"},[4!=t.type&&5!==t.type?a("div",{staticClass:"fl"},[a("span",[e._v(e._s(t.label))]),e._v(" "),1==t.type?a("span",{staticClass:"baseInfo-height"},[e._v(e._s(t.name))]):e._e(),e._v(" "),2==t.type?a("div",[a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.idFrontalImg}}),e._v(" "),a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.idReverseImg}})],1):e._e(),e._v(" "),3==t.type?a("div",[a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.name}})],1):e._e()]):e._e(),e._v(" "),4==t.type&&5==e.audit_plan?a("div",[a("span",[e._v(e._s(t.label))]),e._v("    \n          "),a("el-radio-group",{model:{value:t.state,callback:function(a){e.$set(t,"state",a)},expression:"item.state"}},[a("el-radio",{attrs:{label:1}},[e._v("已收")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("未收")])],1),e._v(" "),1==t.state?a("el-input",{attrs:{placeholder:"请输入流水单号"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}}):e._e(),e._v(" "),1==t.state?a("div",{staticClass:"certi-upload"},[a("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"200px",height:"120px",imgSrc:t.name}}),e._v(" "),a("img-upload",{on:{"send-image":e.getPhoto}}),e._v(" "),a("div",{staticClass:"certi-notes notes-bott"},[e._v("注：支持JPG、JPEG、PNG文件格式")])],1):e._e()],1):e._e(),e._v(" "),5==t.type&&6==e.audit_plan?a("div",[a("span",[e._v(e._s(t.label))]),e._v("\n              已收\n        ")]):e._e(),e._v(" "),4!=t.type&&5!=t.type?a("div",{staticClass:"fr"},[a("span",{staticClass:"certification-btn sl-btn-bd-m-blue",class:{succ:1===t.state},on:{click:function(a){e.agree(t)}}},[e._v("通过")]),e._v(" "),a("span",{staticClass:"certification-btn sl-btn-bd-m-blue no-agree",class:{error:0===t.state},on:{click:function(a){e.noAgree(t)}}},[e._v("不通过")]),e._v(" "),a("div",{staticClass:"save-box"},[0===t.state?a("div",[0==t.save?a("span",[a("el-input",{staticClass:"certifi-note-input",attrs:{maxlength:e.maxlength,placeholder:e.inputTipMsg},model:{value:t.note,callback:function(a){e.$set(t,"note",a)},expression:"item.note"}}),e._v(" "),a("span",{staticClass:"certification-btn-small sl-btn-bd-s-blue",on:{click:function(a){e.saveInput(t)}}},[e._v("保存")])],1):e._e(),e._v(" "),1==t.save&&t.note?a("span",{on:{click:function(a){e.editSave(t)}}},[e._v("("+e._s(t.note)+")")]):e._e()]):e._e()])]):e._e()])})),e._v(" "),a("div",{staticClass:"certification-btn-foot"},[a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:function(t){e.allAgree_m(!0)}}},[e._v("全部通过")]),e._v(" "),a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:function(t){e.allAgree_m(!1)}}},[e._v("全部不通过")]),e._v(" "),a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:e.complete}},[e._v("完成审核")]),e._v(" "),a("div",{staticClass:"certification-btn-big sl-btn-bd-b-blue",on:{click:e.closePage}},[e._v("取消")])])]),e._v(" "),a("div",{staticClass:"certi-base-info"},[a("div",{staticClass:"change-titlerr"},[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"certi-baseInfo-main"},[a("el-row",e._l(e.certifiBaseInfo,function(t,s){return a("el-col",{key:s,staticClass:"baseInfo-item",attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("span",[e._v(e._s(t.label))]),e._v(" \n          "),a("span",{staticClass:"baseInfo-height"},[e._v(e._s(t.name||"--")+" ")])])}))],1)]),e._v(" "),a("div",{staticClass:"certifi-base-record"},[a("div",{staticClass:"change-titlerr"},[e._v("审核记录")]),e._v(" "),a("div",{staticClass:"certifi-record-box"},[a("div",{staticClass:"certifi-record-table"},[a("el-row",{staticClass:"certifi-table-head"},[a("el-col",{attrs:{span:6}},[e._v("职位")]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("审核结果")]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("审核人")]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("审核时间")])],1),e._v(" "),e._l(e.certifiRecord,function(t,s){return a("el-row",{key:s,staticClass:"certifi-table-tr"},[a("el-col",{attrs:{span:6}},[e._v(e._s(e._f("person_name")(t.audit_person)))]),e._v(" "),a("el-col",{attrs:{span:6}},[1==t.audit_code?a("span",{staticClass:"certifi-succ"},[e._v("通过")]):e._e(),e._v(" "),0==t.audit_code?a("span",{staticClass:"certifi-err"},[e._v("未通过")]):e._e()]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v(e._s(t.real_name||"--"))]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v(e._s(e._f("formatTimeD")(t.audit_time)))])],1)}),e._v(" "),0==e.certifiRecord.length?a("el-row",{staticClass:"certifi-table-tr"},[e._v("无审核记录")]):e._e()],2)])])])},staticRenderFns:[]};var S=a("C7Lr")(I,y,!1,function(e){a("lbkM"),a("OIKV")},"data-v-69de4532",null);t.default=S.exports},lbkM:function(e,t){}});