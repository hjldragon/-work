webpackJsonp([31],{"5Ck4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAYAAAA14t7uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRDMEMyNjAzNkQ2MTExRTg5Nzc2OEFFQzk3RDNBQjAxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRDMEMyNjA0NkQ2MTExRTg5Nzc2OEFFQzk3RDNBQjAxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEMwQzI2MDE2RDYxMTFFODk3NzY4QUVDOTdEM0FCMDEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEMwQzI2MDI2RDYxMTFFODk3NzY4QUVDOTdEM0FCMDEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5qqgryAAAAuUlEQVR42mLcvn07Ax4gB8RzgNgeiNmgYr+A+CAQpwDxIw8PD6wamRjwg7lA7IpkKAOUDRJbiE8jIYNBBjCiYVuonC0lBmMDR6A0Mz5FLED8n4F88H/Hjh1UczFRgAUabmQDclMF2YAuBv+nJCKBkQiKyP/DIyhGDR41eNRgIgxmJqOcYMZn8D8oHU1KGQ00lBGqBwT+YjP4BJReCLXkP5H4H1KNfRKbwXHQivI3GUH6G6o3DiYAEGAAKzEx5PSWNKEAAAAASUVORK5CYII="},AbN0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAYAAAA14t7uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdGNDZGQkRFNzhGMTExRTg4MUIwQjJBNDlDMUQyOUREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjdGNDZGQkRGNzhGMTExRTg4MUIwQjJBNDlDMUQyOUREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N0Y0NkZCREM3OEYxMTFFODgxQjBCMkE0OUMxRDI5REQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6N0Y0NkZCREQ3OEYxMTFFODgxQjBCMkE0OUMxRDI5REQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5p935mAAAAuUlEQVR42mL8WbSIAQ+QA+I5QGwPxGxQsV9AfBCIU4D4EVtvLFaNTAz4wVwgdkUylAHKBoktxKeRkMEgAxjRsC1UzpYSg7GBI1CaGZ8iFiD+z0A++P+reDHVXEwUYIGGG9mA3FRBNqCLwf8piUhgJIIi8v/wCIpRg0cNHjWYCIOZySgnmPEZ/A9KR5NSRgMNZYTqAYG/2Aw+AaUXQi35TyT+h1Rjn8RmcBy0ovxNRpD+huqNgwkABBgA61cxhC3zt8UAAAAASUVORK5CYII="},GqA8:function(t,e){},r6La:function(t,e){},"xtq+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),n=s("6ROu"),l=s.n(n),o=s("9rMa"),r=s("r2UX"),c=s("CW5y"),u=s("swMD"),d=s("EuEE"),p=s("P9l9"),g=s("6nXL"),m={components:{EmptyTable:r.a},data:function(){return{deleteImg:s("5Ck4"),deleteImgover:s("AbN0"),plnamearr:[],pl_name:"",sendTargetOptions:[{label:g.K.toString(g.K.ALL),value:g.K.ALL},{label:g.K.toString(g.K.SHOP),value:g.K.SHOP},{label:g.K.toString(g.K.AGENT),value:g.K.AGENT}],sendStatuesOptions:[{label:"全部",value:2},{label:g.J.toString(g.J.YES),value:g.J.YES},{label:g.J.toString(g.J.NO),value:g.J.NO}],businessStatusOption:[{label:"全部状态",value:5},{label:g.a.toString(g.a.NO),value:g.a.NO},{label:g.a.toString(g.a.DURING),value:g.a.DURING},{label:g.a.toString(g.a.SUC),value:g.a.SUC},{label:g.a.toString(g.a.FAIL),value:g.a.FAIL},{label:"全部认证",value:4}],sendTime:null,sendTarget:"",sendStatues:5,list:[],emptyType:1,multipleSelection:[],total:10,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,detOperateDialog:!1,delete_news_id:"",TipDialog:!1,TipText:"",TipImg:""}},computed:a()({isListEmpty:function(){return 0===this.list.length},AgentBusinessStatus:function(){return g.a}},Object(o.d)({ACS:function(t){return t.perimission.sysPermis},PL_K:function(t){return t.perimission.PL_K}})),created:function(){this.listQuery.limit=c.a.get(this.$route),this.getList(),this.getEmployeeOption(),u.a.removeItem("OFF-MESSAGE")},mounted:function(){this.$refs.systemTable.$refs.bodyWrapper.style.minHeight="460px"},methods:{changeColor:function(t){t.imgsrc=s("AbN0")},changeColortwo:function(t){t.imgsrc=s("5Ck4")},getEmployeeOption:function(){var t=this;Object(p.Y)({get_platformer_name:1}).then(function(e){0===e.ret?t.plnamearr=e.data.platformer_list:t.$slnotify({message:g.N.toString(e.ret)})})},getList:function(){var t=this,e={sysnews_list:1,page_size:this.listQuery.limit,page_no:this.listQuery.page};if(!d.a.isEmpty(this.sendTime)){var i=this.sendTime[0],a=this.sendTime[1];e.begin_time=parseInt(l()(i).format("X")),e.end_time=parseInt(l()(a).format("X"))}this.sendTarget&&(e.send_type=this.sendTarget),5!==this.sendStatues&&(e.business_status=this.sendStatues),this.pl_name&&(e.pl_name=this.pl_name),this.isSort&&(e.sort_name=this.sortLabel,e.desc=this.sortOrder),Object(p.P)(e).then(function(e){0===e.ret?(t.list=e.data.list||[],t.total=e.data.total,t.listQuery.page>1&&0===t.list.length&&(t.listQuery.page--,t.getList()),t.list=t.list.map(function(e){return t.$set(e,"imgsrc",s("5Ck4")),e.send_time&&(e.send_time=l()(1e3*e.send_time).format("YYYY.MM.DD HH:mm:ss")),e.send_type?e.send_type_str=g.K.toString(e.send_type):e.send_type_str="--",""!==e.business_status?4!==e.business_status?e.business_status_str=g.a.toString(e.business_status):e.business_status_str="全部":e.business_status_str="--",e.is_send_str=g.J.toString(e.is_send),e})):t.$slnotify({message:g.N.toString(e.ret)})})},search:function(){this.ACS[this.PL_K.NEW_SEEK]?(this.listQuery.page=1,this.emptyType=2,this.getList()):this.$slnotify({message:"操作权限不足"})},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getList(),c.a.set(this.$route,t)},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},deleteItem:function(t){this.delete_news_id=t,this.multiDelete()},multiDelete:function(){var t=this,e=[];e.push(this.delete_news_id);var s={del_news:1,news_id_list:e};Object(p.Q)(s).then(function(e){0===e.ret?(t.getList(),t.hidedetOperateDialog(),t.$slnotify({message:"删除成功",duration:1500})):t.$slnotify({message:g.N.toString(e.ret),duration:1500})})},openDeleteDialog:function(){0!==this.multipleSelection.map(function(t){return t.news_id}).length?this.multipleSelection.some(function(t){return t.is_send===g.J.NO})?this.opendetOperateDialog():this.multiDelete():this.$slnotify({message:"您还没有勾选任何选项",duration:1500})},addMsnSystem:function(){this.ACS[this.PL_K.ADD_NEW]?this.$router.push("/officialmanage/systemedit"):this.$slnotify({message:"操作权限不足"})},goToDetail:function(t){this.ACS[this.PL_K.NEW_INFO_INFO]?this.$router.push({path:"/officialmanage/systemdetail",query:{news_id:t.news_id}}):this.$slnotify({message:"操作权限不足"})},opendetOperateDialog:function(t){this.ACS[this.PL_K.DEL_NEW]?(this.detOperateDialog=!0,this.delete_news_id=t):this.$slnotify({message:"操作权限不足"})},hidedetOperateDialog:function(){this.detOperateDialog=!1},delOPerateOk:function(){this.multiDelete()},openTilSuc:function(t,e){var s=this;this.TipText=t,setTimeout(function(){s.TipDialog=!0},500)},hideTipSuc:function(){this.TipDialog=!1}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"system-list"}},[t._m(0),t._v(" "),s("div",{staticClass:"official-title-bar rank-title"},[s("span",[t._v("发送消息列表")]),t._v(" "),s("span",{staticClass:"rank-btn-add fr btn-text-blue",on:{click:t.addMsnSystem}},[s("span",{staticClass:"add-btn-blue add-agent"}),t._v(" "),s("span",{staticClass:"add-agent"},[t._v(" 添加消息")])])]),t._v(" "),s("div",{staticClass:"search-content clearfix search-content-width-fix"},[s("div",{staticClass:"fl clearfix search-item"},[t._m(1),t._v(" "),s("div",{staticClass:"fl"},[s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.pl_name,callback:function(e){t.pl_name=e},expression:"pl_name"}},t._l(t.plnamearr,function(t){return s("el-option",{key:t.pl_name,attrs:{label:t.pl_name,value:t.pl_name}})}))],1)]),t._v(" "),s("div",{staticClass:"article-author fl clearfix search-item"},[t._m(2),t._v(" "),s("div",{staticClass:"fl"},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.sendTarget,callback:function(e){t.sendTarget=e},expression:"sendTarget"}},t._l(t.sendTargetOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),s("div",{staticClass:"article-author fl clearfix search-item"},[t._m(3),t._v(" "),s("div",{staticClass:"fl"},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.sendStatues,callback:function(e){t.sendStatues=e},expression:"sendStatues"}},t._l(t.businessStatusOption,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),s("div",{staticClass:"search-btn fl of-btn-bd-search",on:{click:t.search}},[t._v("搜索")])]),t._v(" "),s("div",{staticClass:"table-content change-default"},[s("el-table",{ref:"systemTable",attrs:{data:t.list,stripe:""},on:{"selection-change":t.handleSelectionChange,"sort-change":t.sort}},[s("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"200",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"message-title agent-name",on:{click:function(s){t.goToDetail(e.row)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"send_type",label:"发送对象","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.send_type_str))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"send_time",label:"发送时间","min-width":"80",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"adjust-center"},[t._v(t._s(e.row.send_time))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"send_name",label:"发送人","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.send_name?s("span",[t._v(t._s(e.row.send_name))]):s("span",[t._v("--")])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"business_status",label:"对象状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.business_status===t.AgentBusinessStatus.DURING?s("span",{staticClass:"color-green"},[t._v(" "+t._s(e.row.business_status_str))]):t._e(),t._v(" "),e.row.business_status===t.AgentBusinessStatus.NO?s("span",{staticClass:"color-bule"},[t._v(" "+t._s(e.row.business_status_str))]):t._e(),t._v(" "),e.row.business_status===t.AgentBusinessStatus.SUC?s("span",[t._v(t._s(e.row.business_status_str)+" ")]):t._e(),t._v(" "),e.row.business_status===t.AgentBusinessStatus.FAIL?s("span",{staticClass:"color-red"},[t._v(" "+t._s(e.row.business_status_str))]):t._e(),t._v(" "),4===e.row.business_status?s("span",[t._v(" 全部认证 ")]):t._e()]}}])}),t._v(" "),s("el-table-column",{staticClass:"change-color",attrs:{prop:"ctime",label:"操作","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"editor-btn message-title",on:{mouseenter:function(s){t.changeColor(e.row)},mouseleave:function(s){t.changeColortwo(e.row)},click:function(s){t.opendetOperateDialog(e.row.news_id)}}},[s("img",{attrs:{src:e.row.imgsrc,alt:""}})])]}}])})],1),t._v(" "),t.isListEmpty?s("empty-table",{attrs:{type:t.emptyType}}):t._e()],1),t._v(" "),s("div",{staticClass:"pagination-content change-pagination-default"},[s("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),s("el-dialog",{staticClass:"nopadding operate-dialog",attrs:{visible:t.detOperateDialog,width:"520px",top:"35vh",center:""},on:{"update:visible":function(e){t.detOperateDialog=e}}},[s("div",{staticClass:"head-nav"},[s("span",[t._v("提示消息")])]),t._v(" "),s("div",{staticClass:"operate-content"},[s("span",{staticClass:"delet-img"}),t._v(" "),s("span",{staticClass:"delet-text"},[t._v("确定要删除该消息？")])]),t._v(" "),s("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"btn-Dialogok of-btn-bd-b-blue ",on:{click:t.delOPerateOk}},[t._v("确认")]),t._v(" "),s("div",{staticClass:"save-m-gradient btn-Dialogcancel",on:{click:t.hidedetOperateDialog}},[t._v("取消")])])]),t._v(" "),s("el-dialog",{staticClass:"nopadding change-tip-dialog",attrs:{visible:t.TipDialog,width:"500px",top:"35vh",center:""},on:{"update:visible":function(e){t.TipDialog=e}}},[s("div",{staticClass:"change-tip-content"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:t.TipImg}})]),t._v(" "),s("div",{staticClass:"text"},[s("span",[t._v(t._s(t.TipText))])])]),t._v(" "),s("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"btn-tip",on:{click:t.hideTipSuc}},[t._v("知道了")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-own-bar"},[e("span",{staticClass:"cant-click-nav"},[this._v("消息管理")]),this._v("\n      >\n      "),e("span",{staticClass:"current-nav"},[this._v("公告管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("发送人")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("发送对象")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("对象状态")])])}]};var _=s("C7Lr")(m,h,!1,function(t){s("GqA8"),s("r6La")},"data-v-c4d2cdf8",null);e.default=_.exports}});