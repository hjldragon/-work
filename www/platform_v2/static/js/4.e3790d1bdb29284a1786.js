webpackJsonp([4,42,72,73],{"310t":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("aA9S"),s=i.n(a),n=i("4YfN"),l=i.n(n),r=i("9rMa"),o=(i("EuEE"),i("r2UX")),d=i("6nXL"),c=i("P9l9"),p=i("a2vD"),h=i("N6PA"),f={data:function(){return{emptyType:1,agentId:p.a.getAgentid(),isEdit:!1,posiData:[],row:{},role_name:null,role_name_err:!1,pl_po_id:null,pl_po_id_err:!1,editDialog:!1,pl_role_id:null,list:[],IsEdit:d.t,total:10,listQuery:{page:1,limit:10}}},created:function(){this.getList(),this.getPositionList()},components:{EmptyTable:o.a},computed:l()({role_title:function(){return this.isEdit?"编辑角色":"新增角色"}},Object(r.d)({ACS:function(t){return t.perimission.sysPermis},PL_K:function(t){return t.perimission.PL_K}})),methods:{getList:function(){var t=this;if(this.ACS[this.PL_K.ROLE_LIST_SEE]){var e={get_pl_role_list:1,page_size:this.listQuery.limit,page_no:this.listQuery.page};Object(c.U)(e).then(function(e){0===e.ret?(t.list=e.data.list,t.listQuery.page>1&&0===t.list.length&&(t.listQuery.page--,t.getList()),t.total=e.data.total):t.$slnotify({message:d.N.toString(e.ret)})})}},getPositionList:function(){var t=this;Object(c.S)({get_pl_position_list:1,page_size:1e5,page_no:1}).then(function(e){0===e.ret?t.posiData=e.data.position_list||[]:t.$slnotify({message:d.N.toString(e.ret)})})},select_posi:function(t){this.pl_po_id_err=!1,this.pl_po_id=t.pl_position_id},handleSave:function(){var t=this;if(this.checkrole_name()&&this.checkpl_id()){var e={save_pl_role:1,role_name:this.role_name,pl_position_id:this.pl_po_id};this.row.pl_role_id&&(e.pl_role_id=this.row.pl_role_id),console.log("保存=>",e),Object(c.V)(e).then(function(e){0==e.ret?(t.$slnotify({message:"保存成功",duration:1500}),t.getList(),t.clearClose()):t.$slnotify({message:d.N.toString(e.ret),duration:1500})})}},clearTip:function(){this.role_name_err=!1,this.pl_po_id_err=!1},addRole:function(){this.ACS[this.PL_K.ADD_ROLE]?(this.row={},this.role_name="",this.pl_po_id=null,this.editDialog=!0,this.isEdit=!1):this.$slnotify({message:"操作权限不足"})},edit:function(t){if(this.ACS[this.PL_K.EDIT_ROLE]){this.isEdit=!0;var e=s()({},t);this.row=e,this.role_name=this.row.role_name,this.pl_po_id=this.row.pl_position_id,this.editDialog=!0}else this.$slnotify({message:"操作权限不足"})},handleDelete:function(t){var e=this;if(this.ACS[this.PL_K.DEL_ROLE]){s()({},t);this.row=t;var i={delete_pl_role:1,pl_role_id:this.row.pl_role_id};Object(c.V)(i).then(function(t){0==t.ret?(e.$slnotify({message:"删除成功",duration:1500}),e.getList()):-30039===t.ret?e.$slnotify({message:"该角色已经被员工使用，不可删除"}):e.$slnotify({message:d.N.toString(t.ret),duration:1500})})}else this.$slnotify({message:"操作权限不足"})},clearClose:function(){this.editDialog=!1,this.row={},this.role_name="",this.pl_po_id=null,this.pl_role_id=null},checkrole_name:function(){var t=this.role_name,e=!h.a.isEmpty(t);return(!e||t.trim().indexOf(" ")>=0)&&(this.role_name_err=!0,e=!1),e},checkpl_id:function(){var t=this.pl_po_id,e=!h.a.isEmpty(t);return(!e||t.trim().indexOf(" ")>=0)&&(this.pl_po_id_err=!0,e=!1),e},handleSizeChange:function(t){this.listQuery.limit=t,this.listQuery.page=1,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()}},mounted:function(){this.$refs.manageGoodsListTableAdjust.$refs.bodyWrapper.style.minHeight="437px"}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"change-default rankTableOfficial role-box"},[i("div",{staticClass:"change-titlerr rank-title rank-title-official"},[i("span",[t._v("角色列表")]),t._v(" "),i("span",{staticClass:"fr add-btn",on:{click:t.addRole}},[i("span",{staticClass:"add-btn-blue"}),t._v("\n      新增角色\n    ")])]),t._v(" "),i("div",{staticClass:"table-official"},[i("el-table",{ref:"manageGoodsListTableAdjust",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"角色","min-width":"50%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.role_name)+"\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"20%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"text-blue btn-oprate-blue",attrs:{type:"text"},on:{click:function(i){t.edit(e.row)}}},[t._v("编辑\n          ")]),t._v(" "),e.row.entry_type!==t.IsEdit.YES?i("span",{staticClass:"text-red btn-oprate-red table-btn",attrs:{type:"text"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除\n          ")]):t._e()]}}])})],1),t._v(" "),t.list&&0!==t.list.length?t._e():i("empty-table",{attrs:{type:t.emptyType}})],1),t._v(" "),i("div",{staticClass:"pagination-content change-pagination-default",attrs:{slot:"pagination"},slot:"pagination"},[i("el-pagination",{staticClass:"sl-pagination page-el",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),i("el-dialog",{attrs:{visible:t.editDialog,"close-on-click-modal":!1,top:"22vh",width:"540px"},on:{"update:visible":function(e){t.editDialog=e},close:t.clearClose}},[i("div",[i("div",{staticClass:"head-nav"},[i("span",[t._v(t._s(t.role_title))])]),t._v(" "),i("div",{staticClass:"form-item"},[i("div",{staticClass:"form-label"},[i("span",{staticClass:"sl-must"}),t._v(" 角色名称\n        ")]),t._v(" "),i("div",{staticClass:"form-input"},[i("el-input",{class:{"border-redtip":t.role_name_err},attrs:{placeholder:"请输入"},on:{blur:t.checkrole_name},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.role_name,callback:function(e){t.role_name=e},expression:"role_name"}}),t._v(" "),t.role_name_err?i("div",{staticClass:"errtip"},[i("span",[t._v("请输入角色名称")])]):t._e()],1)]),t._v(" "),i("div",{staticClass:"form-item"},[i("div",{staticClass:"form-label"},[i("span",{staticClass:"sl-must"}),t._v(" 职级分配\n        ")]),t._v(" "),i("div",{staticClass:"form-input cleafix"},[t._l(t.posiData,function(e){return i("span",{key:e.pl_position_id,staticClass:"select-po fl",class:{active:t.pl_po_id===e.pl_position_id},on:{click:function(i){t.select_posi(e)}}},[t._v("\n            "+t._s(e.pl_position_name)+"\n          ")])}),t._v(" "),t.pl_po_id_err?i("div",{staticClass:"errtip"},[i("span",[t._v("请选择关联职位")])]):t._e()],2)]),t._v(" "),i("div",{staticClass:"foot-btn-box"},[i("div",{staticClass:"btn of-btn-bd-m-blue",on:{click:t.clearClose}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"btn save-s-gradient",on:{click:t.handleSave}},[t._v("保存")])])])])],1)},staticRenderFns:[]};var u=i("C7Lr")(f,m,!1,function(t){i("c6cs"),i("mjGE"),i("W8XM")},"data-v-0338844f",null);e.default=u.exports},"3sWp":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAAAXNSR0IArs4c6QAAAjlJREFUOBGlVDFvE1EMtl+uUgsXCbHRtQgSCRBDfwcqSLD1xARrgigTQwYmimhWGCqUCAaQSn8IQ4EhDaIrM1IPKKSN+ey7d3kkOTiJN5z97M/2O7/vmQjrMGkPVbIqTPSTSBqQ8Ky3RKWtNGm/jNL11kfsJIL9EonQLA5up9gsavLNkfduEo2346XmWX5+d8R/lAC4xnwj0iBm1kq2TkR2zCgil71RpQNqMzTU+122QtLpuPTg60no9LoGxb2tByhup3ntHWUStcfbSCtxv+vmgdLk/hWR4/csd54tpD8Gv+aBChvTgZ1RDd+T9nX9vcKpCgD1Xvd8puYezfztaP8FWnANzflCwg/r/advcnd2Eej7YwA2vDGU8cqZGnc6Y6cly0Aa4Ns2czdhtonubuX3RSOcfH/iyDURNrKwPDIgUbQa9558mAHCAHqNAT5XqTSu8ZXTXs3LFNpOLzZuO9/Q0BHqSgpjpDceJq3PJLTi9yqVnad6W29VL65QN7rsKkk2p4Myb/DFkWvEGz6R9xQJ/3aLHlwmPbfVn7HxaDD454nKsnk7ThwvNptOCfjfyTQp+qq5ImMz9vq4iKOrZcTwB5mW+vBIjvdAGtZcNsMwly4oEJNghLRDKPBXWKAqohqC+WZo5k+RvjMczmYE5t0CHDb4KqTLIUFt5LJbnvvqq2c0pOeiDSTlkj3wqXlYJadRBsPB87HgYRicDbbhGlq5hh9aRY+XzY9RhIB3aN1uvHRxV59QGKf6b51q83z8B/65AAAAAElFTkSuQmCC"},"7XgO":function(t,e,i){"use strict";(function(t){var a=i("4YfN"),s=i.n(a),n=i("9rMa"),l=i("CW5y"),r=i("6nXL"),o=i("b3Sk"),d=i("n3mA"),c=i("310t"),p=i("wR+7"),h=i("a2vD"),f=i("N6PA"),m=i("p0I3"),u=i("o1Lc"),_=i("IvJb"),g=i("EuEE"),v=i("P9l9");e.a={data:function(){return{isHighlight:!0,staffBoxTitle:"新增员工",labelPosition:"left",agentId:h.a.getAgentid(),activeIndex:"1",height:0,boxTop:"25vh",treeData:[{label:"部门管理",children:[]}],staffList:[],listUrl:"/agent/area/organize",detailUrl:"/areaagent/editStaffDetail",deleteDialogVisible:!1,delDepartDialogVisible:!1,delPOsitionDialogVisible:!1,editDialogVisible:!1,addNewDepart:!1,editStaffVisible:!1,isAddNew:!1,dia_title:"编辑",departName:"",departmentId:"0",staffForm:{is_freeze:0,platformer_num:"",pl_name:"",department_name:"",phone:"",password:"",remark:"",position_name:"",pl_role_id:""},positionArr:[],departmentArr:[],rankData:[],defaultProps:{label:"label",children:"children"},form:{name:""},rules:{name:[{validator:function(t,e,i){""===e?i(new Error("请输入部门名称")):e&&e.length>6?i(new Error("部门名称不能超过6个字")):!1===/^[^ ]+$/.test(e)?i(new Error("部门名称不能包含空格符")):i()},trigger:"change,input,click"}]},staffInfoRules:{platformer_num:[{required:!0,message:"请输入员工编号",trigger:"input"}],pl_name:[{required:!0,message:"请输入姓名",trigger:"input"}],pl_role_id:[{required:!0,message:"请选择角色",trigger:"change"}],department_name:[{required:!0,message:"请选择部门",trigger:"change"}],phone:[{required:!0,validator:function(t,e,i){var a=f.b.isTelePhone(e);return e?a?void i():i(new Error("请输入合法的电话号码")):i(new Error("请输入电话号码"))},trigger:"input"}],password:[{required:!0,validator:function(t,e,i){var a=f.b.isPassWord(e);""===e?i(new Error("请输入密码")):(a||i(new Error("密码格式必须是字母、数字，不能使用特殊字符，长度在6-16之间")),i())},trigger:"change,blur"}],is_freeze:[{required:!0,message:"请选择账号状态",trigger:"change"}]},statusOptions:[{label:r.v.toString(r.v.NO),idx:r.v.NO},{label:r.v.toString(r.v.YES),idx:r.v.YES}],AgentIsFreeze:r.b,sucTipText:"",operateStatus:"",operateFreezeData:{},operateDeleteData:{},operatePositionData:{},treeDepart_id:"",listQuery:{page:1,limit:10},listQueryp:{page:1,limit:10},total:10,totalPosition:10,depart_id:0,newName:"",newDpaId:"",choosedDepartId:"",choosedDepartName:"",sucTipImg:i("XyEv"),treeDataNew:[],clickData:null,isIniData:!0,treeDataById:null}},components:{staffTable:o.default,rankTable:d.default,ZTree:m.a,roleTable:c.default},computed:s()({},Object(n.d)({ACS:function(t){return t.perimission.sysPermis},PL_K:function(t){return t.perimission.PL_K}}),{isExpendDepart:function(){return!!this.ACS[this.PL_K.DEPARTMENT_SEE]}}),mounted:function(){var e=this,i=document.documentElement.clientWidth;this.boxTop=g.a.changeDialogTop("25vh","10vh","3vh",i),t(window).resize(function(){i=document.documentElement.clientWidth,e.boxTop=g.a.changeDialogTop("25vh","10vh","3vh",i)})},created:function(){var e=this;this.height=document.documentElement.clientHeight-359+"px",t(window).resize(function(){e.height=document.documentElement.clientHeight-359+"px"}),this.listQuery.limit=l.a.get(this.$route),this.treeInfoMethods(),void 0!==this.$route.query.choosedDepartId&&""!==this.$route.query.choosedDepartId?(this.choosedDepartId=this.$route.query.choosedDepartId,this.choosedDepartName=this.$route.query.choosedDepartName,this.depart_id=this.$route.query.choosedDepartId,this.getStaffList()):(this.$nextTick(function(){e.departmentId="0",u.c.changeSelecte(e.departmentId,e.treeDataById)}),this.getStaffList()),this.ACS[this.PL_K.PLATFORM_LIST]?this.activeIndex="1":this.ACS[this.PL_K.ROLE_LIST_SEE]?this.activeIndex="3":this.ACS[this.PL_K.POSITION_LIST]&&(this.activeIndex="2"),this.$route.query.activIndex?this.activeIndex=this.$route.query.activIndex:!this.$route.query.activIndex&&this.ACS[this.PL_K.PLATFORM_LIST]&&(this.activeIndex="1"),this.getPositionList()},methods:{handleSelect:function(t){var e=this;this.activeIndex=t,this.searchName="",this.searchStatus="",this.activeIndex=t,"1"===t&&this.$nextTick(function(){e.departmentId="0",e.depart_id=e.departmentId,u.c.changeSelecte(e.departmentId,e.treeDataById),e.getStaffList()}),"2"===t&&(this.listQueryp.page=1,this.getPositionList()),this.listQuery.page=1},getDepartPosiArr:function(){this.departmentArr=Object(u.a)(),this.positionArr=Object(u.b)()},changeDepart:function(){this.staffForm.pl_department_id=this.staffForm.department_name},changePosition:function(){this.staffForm.pl_position_id=this.staffForm.position_name},freezeOk:function(){var t=this,e={platformer_freeze:1,platformer_id:this.operateFreezeData.platformer_id,is_freeze:this.operateStatus};Object(v.Z)(e).then(function(e){0===e.ret?(t.operateStatus!==t.AgentIsFreeze.NO?t.$freezenotify({message:"已成功冻结 !"}):t.$freezenotify({message:"已成功启用 !"}),t.getStaffList(),t.isFreezeMethods=!1):t.$slnotify({message:r.N.toString(e.ret)})})},hideReezeDialogHandle:function(){this.deleteDialogVisible=!1,this.deleteDialogVisible=!1,this.editDialogVisible=!1,this.addNewDepart=!1,this.delPOsitionDialogVisible=!1,this.$refs.staffForm&&this.$refs.staffForm.resetFields()},hideDepartDialogHandle:function(){this.deleteDialogVisible=!1,this.deleteDialogVisible=!1,this.editDialogVisible=!1,this.addNewDepart=!1,this.delPOsitionDialogVisible=!1,this.$refs.form&&this.$refs.form.resetFields()},handleModifyStatus:function(t){t.status!==this.AgentIsFreeze.NO?this.ACS[this.PL_K.FREEZE_PLATFORME]?(this.operateFreezeData=t.row,this.operateStatus=t.status,this.freezeOk()):this.$slnotify({message:"操作权限不足"}):this.ACS[this.PL_K.START_PLATFORME]?(this.operateFreezeData=t.row,this.operateStatus=t.status,this.freezeOk()):this.$slnotify({message:"操作权限不足"})},handleDeleteBtn:function(t){this.ACS[this.PL_K.DEL_PLATFORME]?(this.deleteDialogVisible=!0,this.operateDeleteData=t):this.$slnotify({message:"操作权限不足"})},handelEditBtn:function(t){var e=this;if(this.ACS[this.PL_K.EDIT_PLATFORME]){this.staffBoxTitle="编辑员工信息",this.editStaffVisible=!0,this.isAddNew=!1;var i={get_platformer_info:1,platformer_id:t.platformer_id};Object(v.Y)(i).then(function(t){0===t.ret?(e.staffForm=t.data.platformer,e.getDepartPosiArr()):e.$slnotify({message:r.N.toString(t.ret)})})}else this.$slnotify({message:"操作权限不足"})},addNewStaff:function(){this.ACS[this.PL_K.ADD_PLATFORMER]?(this.staffBoxTitle="新增员工",this.isAddNew=!0,this.editStaffVisible=!0,this.getDepartPosiArr(),this.staffForm.platformer_num="",this.staffForm.pl_name="",this.staffForm.department_name="",this.staffForm.pl_role_id="",this.staffForm.phone="",this.staffForm.password="",this.staffForm.remark=""):this.$slnotify({message:"操作权限不足"})},saveStaffInfo:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var i={platformer_save:1,pl_name:e.staffForm.pl_name,phone:e.staffForm.phone,password:e.staffForm.password,remark:e.staffForm.remark,pl_role_id:e.staffForm.pl_role_id,pl_department_id:e.staffForm.pl_department_id,platformer_num:e.staffForm.platformer_num,is_freeze:e.staffForm.is_freeze};e.staffForm.platformer_id&&(i.platformer_id=e.staffForm.platformer_id),console.log("保存参数=>",i),Object(v.Z)(i).then(function(t){0===t.ret?(e.editStaffVisible=!1,e.$refs.staffForm.resetFields(),e.departmentId?(e.depart_id=e.departmentId,e.getStaffList()):e.getStaffList()):e.$slnotify({message:r.N.toString(t.ret)})})})},deleteOk:function(){var t=this;this.deleteDialogVisible=!1;var e={platformer_del:1,platformer_id:this.operateDeleteData.platformer_id};Object(v.Z)(e).then(function(e){0===e.ret?(t.$slnotify({message:"删除成功"}),t.getStaffList()):t.$slnotify({message:r.N.toString(e.ret)})})},hideDeleteDialog:function(){var t=this;this.deleteDialogVisible=!1,this.deleteDialogVisible=!1,this.editDialogVisible=!1,this.addNewDepart=!1,this.delPOsitionDialogVisible=!1,this.$refs.form&&this.$refs.form.resetFields(),this.newName||(this.newName=this.treeData[0].label,this.departmentId="0"),this.$nextTick(function(){u.c.changeSelecte(t.departmentId,t.treeDataById)}),this.isHighlight=!0},deleteDepartOk:function(){var t=this,e={pl_department_del:1,pl_department_id:this.departmentId};Object(v.y)(e).then(function(e){0===e.ret?(t.$slnotify({message:"删除成功"}),t.newName="",t.depart_id="",t.choosedDepartId="",t.choosedDepartName="",t.departmentId="0",t.treeInfoMethods(),t.clickData=t.treeData[0],t.getStaffList()):-30033===e.ret?(t.$slnotify({message:"该条目下包含数据，不能被删除"}),t.newName=t.treeNodeKey,t.depart_id=t.departmentId,t.getStaffList()):t.$slnotify({message:r.N.toString(e.ret)}),t.deleteDialogVisible=!1,t.delDepartDialogVisible=!1})},editPosition:function(t){this.ACS[this.PL_K.EDIT_POSITION]?(!t&&(t={}),this.$router.push({path:"/officialmanage/editPositiDetail",query:{position_id:t.pl_position_id}})):this.$slnotify({message:"操作权限不足"})},deletePosition:function(t){this.ACS[this.PL_K.DEL_POSITION]?(this.operatePositionData=t,this.delPOsitionDialogVisible=!0,this.getPositionList()):this.$slnotify({message:"操作权限不足"})},deletePosiOk:function(){var t=this,e={del_pl_position:1,pl_position_id:this.operatePositionData.pl_position_id};Object(v.T)(e).then(function(e){0===e.ret?(t.$slnotify({message:"删除成功"}),t.getPositionList()):t.$slnotify({message:r.N.toString(e.ret)})}),this.delPOsitionDialogVisible=!1},addPsition:function(){this.ACS[this.PL_K.ADD_POSITION]?this.$router.push("/officialmanage/editPositiDetail"):this.$slnotify({message:"操作权限不足"})},hidePosiDialog:function(){this.delPOsitionDialogVisible=!1},checkInput:function(t){var e=this;this.form.name&&(this.newName=this.form.name),!0===this.repeat&&(this.repeatName=!1),this.$refs[t].validate(function(t){e.isCantClick=!t})},editOk:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.editDialogVisible=!1;var i={pl_department_save:1,pl_department_name:t.form.name,pl_department_id:t.departmentId};t.newName=t.form.name,t.form.name===t.departName?t.hideDeleteDialog():Object(v.y)(i).then(function(e){0===e.ret?(t.depart_id=e.data.pl_department_id,t.getStaffList(),t.$slnotify({message:"修改成功"}),t.treeInfoMethods()):-20034===e.ret?t.$slnotify({message:"该部门已存在"}):t.$slnotify({message:r.N.toString(e.ret)})})})},addOk:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.addNewDepart=!1;var i={pl_department_save:1,pl_department_name:t.form.name};t.newName=t.form.name,Object(v.y)(i).then(function(e){0===e.ret?(t.editDialogVisible=!1,t.$slnotify({message:"新建成功"}),t.newName=t.form.name,t.departmentId=e.data.pl_department_id,t.depart_id=t.departmentId,t.getStaffList(),t.treeInfoMethods()):-20034===e.ret?(t.addNewDepart=!0,t.form.name="",t.$slnotify({message:"该部门已存在"})):t.$slnotify({message:r.N.toString(e.ret)})})})},searchMethods:function(t){this.listQuery.page=1,this.searchName=t.name,this.searchStatus=t.status,this.getStaffList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getStaffList()},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getStaffList()},handleCurrentChangeP:function(t){this.listQueryp.page=t,this.getPositionList()},handleSizeChangeP:function(t){this.listQueryp.page=1,this.listQueryp.limit=t,l.a.set(this.$route,t),this.getPositionList()},treeInfoMethods:function(){var t=this;if(this.isExpendDepart){this.treeData[0].children=[];Object(v.x)({get_pl_department_list:1,page_size:1e5,page_no:1}).then(function(e){if(0===e.ret){var i=e.data.pl_department_list,a=[];i&&i.length>0&&i.forEach(function(t){var e={};e.label=t.pl_department_name,e.pl_department_id=t.pl_department_id,a.push(e)});var s=e.data.pl_department_list,n=u.c.addTitleToTree(s);_.default.set(t.treeDataNew,0,n),u.c.generateKey(t.treeDataNew,0),u.c.initTreeData(t.treeDataNew),u.c.selectIcon(t.treeDataNew),t.departNameArr=u.c.saveDepartName(t.treeDataNew),t.treeDataByIds(),u.c.changeSelecte(t.departmentId,t.treeDataById)}else t.$slnotify({message:r.N.toString(e.ret)})})}else this.$nextTick(function(){t.newName||(t.newName=t.treeData[0].label,t.departmentId="0"),u.c.changeSelecte(t.departmentId,t.treeDataById)})},getStaffTree:function(){var t=this;if(this.isExpendDepart){this.treeData[0].children=[];Object(v.x)({get_pl_department_list:1,page_size:1e5,page_no:1}).then(function(e){if(0===e.ret){var i=e.data.pl_department_list,a=[];i&&i.length>0&&i.forEach(function(t){var e={};e.label=t.pl_department_name,e.pl_department_id=t.pl_department_id,a.push(e)}),t.treeData[0].children=a,t.$nextTick(function(){t.newName||(t.newName=t.treeData[0].label,t.departmentId="0"),u.c.changeSelecte(t.departmentId,t.treeDataById)})}else t.$slnotify({message:r.N.toString(e.ret)})})}else this.$nextTick(function(){t.newName||(t.newName=t.treeData[0].label,t.departmentId="0"),u.c.changeSelecte(t.departmentId,t.treeDataById)})},getStaffList:function(){var t=this;if(this.ACS[this.PL_K.PLATFORM_LIST]){this.searchStatus!==r.b.NO&&this.searchStatus!==r.b.YES&&(this.searchStatus="");var e={get_platformer_list:1,page_size:this.listQuery.limit,page_no:this.listQuery.page};this.searchName&&(e.real_name=this.searchName),(this.searchStatus||0===this.searchStatus)&&(e.is_freeze=this.searchStatus),this.isSort&&(e.sort_name=this.sortLabel,e.desc=this.sortOrder),this.depart_id&&(e.pl_department_id=this.depart_id),Object(v.Y)(e).then(function(e){0===e.ret?(t.listQuery.page>1&&0===e.data.platformer_list.length&&(t.listQuery.page--,t.getStaffList()),e.data.platformer_list&&e.data.platformer_list.length>0?(t.staffList=e.data.platformer_list,t.isListEmpty=!1,t.total=e.data.total):(t.staffList=[],t.total=0,t.isListEmpty=!0,!0===t.isSearch?t.searchNone=!0:t.searchNone=!1)):t.$slnotify({message:r.N.toString(e.ret)})})}},getDepartStaff:function(t){var e=this;if(this.ACS[this.PL_K.PLATFORM_LIST]){this.searchName="",this.searchStatus="";var i={get_department_platformer:1,pl_department_id:t};Object(v.x)(i).then(function(t){0===t.ret?t.data.platformer_list&&t.data.platformer_list.length>0?(e.staffList=t.data.platformer_list,e.total=e.staffList.length):(e.staffList=[],e.total=10):e.$slnotify({message:r.N.toString(t.ret)})})}},getPositionList:function(){var t=this;if(this.ACS[this.PL_K.POSITION_LIST]){var e={get_pl_position_list:1,page_size:this.listQueryp.limit,page_no:this.listQueryp.page};Object(v.S)(e).then(function(e){0===e.ret?(t.rankData=e.data.position_list,t.listQueryp.page>1&&0===t.rankData.length&&(t.listQueryp.page--,t.getPositionList()),t.totalPosition=e.data.total):t.$slnotify({message:r.N.toString(e.ret)})})}},currentChange:function(){this.isHighlight=!0},nodeExpand:function(t,e){this.isHighlight=!0;e.key;this.isSearch=!1,this.listQuery.page=1,this.choosedDepartId=e.data.pl_department_id,e.childNodes&&0===e.childNodes.length?(this.depart_id=e.data.pl_department_id,this.getStaffList(),this.choosedDepartId=e.data.pl_department_id):(this.choosedDepartId="",this.searchName="",this.searchStatus="",this.getStaffList())},handleNodeClick:function(t,e){this.isHighlight=!0,this.isSearch=!1,this.listQuery.page=1,this.newName=e.key,this.depart_id=t.pl_department_id,this.treeNodeKey=e.key,e.childNodes&&0===e.childNodes.length?this.ACS[this.PL_K.DEPARTMENT_SEE]?(this.getStaffList(),this.choosedDepartId=t.pl_department_id,this.choosedDepartName=e.key):this.$slnotify({message:"操作权限不足"}):(this.$router.replace("/official/system/organization"),this.choosedDepartId="",this.choosedDepartName="",this.getStaffList())},renderContent:function(t,e){var i=e.node,a=e.data,s=e.store,n=this;return t(p.a,{props:{DATA:a,NODE:i,STORE:s},on:{nodeAdd:function(t,e,i){return n.handleAdd(t,e,i)},nodeEdit:function(t,e,i){return n.handleEdit(t,e,i)},nodeDel:function(t,e,i){return n.handleDelete(t,e,i)}}})},handleAdd:function(t,e,i){this.ACS[this.PL_K.ADD_DEPARTMENT]?(i.expanded||(i.expanded=!0),this.form.name="",this.clickData=null,this.isIniData=!1,this.dia_title="新增",this.editDialogVisible=!0,this.addNewDepart=!0,this.departmentName="",this.departmentId=""):this.$slnotify({message:"操作权限不足"})},handleEdit:function(t,e,i){this.ACS[this.PL_K.EDIT_DEPARTMENT]?(this.dia_title="编辑",this.suOrfa=!0,this.departmentName=i.data.label,this.departmentId=i.data.pl_department_id,this.isIniData=!1,this.editDialogVisible=!0,this.form.name=i.data.label,this.departName=i.data.label,this.depart_id=i.data.pl_department_id,this.choosedDepartId=i.data.pl_department_id,this.clickData=i.data):this.$slnotify({message:"操作权限不足"})},handleDelete:function(t,e,i){this.ACS[this.PL_K.DEL_DEPARTMENT]?(this.treeNodeKey=i.data.label,this.isIniData=!1,this.deleteDialogVisible=!0,this.delDepartDialogVisible=!0,this.form.name=i.data.label,this.departmentId=i.data.pl_department_id,this.choosedDepartId=i.data.pl_department_id,this.clickData=i.data):this.$slnotify({message:"操作权限不足"})},treeDataByIds:function(){this.treeDataById=u.c.treeDataById(this.treeDataNew)},selectNodeActive:function(t){this.clickData=t,this.departmentId=t.pl_department_id,u.c.changeSelecte(this.departmentId,this.treeDataById),this.isSearch=!1,this.listQuery.page=1,this.newName=t.pl_department_name,this.depart_id=t.pl_department_id,t.pl_department_id&&0!==t.pl_department_id?this.ACS[this.PL_K.DEPARTMENT_SEE]?(this.getStaffList(),this.choosedDepartId=t.pl_department_id,this.choosedDepartName=t.pl_department_name):this.$slnotify({message:"操作权限不足"}):(this.$router.replace("/official/system/organization"),this.choosedDepartId="",this.choosedDepartName="",this.getStaffList())},addCategorys:function(t){this.departmentId=t.pl_department_id,u.c.changeSelecte(this.departmentId,this.treeDataById),this.ACS[this.PL_K.ADD_DEPARTMENT]?(this.form.name="",this.clickData=null,this.isIniData=!1,this.dia_title="新增",this.editDialogVisible=!0,this.addNewDepart=!0,this.departmentName=""):this.$slnotify({message:"操作权限不足"})},deleteCategorys:function(t){this.ACS[this.PL_K.DEL_DEPARTMENT]?(this.isIniData=!1,this.deleteDialogVisible=!0,this.delDepartDialogVisible=!0,this.form.name=t.pl_department_name,this.departmentId=t.pl_department_id,this.choosedDepartId=t.pl_department_id,this.clickData=t):this.$slnotify({message:"操作权限不足"})},openEditorDialog:function(t){this.ACS[this.PL_K.EDIT_DEPARTMENT]?(this.dia_title="编辑",this.suOrfa=!0,this.departmentName=t.pl_department_name,this.departmentId=t.pl_department_id,this.isIniData=!1,this.editDialogVisible=!0,this.form.name=t.pl_department_name,this.departName=t.pl_department_name,this.depart_id=t.pl_department_id,this.choosedDepartId=t.pl_department_id,this.clickData=t):this.$slnotify({message:"操作权限不足"})}}}}).call(e,i("L7Pj"))},FdCx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7XgO"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"organization-official"}},[t._m(0),t._v(" "),i("div",{staticClass:"titlebar"},[i("el-menu",{attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[t.ACS[t.PL_K.PLATFORM_LIST]?i("el-menu-item",{attrs:{index:"1"}},[t._v("员工管理")]):t._e(),t._v(" "),t.ACS[t.PL_K.ROLE_LIST_SEE]?i("el-menu-item",{attrs:{index:"3"}},[t._v("角色管理")]):t._e(),t._v(" "),t.ACS[t.PL_K.POSITION_LIST]?i("el-menu-item",{attrs:{index:"2"}},[t._v("职位管理")]):t._e()],1)],1),t._v(" "),"1"===t.activeIndex?i("div",{staticClass:"tree-render staff-tree"},[t._m(1),t._v(" "),i("z-tree",{ref:"tree",attrs:{isStaff:!0,treeData:t.treeDataNew},on:{"node-click":t.selectNodeActive,"delete-category":t.deleteCategorys,"editor-category":t.openEditorDialog,"add-category":t.addCategorys}})],1):t._e(),t._v(" "),i("div",{staticClass:"table-list"},["1"===t.activeIndex?i("staff-table",{attrs:{staffList:t.staffList,total:t.total},on:{handleModifyStatus:t.handleModifyStatus,handleDeleteBtn:t.handleDeleteBtn,handelEditBtn:t.handelEditBtn,searchMethods:t.searchMethods,addNewStaff:t.addNewStaff,handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}}):t._e(),t._v(" "),"3"===t.activeIndex?i("role-table"):t._e(),t._v(" "),"2"===t.activeIndex?i("rank-table",{attrs:{rankData:t.rankData,totalPosition:t.totalPosition},on:{edit:t.editPosition,delete:t.deletePosition,addPsition:t.addPsition,handleCurrentChange:t.handleCurrentChangeP,handleSizeChange:t.handleSizeChangeP}}):t._e()],1),t._v(" "),i("el-dialog",{staticClass:"nopadding edit-staff-dialog",attrs:{visible:t.editStaffVisible,width:"535px",top:t.boxTop,center:""},on:{"update:visible":function(e){t.editStaffVisible=e},close:t.hideReezeDialogHandle}},[i("div",{staticClass:"head-nav"},[i("span",[t._v(t._s(t.staffBoxTitle))])]),t._v(" "),i("el-form",{ref:"staffForm",staticClass:"staff-info-form",attrs:{"label-position":t.labelPosition,model:t.staffForm,"label-width":"80px",rules:t.staffInfoRules}},[t.isAddNew?i("el-form-item",{staticClass:"employee-num",attrs:{label:"员工编号",prop:"platformer_num"}},[i("el-input",{attrs:{placeholder:"请输入员工编号"},model:{value:t.staffForm.platformer_num,callback:function(e){t.$set(t.staffForm,"platformer_num",e)},expression:"staffForm.platformer_num"}})],1):i("el-form-item",{staticClass:"employee-num",attrs:{label:"员工编号"}},[i("span",[t._v(t._s(t.staffForm.platformer_num))])]),t._v(" "),i("el-form-item",{attrs:{label:"姓名",prop:"pl_name"}},[i("el-input",{attrs:{placeholder:"请输入员工姓名"},model:{value:t.staffForm.pl_name,callback:function(e){t.$set(t.staffForm,"pl_name",e)},expression:"staffForm.pl_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"部门",prop:"department_name"}},[i("el-select",{attrs:{placeholder:"请选择部门"},on:{change:t.changeDepart},model:{value:t.staffForm.department_name,callback:function(e){t.$set(t.staffForm,"department_name",e)},expression:"staffForm.department_name"}},t._l(t.departmentArr,function(t){return i("el-option",{key:t.pl_department_id,attrs:{label:t.label,value:t.pl_department_id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"角色",prop:"pl_role_id"}},[i("el-select",{attrs:{placeholder:"请选择角色"},model:{value:t.staffForm.pl_role_id,callback:function(e){t.$set(t.staffForm,"pl_role_id",e)},expression:"staffForm.pl_role_id"}},t._l(t.positionArr,function(t){return i("el-option",{key:t.pl_position_id,attrs:{label:t.label,value:t.pl_position_id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[i("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.staffForm.phone,callback:function(e){t.$set(t.staffForm,"phone",e)},expression:"staffForm.phone"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入登录密码"},model:{value:t.staffForm.password,callback:function(e){t.$set(t.staffForm,"password",e)},expression:"staffForm.password"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.staffForm.remark,callback:function(e){t.$set(t.staffForm,"remark",e)},expression:"staffForm.remark"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"账号状态",prop:"is_freeze"}},[i("el-radio-group",{model:{value:t.staffForm.is_freeze,callback:function(e){t.$set(t.staffForm,"is_freeze",e)},expression:"staffForm.is_freeze"}},t._l(t.statusOptions,function(e){return i("el-radio-button",{key:e.idx,attrs:{label:e.idx,value:e.idx}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),i("div",{staticClass:"btn-dialog footer-btn",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"save-b-gradient",on:{click:function(e){t.saveStaffInfo("staffForm")}}},[t._v("保存")])])],1),t._v(" "),i("el-dialog",{staticClass:"nopadding delete-dialog",attrs:{visible:t.deleteDialogVisible,width:"540px",top:"35vh",center:""},on:{"update:visible":function(e){t.deleteDialogVisible=e},close:t.hideReezeDialogHandle}},[i("div",{staticClass:"head-nav"},[i("span",[t._v("提示信息")])]),t._v(" "),i("div",{staticClass:"freeze-content"},[i("img",{attrs:{src:t.sucTipImg}}),t._v(" "),t.delDepartDialogVisible?i("span",{staticClass:"freeze-tip"},[t._v("确定要删除该部门？")]):i("span",{staticClass:"freeze-tip"},[t._v("确定删除该员工？")])]),t._v(" "),t.delDepartDialogVisible?i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.deleteDepartOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])]):i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.deleteOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])])]),t._v(" "),i("el-dialog",{staticClass:"div-box",attrs:{visible:t.editDialogVisible,width:"540px"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.hideDepartDialogHandle}},[i("div",{staticClass:"head-nav"},[i("span",[t._v(t._s(t.dia_title))])]),t._v(" "),i("div",{staticClass:"freeze-content"},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[t.addNewDepart?i("el-form-item",{attrs:{label:"部门名称","label-width":"120px",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},on:{input:function(e){t.checkInput("form")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1):i("el-form-item",{attrs:{label:"修改部门名称","label-width":"120px",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},on:{input:function(e){t.checkInput("form")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),t._v(" "),t.addNewDepart?i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.addOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])]):i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.editOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])])]),t._v(" "),i("el-dialog",{staticClass:"nopadding delete-dialog",attrs:{visible:t.delPOsitionDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.delPOsitionDialogVisible=e},close:t.hideReezeDialogHandle}},[i("div",{staticClass:"freeze-content"},[i("img",{attrs:{src:t.sucTipImg}}),t._v(" "),i("span",{staticClass:"freeze-tip"},[t._v("确定删除该职位？")])]),t._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.deletePosiOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-own-bar"},[e("span",{staticClass:"cant-click-nav"},[this._v("系统管理")]),this._v("\n    >\n    "),e("span",{staticClass:"current-nav"},[this._v("组织管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"change-titlerr rank-title"},[e("span",[this._v("部门列表")])])}]};var n=function(t){i("dGPD"),i("vRbe")},l=i("C7Lr")(a.a,s,!1,n,"data-v-0b2e60d2",null);e.default=l.exports},Gd3L:function(t,e){},W8XM:function(t,e){},XyEv:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYxQkVBMUMzNkQ0RTExRThBMDVFRDc0NkZFM0I0N0RGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjYxQkVBMUM0NkQ0RTExRThBMDVFRDc0NkZFM0I0N0RGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjFCRUExQzE2RDRFMTFFOEEwNUVENzQ2RkUzQjQ3REYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjFCRUExQzI2RDRFMTFFOEEwNUVENzQ2RkUzQjQ3REYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz49PWW7AAADeElEQVR42sSYTUhUURTH38wElagQYW0qmenLNFpkaWapiKFBbo0SoYWU1VTbKLBm0aKlZVEuCio0pZ2LPiakxkoEdRGmI9SE1kaLBIuxiLH+B/43XsN83PfmoQd+3Hnz3j3nf++79757ritacsGwaF5QC/aBbSAf5PDedzAJxsEr8BR8TOVs5eCV/66XaYrwgAbgB2XAleS51WQnaAR/wABoBz0gli6QW0NMDRgFnWAvxdwHTWAXyAMrSB7/a+IzLtbppI+adMFS9ZAEaAPHef2SrbwFFpLU+QW+gmHwABwDLezdShAEHeAc+Gmlh6SlIYqRbr4MqsDNFGIS2QLrVNFHjD5DjKElSB7sB7vBENgBAkbmFqCvIfruTyQqXlAW6AVbQR84BMYM52yMPvsYo3e+9GJWKkEyZkrBCDgKpg3nbZq+RxirLZkgmQHN4DenrK6Yb5zeituaohoZqxm9VBMvSMpr/C0rVdhCi2fTXCezMGOJXYcoj1nQYa66IQcG8KzFgS7LSQGXhn+CTrPsNhbfelj6lSAvV1ODi55Vi2QoSMUsw2vziaA60+dgwYEWW3ll8nGVmPeooVYElfPeM2PpLMiyXAQV8WLUprOIA4LU4lsogtbz4rNDrbUjcJJlvjtuc7VU9oNltnuxB7HOBk31TI5DguwIzFY9JYI+8WKdQ420I0iN4ym3eYQv4RjazvKdm9mBwUzCjl3loqawM8sOsHztQhrkw4/3dOZxaLW2Oo5j3LpscrNFb3izxYZD2ct8oEPZnvos1lcxB/AZiahpf4Nlg0Vnq/i1ViKKNTdoZlMx283bjx5umCRVuWTBWTFFxfeYrrUyZlhtQ5QgeYdn+Ps82KzpcDjBNH+uWXcLUHn8WbyuWPyeWhzdZYL4EKzVXHMaTDNLBJ7QqCe+u8BycAdigskyVz/Xo1Kmv0fATBrn0pCNFl7TGvqW/H/Q9GYSpkFRUA8mQDVzNCcXzEL6rGaMevRONF3m+gVUsPtLwFsOvkytlb5K6LuCsbRye3lN+3kw4GF28AKc0jwxMdtJ1g3QVwfPlmasnn7Mc4A+kryJ07OSa5bsv59wuk6BOdbJBRuY1tQxsJf3JjhegnaPY8z73SLOJnG4h+c/TZo9pA6sunUOrHRP0GKcpl1s8UG2voA9ksvn5thjYX60H6c70ou3vwIMAMPZ0wtAZV1JAAAAAElFTkSuQmCC"},"YVy+":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAAAXNSR0IArs4c6QAAARtJREFUOBHVU8ENwjAMpBVCvGGH/tiFCXgCL9YqA3STbtK+KdwFO3JSRwh4ICylts/nq9ski0XJKhbuMLhtJFWCnFlqJXnyNIGva22oYBLfFJt7tsI6PpLqDEiqmpAlNij2nme37RC1k2JLDdSDcEC81u9D3iPeaV3/XMwZgNRgfThjIvV1gjnC9sEHk/kuSMZEnFULICVpsliILbFIIjMjxtcB7xNVS7QFi+tJGwE2luTGIG2wBipk1roNvwMxHkflJnnjdnYycPZYPJFlM0LFHwUON5c2YR3LaqgEGh4eCbAVihfJ40bMEwTGT6NxokQI+YorCuQBisEcXM9NUvL4LjHpQoKrP78QOUnyXPBKXN/8yotG6JH4D9wDXN5k0yNgAkEAAAAASUVORK5CYII="},b3Sk:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("CW5y"),s=i("r2UX"),n=i("6nXL"),l=(i("EuEE"),{data:function(){return{emptyType:1,searchNone:!1,searchStatus:"",searchName:"",statusArr:[{label:"全部",value:""},{label:n.v.toString(n.v.NO),value:n.v.NO},{label:n.v.toString(n.v.YES),value:n.v.YES}],tableHeight:0,listQuery:{page:1,limit:10}}},components:{EmptyTable:s.a},props:{staffList:{type:Array,required:!0,default:function(){}},total:{type:Number,required:!0,default:10}},created:function(){this.listQuery.limit=a.a.get(this.$route)},mounted:function(){this.$refs.officialStaff.$refs.bodyWrapper.style.minHeight="401px"},computed:{isNoFreezed:function(){return n.v.NO},staffTree:function(){return this.treeData},staffTableList:function(){return this.staffList},IsAdmin:function(){return n.s},totalStaff:function(){return this.total}},methods:{addRank:function(){this.$emit("addNewStaff")},searchMethods:function(){this.listQuery.page=1,this.searchNone=!0;var t={};t.name=this.searchName,t.status=this.searchStatus,this.$emit("searchMethods",t)},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,a.a.set(this.$route,t),this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.listQuery.page=t,this.$emit("handleCurrentChange",t)},handleModifyStatus:function(t,e){var i={};i.row=t,i.status=e,this.$emit("handleModifyStatus",i)},handleEditStaff:function(t){this.$emit("handelEditBtn",t)},handleDeleteBtn:function(t){this.$emit("handleDeleteBtn",t)}}}),r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"staff-table-official"},[i("div",{staticClass:"change-titlerr rank-title"},[i("span",[t._v("详情列表")]),t._v(" "),i("span",{staticClass:"rank-btn-add fr btn-text-blue",on:{click:t.addRank}},[i("span",{staticClass:"add-btn-blue add-agent"}),t._v(" "),i("span",{staticClass:"add-agent"},[t._v(" 添加员工")])])]),t._v(" "),i("div",{staticClass:"table-content"},[i("div",{staticClass:"search-content search-content-width-fix"},[i("span",{staticClass:"label-text"},[t._v("姓名")]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),t._v(" "),i("span",{staticClass:"label-text"},[t._v("状态")]),t._v(" "),i("el-select",{model:{value:t.searchStatus,callback:function(e){t.searchStatus=e},expression:"searchStatus"}},t._l(t.statusArr,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),i("div",{staticClass:"search-btn of-btn-bd-search",on:{click:t.searchMethods}},[t._v("搜索")])],1),t._v(" "),i("div",{staticClass:"table-table change-default"},[i("el-table",{ref:"officialStaff",attrs:{data:t.staffTableList,stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"platformer_num",label:"员工编号",align:"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.platformer_num?i("span",{attrs:{size:"small"}},[t._v(t._s(e.row.platformer_num)+"\n          ")]):i("span",{attrs:{size:"small"}},[t._v("--\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"pl_name",label:"姓名",align:"center","min-width":"80","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"phone",label:"登录手机号",align:"center","min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"pl_department_name",label:"部门",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"role_name",label:"角色",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","min-width":"130","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.remark?i("span",{attrs:{size:"small"}},[t._v(t._s(e.row.remark)+"\n          ")]):i("span",{attrs:{size:"small"}},[t._v("--\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"is_freeze",label:"状态",align:"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_freeze===t.isNoFreezed?i("span",{attrs:{size:"small"}},[t._v("启用\n          ")]):i("span",{attrs:{size:"small"}},[t._v("冻结\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_admin!==t.IsAdmin.YES?i("div",[e.row.is_freeze===t.isNoFreezed?i("span",{staticClass:"text-red btn-oprate-red",attrs:{size:"small",type:"info"},on:{click:function(i){t.handleModifyStatus(e.row,1)}}},[t._v("冻结\n            ")]):i("span",{staticClass:"text-green btn-oprate-green",attrs:{size:"small",type:"success"},on:{click:function(i){t.handleModifyStatus(e.row,0)}}},[t._v("启用\n            ")]),t._v(" "),i("span",{staticClass:"text-blue btn-oprate-blue",attrs:{size:"small",type:"text"},on:{click:function(i){t.handleEditStaff(e.row)}}},[t._v("编辑\n            ")]),t._v(" "),i("span",{staticClass:"text-red btn-oprate-red",attrs:{size:"small",type:"text"},on:{click:function(i){t.handleDeleteBtn(e.row)}}},[t._v("删除\n            ")])]):t._e()]}}])})],1),t._v(" "),t.staffTableList&&0!==t.staffTableList.length?t._e():i("empty-table",{attrs:{type:t.emptyType}})],1),t._v(" "),i("div",{staticClass:"page"},[i("div",{staticClass:"pagination-content change-pagination-default"},[i("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.totalStaff},on:{"update:currentPage":function(e){t.$set(t.listQuery,"page",e)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])])])},staticRenderFns:[]};var o=i("C7Lr")(l,r,!1,function(t){i("lFIF"),i("cO+O")},"data-v-1d0e5912",null);e.default=o.exports},c6cs:function(t,e){},"cO+O":function(t,e){},dGPD:function(t,e){},lFIF:function(t,e){},mjGE:function(t,e){},n3mA:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("aA9S"),s=i.n(a),n=i("CW5y"),l=(i("EuEE"),i("6nXL")),r={data:function(){return{listQuery:{page:1,limit:10}}},props:{rankData:{type:[Array,Object],required:!0,default:function(){}},totalPosition:{type:Number,required:!0,default:10}},computed:{IsEdit:function(){return l.t},tableData:function(){return this.rankData},total:function(){return this.totalPosition}},created:function(){},methods:{edit:function(t){var e=s()({},t);this.$emit("edit",e)},addPsition:function(){this.$emit("addPsition")},handleDelete:function(t){var e=s()({},t);this.$emit("delete",e)},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,n.a.set(this.$route,t),this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.listQuery.page=t,this.$emit("handleCurrentChange",t)}},mounted:function(){this.$refs.manageGoodsListTableAdjust.$refs.bodyWrapper.style.minHeight="437px"}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"change-default rankTableOfficial"},[i("div",{staticClass:"change-titlerr rank-title rank-title-official"},[i("span",[t._v("职位列表")]),t._v(" "),i("span",{staticClass:"fr add-btn",on:{click:function(e){t.addPsition()}}},[i("span",{staticClass:"add-btn-blue"}),t._v("\n      新增职位\n    ")])]),t._v(" "),i("div",{staticClass:"table-official"},[i("el-table",{ref:"manageGoodsListTableAdjust",attrs:{data:t.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"职位","min-width":"50%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.ag_position_name||e.row.pl_position_name)+"\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"20%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"text-blue btn-oprate-blue",attrs:{type:"text"},on:{click:function(i){t.edit(e.row)}}},[t._v("编辑\n          ")]),t._v(" "),e.row.entry_type!==t.IsEdit.YES?i("span",{staticClass:"text-red btn-oprate-red table-btn",attrs:{type:"text"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除\n          ")]):t._e()]}}])})],1)],1),t._v(" "),i("div",{staticClass:"page"},[i("div",{staticClass:"page"},[i("div",{staticClass:"pagination-content change-pagination-default"},[i("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)])])])},staticRenderFns:[]};var d=i("C7Lr")(r,o,!1,function(t){i("zjO0"),i("Gd3L")},"data-v-2998ccdc",null);e.default=d.exports},o1Lc:function(t,e,i){"use strict";i.d(e,"c",function(){return l}),i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o});var a=i("IvJb"),s=(i("a2vD"),i("EuEE")),n=i("P9l9"),l={initTreeData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e=e.map(function(e){return a.default.set(e,"canEditor",!1),a.default.set(e,"addIcon",!0),a.default.set(e,"editorIcon",!0),a.default.set(e,"deleteIcon",!0),a.default.set(e,"isShowBtn",!1),a.default.set(e,"isActive",!1),a.default.set(e,"breakshow",!1),a.default.set(e,"allShow",!1),a.default.set(e,"isExpand",!0),a.default.set(e,"isFolder",!1),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.initTreeData(e.employee_list),e})},addTitleToTree:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return a.default.set(e,"pl_department_name","部门管理"),a.default.set(e,"employee_list",t),a.default.set(e,"isThree",!0),a.default.set(e,"isActive",!0),a.default.set(e,"pl_department_id","0"),e},addTitleAgentTree:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return a.default.set(e,"ag_department_name","部门管理"),a.default.set(e,"employee_list",t),a.default.set(e,"isThree",!0),a.default.set(e,"isActive",!0),a.default.set(e,"ag_department_id","0"),e},generateKey:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments[1];return e=e.map(function(e,a){return e.key=i+"-"+a.toString(),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.generateKey(e.employee_list,e.key),e})},getKeylength:function(t){if(!s.a.isEmpty(t))return t.split("-").length},selectIcon:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=e.map(function(e){var i=t.getKeylength(e.key);2===i?(e.addIcon=!0,e.editorIcon=!1,e.deleteIcon=!1,e.isExpand=!0,e.isActive=!0):3===i?(e.addIcon=!1,e.editorIcon=!0,e.deleteIcon=!0,e.isExpand=!1,e.isFolder=!0):4===i&&(e.addIcon=!1,e.editorIcon=!1,e.deleteIcon=!1),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.selectIcon(e.employee_list)})},saveDepartName:function(){var t=[];return function e(i){i.forEach(function(i){i.hasOwnProperty("pl_department_name")&&"部门管理"!==i.pl_department_name&&t.push(i.pl_department_name),i.hasOwnProperty("employee_list")&&i.employee_list.length>0&&e(i.employee_list)})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),t},treeDataById:function(){var t={};return function e(i){i.forEach(function(i){i.hasOwnProperty("pl_department_id")?t[i.pl_department_id]=i:i.hasOwnProperty("employee_id")&&(t[i.employee_id]=i),i.hasOwnProperty("ag_department_id")?t[i.ag_department_id]=i:i.hasOwnProperty("employee_id")&&(t[i.employee_id]=i),i.hasOwnProperty("employee_list")&&i.employee_list.length>0&&e(i.employee_list)})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),t},changeSelecte:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in e)e.hasOwnProperty(i)&&(e[i].isActive=t===i);return e},getDutyArr:function(t){var e=[];return t.forEach(function(t){-1===e.indexOf(t.position_name)&&e.push(t.position_name)}),e},getDutyDepartId:function(t,e){var i;return t.forEach(function(t){void 0!==t.position_name?t.position_name===e&&(i=t.position_id):t.pl_department_name===e&&(i=t.department_id)}),i},getTotal:function(t){if(void 0!==t&&t.length>0){for(var e=0,i=0;i<t.length;i++)e++;return e}},getPageList:function(t,e,i){if(void 0!==t&&t.length>0){return t.filter(function(t,a){return a<e*i&&a>=e*(i-1)})}}},r=function(){var t=[];return Object(n.x)({get_pl_department_list:1,page_size:1e5,page_no:1}).then(function(e){if(0===e.ret){var i=e.data.pl_department_list;i&&i.length>0&&i.forEach(function(e){var i={};i.label=e.pl_department_name,i.pl_department_id=e.pl_department_id,t.push(i)})}}),t},o=function(){var t=[];return Object(n.U)({get_pl_role_list:1,only_name:1,page_size:1e5,page_no:1}).then(function(e){if(0===e.ret){console.log("平台角色=>",e);var i=e.data.list;i&&i.length>0&&i.forEach(function(e){var i={};i.label=e.role_name,i.pl_position_id=e.pl_role_id,t.push(i)})}}),t}},o4s6:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM0OEE5QzdGNzkxMzExRThBNkUwRURGMTRFOTM4NTlGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM0OEE5QzgwNzkxMzExRThBNkUwRURGMTRFOTM4NTlGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzQ4QTlDN0Q3OTEzMTFFOEE2RTBFREYxNEU5Mzg1OUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzQ4QTlDN0U3OTEzMTFFOEE2RTBFREYxNEU5Mzg1OUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4SASNEAAABLklEQVR42mL0qHjBgAWwAXEAFFsCsRQQ/wLiJ0B8HojXA/FGqBgKYMFiWCAQdwGxChZLNKA4EojvAHE5EK9DVsSExGYG4k6oAhUGwgCkZi1UDzM2F7YBcRkD6QCmpxzZhSEEDLOFYnyGhsAMBIVNPwFXHIFifGACyCyQgaFALMNAOZAG4jAmaNKgFggAGWhKRQNNQAZKYIkARjQMA+ji6BElyYQttZMA/mPLKc+BmBdJ7DAWjYy4DEADz0EuvETFMDwDMnADFQ3cADJwNbQUoRQ8BZkFi5QiAoptgNiagJpCIP4Jy8sgV3bjUXyYQNbrhpqBUnxVAvEUMrw6FaoXozz8C8S50FLjDhEG3YGWAzlQvThLbFChuRmqGFR6G0MzPizgz0KrgNXYMgVAgAEAsXw4J+QeCL0AAAAASUVORK5CYII="},oSMl:function(t,e){},vRbe:function(t,e){},"wR+7":function(t,e,i){"use strict";var a={props:["NODE","DATA","STORE"],data:function(){return{editImg:i("YVy+"),addImg:i("o4s6"),deleteImg:i("3sWp")}},created:function(){},methods:{nodeAdd:function(t,e,i){this.$emit("nodeAdd",t,e,i)},nodeEdit:function(t,e,i){this.$emit("nodeEdit",t,e,i)},nodeDel:function(t,e,i){this.$emit("nodeDel",t,e,i)}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"tree-expand"},[i("span",{staticClass:"tree-label"},[t.DATA.pl_department_id||t.DATA.ag_department_id?i("span",[t._v(t._s(t.DATA.label))]):i("span",{staticClass:"isTitle"},[t._v(t._s(t.DATA.label))])]),t._v(" "),i("span",{staticClass:"tree-btn"},[t.DATA.pl_department_id||t.DATA.ag_department_id?i("img",{staticClass:"edit-btn",attrs:{src:t.editImg,alt:""},on:{click:function(e){e.stopPropagation(),t.nodeEdit(t.STORE,t.DATA,t.NODE)}}}):t._e(),t._v(" "),t.DATA.pl_department_id||t.DATA.ag_department_id?t._e():i("img",{staticClass:"add-btn",attrs:{src:t.addImg,alt:""},on:{click:function(e){e.stopPropagation(),t.nodeAdd(t.STORE,t.DATA,t.NODE)}}}),t._v(" "),t.DATA.pl_department_id||t.DATA.ag_department_id?i("img",{staticClass:"delete-btn",attrs:{src:t.deleteImg,alt:""},on:{click:function(e){e.stopPropagation(),t.nodeDel(t.STORE,t.DATA,t.NODE)}}}):t._e()])])},staticRenderFns:[]};var n=i("C7Lr")(a,s,!1,function(t){i("oSMl")},"data-v-7197d890",null);e.a=n.exports},zjO0:function(t,e){}});