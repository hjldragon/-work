webpackJsonp([114],{"O/z4":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Jpdf"),n=i.n(s),r=i("UnC9"),a=i("P9l9"),c=i("6nXL"),o={components:{draggable:n.a,SlUpload:r.a},data:function(){return{base_url:"./php",bannerPicture:[],hotgoodsPicture:[],hardwareAdPic:[],hardwarePicture:[],softwareAdPic:[],softwarePicture:[],consumAdPic:[],consumPicture:[],accessAdPic:[],accessPicture:[],isDraggingBanner:!1,isDragginghotgoods:!1,isDraggingHardwareAd:!1,isDraggingHardwarePic:!1,isDraggingSoftwareAd:!1,isDraggingSoftwarePic:!1,isDraggingConsumAd:!1,isDraggingConsumPic:!1,isDraggingAccessAd:!1,isDraggingAccesspic:!1,dragOptions:{group:{name:"group",put:!1,pull:!1},forceFallback:!0,sort:!0,animation:300,handle:".drag-img",ghostClass:"ghost"}}},computed:{bannerlen:function(){return this.bannerPicture.length},hotgoodsLen:function(){return this.hotgoodsPicture.length},hardwareAdLen:function(){return this.hardwareAdPic.length},hardwarePicLen:function(){return this.hardwarePicture.length},softwareAdLen:function(){return this.softwareAdPic.length},softwarePicLen:function(){return this.softwarePicture.length},consumAdLen:function(){return this.consumAdPic.length},consumPicLen:function(){return this.consumPicture.length},accessAdLen:function(){return this.accessAdPic.length},accessPicLen:function(){return this.accessPicture.length}},created:function(){this.getData()},methods:{getData:function(){var t=this;Object(a.W)({get_platform_info:1}).then(function(e){if(0===e.ret){var i=e.data.info.phone_advertise;t.bannerPicture=i.banner_picture||[],t.hotgoodsPicture=i.hotgoods_picture||[],t.hardwareAdPic=i.hardware_adpic||[],t.hardwarePicture=i.hardware_picture||[],t.softwareAdPic=i.software_adpic||[],t.softwarePicture=i.software_picture||[],t.consumAdPic=i.consum_adpic||[],t.consumPicture=i.consum_picture||[],t.accessAdPic=i.access_adpic||[],t.accessPicture=i.access_picture||[]}else t.$slnotify({message:c.N.toString(e.ret)})})},dragend:function(){},getPicture:function(t,e){if(-1===this[t].map(function(t){return t.img_name}).indexOf(e)){var i={img_name:e,link_url:""};this[t].push(i)}else this.$notify({title:"警告",message:"重复图片",type:"warning"})},deletePicture:function(t,e){this[t].splice(e,1)},save:function(){var t=this,e=this,i=function(t){var i=!0;return t.forEach(function(t){t.link_url||(e.$set(t,"red_tip",!0),i=!1)}),i},s=i(this.bannerPicture),n=i(this.hotgoodsPicture),r=i(this.hardwareAdPic),c=i(this.hardwarePicture),o=i(this.softwareAdPic),u=i(this.softwarePicture),d=i(this.consumAdPic),l=i(this.consumPicture),g=i(this.accessAdPic),h=i(this.accessPicture);if(s&&n&&r&&c&&o&&u&&d&&l&&g&&h){var p={advertise_save:1,type:1,banner_picture:this.bannerPicture,hotgoods_picture:this.hotgoodsPicture,hardware_adpic:this.hardwareAdPic,hardware_picture:this.hardwarePicture,software_adpic:this.softwareAdPic,software_picture:this.softwarePicture,consum_adpic:this.consumAdPic,consum_picture:this.consumPicture,access_adpic:this.accessAdPic,access_picture:this.accessPicture};Object(a.X)(p).then(function(e){0===e.ret&&t.$slnotify({message:"发布成功"})})}else this.$notify({title:"警告",message:"请填写完输入框！",type:"warning"})},cancel:function(){this.$router.go(-1)},clearTip:function(){var t=function(t){t.forEach(function(t){t.red_tip&&(t.red_tip=!1)})};t(this.bannerPicture),t(this.hotgoodsPicture),t(this.hardwareAdPic),t(this.hardwarePicture),t(this.softwareAdPic),t(this.softwarePicture),t(this.consumAdPic),t(this.consumPicture),t(this.accessAdPic),t(this.accessPicture)}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"advertisement-manage"},[s("div",{staticClass:"banner-content"},[s("h3",{staticClass:"change-titlerr"},[t._v("轮播广告")]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content-title main-space flex-box cross-center"},[t._m(0),t._v(" "),5===t.bannerlen?s("div",{staticClass:"add-btn-gray flex-box cross-center"},[s("img",{attrs:{src:i("Rs2e")}}),t._v(" "),s("span",[t._v("上传图片")])]):s("sl-upload",{attrs:{"style-type":2,"img-width":750,"img-height":258},on:{"send-image":function(e){t.getPicture("bannerPicture",e)}}})],1),t._v(" "),s("draggable",{staticClass:"picture-group clearfix",attrs:{element:"div",options:t.dragOptions},on:{start:function(e){t.isDraggingBanner=!0},end:function(e){t.isDraggingBanner=!1}},model:{value:t.bannerPicture,callback:function(e){t.bannerPicture=e},expression:"bannerPicture"}},t._l(t.bannerPicture,function(e,i){return s("div",{key:i,staticClass:"picture-item flex-box cross-center",attrs:{id:"banner-picture"}},[s("span",{staticClass:"num"},[t._v(t._s(i+1))]),t._v(" "),s("img",{staticClass:"drag-img img",attrs:{src:t.base_url+"/img_get.php?img=1&imgname="+e.img_name}}),t._v(" "),s("el-input",{staticClass:"sl-input",class:{"border-redtip":e.red_tip},attrs:{placeholder:"请输入商品链接"},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:e.link_url,callback:function(i){t.$set(e,"link_url","string"==typeof i?i.trim():i)},expression:"item.link_url"}}),t._v(" "),s("span",{staticClass:"delete",on:{click:function(e){t.deletePicture("bannerPicture",i)}}},[t._v("删除")])],1)}))],1)]),t._v(" "),s("div",{staticClass:"hotgoods-content"},[s("h3",{staticClass:"change-titlerr"},[t._v("热卖商品")]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content-title main-space flex-box cross-center"},[t._m(1),t._v(" "),8===t.hotgoodsLen?s("div",{staticClass:"add-btn-gray flex-box cross-center"},[s("img",{attrs:{src:i("Rs2e")}}),t._v(" "),s("span",[t._v("上传图片")])]):s("sl-upload",{attrs:{"style-type":2,"img-width":369,"img-height":288},on:{"send-image":function(e){t.getPicture("hotgoodsPicture",e)}}})],1),t._v(" "),s("draggable",{staticClass:"picture-group clearfix",attrs:{element:"div",options:t.dragOptions},on:{start:function(e){t.isDragginghotgoods=!0},end:function(e){t.isDragginghotgoods=!1}},model:{value:t.hotgoodsPicture,callback:function(e){t.hotgoodsPicture=e},expression:"hotgoodsPicture"}},t._l(t.hotgoodsPicture,function(e,i){return s("div",{key:i,staticClass:"picture-item flex-box cross-center"},[s("span",{staticClass:"num"},[t._v(t._s(i+1))]),t._v(" "),s("img",{staticClass:"drag-img img",attrs:{src:t.base_url+"/img_get.php?img=1&imgname="+e.img_name}}),t._v(" "),s("el-input",{staticClass:"sl-input",class:{"border-redtip":e.red_tip},attrs:{placeholder:"请输入商品链接"},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:e.link_url,callback:function(i){t.$set(e,"link_url","string"==typeof i?i.trim():i)},expression:"item.link_url"}}),t._v(" "),s("span",{staticClass:"delete",on:{click:function(e){t.deletePicture("hotgoodsPicture",i)}}},[t._v("删除")])],1)}))],1)]),t._v(" "),s("div",{staticClass:"btn-group"},[s("div",{staticClass:"sl-btn-bd-b-blue"},[t._v("预览")]),t._v(" "),s("div",{staticClass:"sl-btn-bd-b-blue",on:{click:t.save}},[t._v("发布")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"title"},[this._v("轮播广告图")]),this._v(" "),e("span",{staticClass:"tip"},[this._v("（注：图片尺寸为750*258px，最多只能上传5张，可拖动排序）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"title"},[this._v("添加商品")]),this._v(" "),e("span",{staticClass:"tip"},[this._v("（注：图片尺寸为369*288px，最多只能上传8张，可拖动排序）")])])}]};var d=i("C7Lr")(o,u,!1,function(t){i("e0d0")},"data-v-3704f988",null);e.default=d.exports},e0d0:function(t,e){}});