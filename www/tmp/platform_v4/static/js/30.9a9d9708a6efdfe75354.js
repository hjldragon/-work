webpackJsonp([30,88,138],{"9ker":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("y+UL"),a=s("G9J+"),l={components:{TableGoods:i.default,TreeTable:a.default}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vendorgoods-list"},[e("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:">"}},[e("el-breadcrumb-item",[this._v("设备管理")]),this._v(" "),e("el-breadcrumb-item",[this._v("商品管理")])],1),this._v(" "),e("div",{staticClass:"goods-list"},[e("tree-table",{staticClass:"tree-goods"}),this._v(" "),e("table-goods",{staticClass:"table-goods"})],1)],1)},staticRenderFns:[]};var n=s("C7Lr")(l,o,!1,function(t){s("MfU9")},"data-v-1d1055fa",null);e.default=n.exports},"G9J+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={components:{TreeGoods:s("cY/f").default}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tree-table"},[e("div",{staticClass:"change-titlerr"},[this._v("商品分类")]),this._v(" "),e("div",{ref:"treeContentMaxHeight",staticClass:"tree-content"},[e("tree-goods")],1)])},staticRenderFns:[]};var l=s("C7Lr")(i,a,!1,function(t){s("Z1oR")},"data-v-352c3996",null);e.default=l.exports},MfU9:function(t,e){},Z1oR:function(t,e){},py3f:function(t,e){},"q+fe":function(t,e){},"y+UL":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),l=(s("EuEE"),s("6nXL")),o=s("9rMa"),n=s("P9l9"),r=s("r2UX"),c=s("HBwt"),d=s.n(c),u={components:{EmptyTable:r.a},data:function(){return{goods_name:"",saleStatus:null,list:[],emptyType:1,multipleSelection:[],total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,SaleStatus:l.L,saleStatusItem:[{value:l.L.ALL,label:l.L.toString(l.L.ALL)},{value:l.L.YES,label:l.L.toString(l.L.YES)},{value:l.L.NO,label:l.L.toString(l.L.NO)}],singleDelete:!1,muDelete:!1,goodArrOpr:[],dialogDelId:"",base_url:"./php"}},computed:a()({},Object(o.d)({search_category:function(t){return t.vendor_manage.search_category}}),{isListEmpty:function(){return 0===this.list.length}}),mounted:function(){this.$refs.vendorManageGoodsListTableAdjust.$refs.bodyWrapper.style.minHeight="507px"},created:function(){this.getList()},watch:{search_category:function(t){this.goods_name="",this.saleStatus=null,this.emptyType=2,this.listQuery.page=1,this.getList()}},methods:{getList:function(){var t=this,e={get_goods_list:1,shop_id:l.Q.shop_id,page_size:this.listQuery.limit,page_no:this.listQuery.page};this.goods_name&&(e.search=this.goods_name),(this.saleStatus===l.L.YES||this.saleStatus)&&(this.saleStatus===l.L.YES?e.sale_off=0:this.saleStatus===l.L.NO&&(e.sale_off=1)),this.search_category&&"0"!==this.search_category&&(e.category_id=this.search_category),this.isSort&&(e.sortby=Number(this.sortLabel),e.sort=this.sortOrder),Object(n._17)(e).then(function(e){if(0===e.ret){var s=null,i={width:1,height:38,displayValue:!1};t.list=e.data.goods_list||[],t.total=e.data.total,t.list=t.list.map(function(e){return e.pictrue_str=(e.goods_img_list||[])[0],t.$nextTick(function(){e.goods_bar_code&&(s=this.$refs["barcode"+e.vendor_goods_id],d()(s,e.goods_bar_code,i))}),e})}else t.$slnotify({message:l.X.toString(e.ret)})})},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},handlerAddNewClick:function(){this.$router.push("/officialmanage/vendor/goods/edit")},handlerEditClick:function(t){this.$router.push({path:"/officialmanage/vendor/goods/edit",query:{goodsid:t}})},search:function(){this.emptyType=2,this.listQuery.page=1,this.getList()},deleteGoods:function(){var t=this,e={goods_del:1,goods_id_list:this.goodArrOpr};Object(n._18)(e).then(function(e){0===e.ret?(t.singleDialogDeleteCancel(),t.muDialogDelteCancel(),t.getList(),t.$notify({title:"成功",message:"操作成功！",type:"success"})):t.$notify({title:"成功",message:"操作失败！",type:"error"})})},singleSaleOff:function(t){this.goodArrOpr=[],this.goodArrOpr.push(t),this.saleOff()},muSaleOff:function(){this.goodArrOpr=[],0!==this.multipleSelection.length?(this.goodArrOpr=this.multipleSelection.map(function(t){return t.vendor_goods_id}),this.saleOff()):this.$notify({title:"警告",message:"请先选择要下架项！",type:"warning"})},singleSaleOn:function(t){this.goodArrOpr=[],this.goodArrOpr.push(t),this.saleOn()},muSaleOn:function(){this.goodArrOpr=[],0!==this.multipleSelection.length?(this.goodArrOpr=this.multipleSelection.map(function(t){return t.vendor_goods_id}),this.saleOn()):this.$notify({title:"警告",message:"请先选择要上架项！",type:"warning"})},saleOn:function(){var t=this,e={goods_sale_off:1,goods_id_list:this.goodArrOpr,sale_off:0};Object(n._18)(e).then(function(e){0===e.ret?(t.getList(),t.$notify({title:"成功",message:"上架成功！",type:"success"})):t.$notify({title:"失败",message:"上架失败！",type:"error"})})},saleOff:function(){var t=this,e={goods_sale_off:1,goods_id_list:this.goodArrOpr,sale_off:1};Object(n._18)(e).then(function(e){0===e.ret?(t.getList(),t.$notify({title:"成功",message:"下架成功！",type:"success"})):t.$notify({title:"失败",message:"下架失败！",type:"error"})})},openSingleDialog:function(t){this.dialogDelId=t,this.singleDelete=!0},openMuDialogDlete:function(){0!==this.multipleSelection.length?this.muDelete=!0:this.$notify({title:"警告",message:"请先选择要批量删除项！",type:"warning"})},singleDialogDeleteCancel:function(){this.dialogDelId="",this.singleDelete=!1},muDialogDelteCancel:function(){this.muDelete=!1},muDialogDelete:function(){this.goodArrOpr=[],this.goodArrOpr=this.multipleSelection.map(function(t){return t.vendor_goods_id}),this.deleteGoods()},singleDialogDelete:function(){this.goodArrOpr=[],this.goodArrOpr.push(this.dialogDelId),this.deleteGoods()}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"vendor-manage-goodslist"}},[i("div",{staticClass:"change-titlerr"},[i("span",[t._v("商品列表")]),t._v(" "),i("div",{staticClass:"fr add-btn",on:{click:t.handlerAddNewClick}},[i("span",{staticClass:"add-btn-blue"}),t._v(" "),i("span",[t._v("新增")])])]),t._v(" "),i("div",{staticClass:"search-content clearfix"},[i("div",{staticClass:"fl search-left clearfix"},[i("div",{staticClass:"search-item change-input fl sale-status"},[i("span",{staticClass:"label-title"},[t._v("上/下架状态")]),t._v(" "),i("el-select",{staticClass:"change-input",attrs:{placeholder:"请选择"},model:{value:t.saleStatus,callback:function(e){t.saleStatus=e},expression:"saleStatus"}},t._l(t.saleStatusItem,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("div",{staticClass:"search-item change-input fl goods-name"},[i("span",{staticClass:"label-title"},[t._v("名称/编号")]),t._v(" "),i("el-input",{attrs:{placeholder:"名称/编号"},model:{value:t.goods_name,callback:function(e){t.goods_name=e},expression:"goods_name"}})],1),t._v(" "),i("div",{staticClass:"fl search-item search-btn-h-28",on:{click:t.search}},[t._v("搜索")])]),t._v(" "),i("div",{staticClass:"fr search-right"},[i("div",{staticClass:"search-item search-btn-h-28",on:{click:t.muSaleOn}},[t._v("批量上架")]),t._v(" "),i("div",{staticClass:"search-item search-btn-h-28",on:{click:t.muSaleOff}},[t._v("批量下架")]),t._v(" "),i("div",{staticClass:"search-item search-btn-h-28",on:{click:t.openMuDialogDlete}},[t._v("删除")])])]),t._v(" "),i("div",{staticClass:"table-content change-default"},[i("el-table",{ref:"vendorManageGoodsListTableAdjust",attrs:{data:t.list,stripe:""},on:{"sort-change":t.sort,"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{prop:"vendor_goods_id",label:"编号","min-width":"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.vendor_goods_id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"pictrue_str",label:"图片","min-width":"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticClass:"goods_img",attrs:{src:t.base_url+"/img_get.php?img=1&imgname="+e.row.pictrue_str}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"vendor_goods_name",label:"商品名称","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.vendor_goods_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"1",label:"价格","min-width":"60",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("numFix")(e.row.goods_price)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goods_spec",label:"规格","min-width":"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.goods_spec))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"category_name",label:"商品类别","min-width":"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.category_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goods_bar_code",label:"条形码","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{ref:"barcode"+t.row.vendor_goods_id})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"vendor_goods_id",label:"操作","min-width":"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"table-oprbtn-group"},[e.row.sale_off===t.SaleStatus.NO?i("span",{staticClass:"opr-btn",on:{click:function(s){t.singleSaleOn(e.row.vendor_goods_id)}}},[t._v("上架")]):t._e(),t._v(" "),e.row.sale_off===t.SaleStatus.YES?i("span",{staticClass:"opr-btn opr-btn--red",on:{click:function(s){t.singleSaleOff(e.row.vendor_goods_id)}}},[t._v("下架")]):t._e(),t._v(" "),i("span",{staticClass:"opr-btn",on:{click:function(s){t.handlerEditClick(e.row.vendor_goods_id)}}},[t._v("编辑")]),t._v(" "),i("span",{staticClass:"opr-btn",on:{click:function(s){t.openSingleDialog(e.row.vendor_goods_id)}}},[t._v("删除")])])]}}])})],1),t._v(" "),t.isListEmpty?i("empty-table",{attrs:{type:t.emptyType}}):t._e()],1),t._v(" "),i("div",{staticClass:"pagination-contentrr change-pagination-default"},[i("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),i("el-dialog",{staticClass:"vendor-dialog-custom-a nopadding",attrs:{visible:t.singleDelete,"show-close":!1,"before-close":t.singleDialogDeleteCancel,width:"540px",top:"25vh"},on:{"update:visible":function(e){t.singleDelete=e}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[t._v("提示信息")]),t._v(" "),i("div",{staticClass:"dialog-content"},[i("div",{staticClass:"delete-tip"},[i("div",{staticClass:"delete-img"},[i("img",{attrs:{src:s("RrKl"),alt:"提示图片"}})]),t._v(" "),i("div",{staticClass:"delete-text"},[t._v("确认删除选中商品？")])]),t._v(" "),i("div",{staticClass:"button-group"},[i("span",{staticClass:"ven-btn-bd-m-blue",on:{click:t.singleDialogDelete}},[t._v("确定")]),t._v(" "),i("span",{staticClass:"ven-btn-bg-m-blue",on:{click:t.singleDialogDeleteCancel}},[t._v("取消")])])])]),t._v(" "),i("el-dialog",{staticClass:"vendor-dialog-custom-a nopadding",attrs:{visible:t.muDelete,"show-close":!1,"before-close":t.muDialogDelteCancel,width:"540px",top:"30vh"},on:{"update:visible":function(e){t.muDelete=e}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),i("div",{staticClass:"dialog-content"},[i("div",{staticClass:"delete-tip"},[i("div",{staticClass:"delete-img"},[i("img",{attrs:{src:s("RrKl"),alt:"提示图片"}})]),t._v(" "),i("div",{staticClass:"delete-text"},[t._v("确认批量删除选中商品？")])]),t._v(" "),i("div",{staticClass:"button-group"},[i("span",{staticClass:"ven-btn-bd-m-blue",on:{click:t.muDialogDelete}},[t._v("确定")]),t._v(" "),i("span",{staticClass:"ven-btn-bg-m-blue",on:{click:t.muDialogDelteCancel}},[t._v("取消")])])])])],1)},staticRenderFns:[]};var h=s("C7Lr")(u,g,!1,function(t){s("q+fe"),s("py3f")},"data-v-3589cb47",null);e.default=h.exports}});