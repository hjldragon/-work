webpackJsonp([12,47],{"+2X3":function(t,a){},"0lzi":function(t,a){},"1Str":function(t,a,e){t.exports=e.p+"static/img/example_img_normal.cbea20d.png"},"1uJ7":function(t,a){},LycU:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAACMCAYAAAAnWNZXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5M0M0RkU3MzVDQkYxMUU4QjFBRkE2ODIxNDNFMEU1NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5M0M0RkU3NDVDQkYxMUU4QjFBRkE2ODIxNDNFMEU1NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjkzQzRGRTcxNUNCRjExRThCMUFGQTY4MjE0M0UwRTU2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjkzQzRGRTcyNUNCRjExRThCMUFGQTY4MjE0M0UwRTU2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HYqz5AAACSlJREFUeNrsnQdTFUkU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"},PTAg:function(t,a,e){"use strict";var s=e("aA9S"),i=e.n(s),r=e("GAg9"),o=e("EU70"),n=e("6ROu"),c=e.n(n),l=e("N6PA"),m={components:{PreviewImg:o.a,ImgUpload:r.a},data:function(){var t=this;return{ImageSize:5120,baseData:{legal_person:"",legal_card:"",legal_card_photo:[],idFrontal:"",idReverse:"",business_num:"",corporate_num:"",merchant_num:"",business_date:[],begin_time:"",end_time:"",repast_permit_num:"",taxpayer_num:"",taxpayer_photo:"",business_photo:"",repast_permit_photo:"",business_scope:""},previewImgObj:{idFrontal:e("8oLo"),idReverse:e("x4Cl"),businessImg:e("wH0g"),permissionImg:e("AFVk"),taxpayer_photo:e("1Str")},rules:{legal_person:[{required:!0,validator:function(t,a,e){l.a.isPersonName(a)?e():e(new Error("请填写正确法人代表"))},trigger:"blur"}],legal_card:[{required:!0,validator:function(t,a,e){l.a.isIdCard(a)?e():e(new Error("请填写正确的身份证号"))},trigger:"blur"}],idFrontal:[{required:!0,validator:function(a,e,s){""==t.baseData.idFrontal?s(new Error("请上传法人身份证正面照")):""==t.baseData.idReverse?s(new Error("请上传法人身份证反面照")):s()},trigger:"change"}],business_num:[{required:!0,validator:function(t,a,e){l.a.isHasChina(a)?e(new Error("请填写正确营业执照注册号")):e()},trigger:"blur"}],corporate_num:[{required:!0,validator:function(t,a,e){l.a.isHasChina(a)||l.a.isEmpty(a)?e(new Error("请填写正确的对公账户")):e()},trigger:"blur"}],merchant_num:[{required:!0,validator:function(t,a,e){l.a.isEmpty(a)?e(new Error("请填写正确的开户支行")):e()},trigger:"blur"}],business_date:[{required:!0,message:"请选择营业期限",trigger:"blur"}],repast_permit_num:[{required:!0,validator:function(t,a,e){l.a.isEmpty(a)?e(new Error("请填写正确的餐饮服务许可证编号")):e()},trigger:"blur"}],business_photo:[{required:!0,message:"请上传营业执照扫描件",trigger:"change"}],repast_permit_photo:[{required:!0,message:"请上传餐饮服务许可证扫描件",trigger:"change"}],business_scope:[{required:!0,validator:function(t,a,e){l.a.isEmpty(a)?e(new Error("请填写经营范围")):e()},trigger:"blur"}]}}},props:{formData:{type:[Object,Array],default:null}},created:function(){this.getFormData(this.formData),this.validateFormM()},watch:{formData:function(t){this.getFormData(t),this.validateFormM()},"baseData.business_date":{handler:function(t,a){return this.baseData.begin_time=t?parseInt(c()(t[0]).format("X")):"",this.baseData.end_time=t?parseInt(c()(t[1]).format("X")):"",this.validateFormM(),t},deep:!0}},methods:{validateFormM:function(){for(var t=!0,a=this.baseData,e=[l.a.isPersonName(this.baseData.legal_person),l.a.isIdCard(this.baseData.legal_card),!l.a.isEmpty(this.baseData.idFrontal),!l.a.isEmpty(this.baseData.idReverse),!l.a.isHasChina(this.baseData.business_num),!l.a.isHasChina(this.baseData.corporate_num)&&!l.a.isEmpty(this.baseData.corporate_num),!l.a.isEmpty(this.baseData.merchant_num),!l.a.isEmpty(this.baseData.begin_time),!l.a.isEmpty(this.baseData.end_time),!l.a.isEmpty(this.baseData.repast_permit_num),!l.a.isEmpty(this.baseData.business_photo),!l.a.isEmpty(this.baseData.repast_permit_photo),!l.a.isEmpty(this.baseData.business_scope)],s=0;s<e.length;s++)if(!e[s]){t=!1;break}var r=i()({},a);r.legal_card_photo=[this.baseData.idFrontal,this.baseData.idReverse],r.business_date=[this.baseData.begin_time,this.baseData.end_time],this.$emit("validateForm",t,r)},getFormData:function(t){if(null!==t){var a=i()({},t);if(this.baseData.corporate_num=a.corporate_num||"",this.baseData.merchant_num=a.merchant_num||"",this.baseData.legal_person=a.legal_person||"",this.baseData.legal_card=a.legal_card||"",this.baseData.business_num=a.business_num||"",this.baseData.idFrontal="[object Array]"==Object.prototype.toString.call(a.legal_card_photo)?a.legal_card_photo[0]:"",this.baseData.idReverse="[object Array]"==Object.prototype.toString.call(a.legal_card_photo)?a.legal_card_photo[1]:"","[object Array]"==Object.prototype.toString.call(a.business_date)){var e=[];e[0]=new Date(1e3*a.business_date[0]),e[1]=new Date(1e3*a.business_date[1]),this.baseData.business_date=e}else this.baseData.business_date=[new Date,new Date];this.baseData.business_photo=a.business_photo||"",this.baseData.repast_permit_num=a.repast_permit_num||"",this.baseData.repast_permit_photo=a.repast_permit_photo||"",this.baseData.taxpayer_photo=a.taxpayer_photo||"",this.baseData.taxpayer_num=a.taxpayer_num||"",this.baseData.business_scope=a.business_scope||""}},getPhoto:function(t,a){switch(t){case 1:this.$set(this.baseData,"idFrontal",a),this.$refs.baseData.validateField("idFrontal");break;case 2:this.$set(this.baseData,"idReverse",a),this.$refs.baseData.validateField("idFrontal");break;case 3:this.$set(this.baseData,"business_photo",a),this.$refs.baseData.validateField("business_photo");break;case 4:this.$set(this.baseData,"repast_permit_photo",a),this.$refs.baseData.validateField("repast_permit_photo");break;case 5:this.$set(this.baseData,"taxpayer_photo",a)}this.validateFormM()}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-form",{ref:"baseData",staticClass:"shop-model-main",attrs:{model:t.baseData,rules:t.rules,"label-width":"168px"}},[e("el-form-item",{attrs:{label:"法人代表",prop:"legal_person"}},[e("el-input",{staticClass:"up-input-small",on:{input:t.validateFormM},model:{value:t.baseData.legal_person,callback:function(a){t.$set(t.baseData,"legal_person",a)},expression:"baseData.legal_person"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"法人身份证号码",prop:"legal_card"}},[e("el-input",{staticClass:"up-input-small",on:{input:t.validateFormM},model:{value:t.baseData.legal_card,callback:function(a){t.$set(t.baseData,"legal_card",a)},expression:"baseData.legal_card"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"法人身份证照片",prop:"idFrontal"}},[e("div",{staticClass:"clearfix"},[e("div",{staticClass:"fl certificate-left"},[e("div",{staticClass:"certificate-title"},[t._v("\n              正面\n            ")]),t._v(" "),e("Preview-Img",{attrs:{imgSrc:t.baseData.idFrontal,width:"200px",height:"120px",previewImg:t.previewImgObj.idFrontal}}),t._v(" "),e("div",{staticClass:"certificate-upload"},[e("img-upload",{on:{"send-image":function(a){t.getPhoto(1,a)}}})],1)],1),t._v(" "),e("div",{staticClass:"fl certificate-right"},[e("div",{staticClass:"certificate-title"},[t._v("\n              反面\n            ")]),t._v(" "),e("Preview-Img",{attrs:{imgSrc:t.baseData.idReverse,width:"200px",height:"120px",previewImg:t.previewImgObj.idReverse}}),t._v(" "),e("div",{staticClass:"certificate-upload"},[e("img-upload",{on:{"send-image":function(a){t.getPhoto(2,a)}}})],1)],1)]),t._v(" "),e("div",{staticClass:"certi-notes"},[t._v("注：支持JPG、JPEG、PNG文件格式")])]),t._v(" "),e("el-form-item",{attrs:{label:"营业执照注册号",prop:"business_num"}},[e("el-input",{staticClass:"up-input-small",on:{input:t.validateFormM},model:{value:t.baseData.business_num,callback:function(a){t.$set(t.baseData,"business_num",a)},expression:"baseData.business_num"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"商户对公账户",prop:"corporate_num"}},[e("el-input",{staticClass:"up-input-small",on:{input:t.validateFormM},model:{value:t.baseData.corporate_num,callback:function(a){t.$set(t.baseData,"corporate_num",a)},expression:"baseData.corporate_num"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"开户支行",prop:"merchant_num"}},[e("el-input",{staticClass:"up-input-small",on:{input:t.validateFormM},model:{value:t.baseData.merchant_num,callback:function(a){t.$set(t.baseData,"merchant_num",a)},expression:"baseData.merchant_num"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"营业期限",prop:"business_date"}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.baseData.business_date,callback:function(a){t.$set(t.baseData,"business_date",a)},expression:"baseData.business_date"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"餐饮服务许可证编号",prop:"repast_permit_num"}},[e("el-input",{staticClass:"up-input-big",on:{input:t.validateFormM},model:{value:t.baseData.repast_permit_num,callback:function(a){t.$set(t.baseData,"repast_permit_num",a)},expression:"baseData.repast_permit_num"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"营业执照扫描件",prop:"business_photo"}},[e("div",{staticClass:"certi-upload"},[e("Preview-Img",{staticClass:"fl",attrs:{imgSrc:t.baseData.business_photo,width:"170px",height:"120px",previewImg:t.previewImgObj.businessImg}}),t._v(" "),e("div",{staticClass:"fl certi-upload_right"},[e("img-upload",{on:{"send-image":function(a){t.getPhoto(3,a)}}}),t._v(" "),e("div",{staticClass:"certi-notes notes-bott"},[t._v("注：支持JPG、JPEG、PNG文件格式")])],1)],1)]),t._v(" "),e("el-form-item",{attrs:{label:"餐饮服务许可证扫描件",prop:"repast_permit_photo"}},[e("div",{staticClass:"certi-upload"},[e("Preview-Img",{staticClass:"fl",attrs:{imgSrc:t.baseData.repast_permit_photo,width:"170px",height:"120px",previewImg:t.previewImgObj.permissionImg}}),t._v(" "),e("div",{staticClass:"fl certi-upload_right"},[e("img-upload",{on:{"send-image":function(a){t.getPhoto(4,a)}}}),t._v(" "),e("div",{staticClass:"certi-notes notes-bott"},[t._v("注：支持JPG、JPEG、PNG文件格式")])],1)],1)]),t._v(" "),e("el-form-item",{attrs:{label:"纳税人识别号",prop:"taxpayer_num"}},[e("el-input",{staticClass:"up-input-big",model:{value:t.baseData.taxpayer_num,callback:function(a){t.$set(t.baseData,"taxpayer_num",a)},expression:"baseData.taxpayer_num"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"纳税人识别证扫描件"}},[e("div",{staticClass:"certi-upload"},[e("Preview-Img",{staticClass:"fl",attrs:{imgSrc:t.baseData.taxpayer_photo,width:"170px",height:"120px",previewImg:t.previewImgObj.taxpayer_photo}}),t._v(" "),e("div",{staticClass:"fl certi-upload_right"},[e("img-upload",{on:{"send-image":function(a){t.getPhoto(5,a)}}}),t._v(" "),e("div",{staticClass:"certi-notes notes-bott"},[t._v("注：支持JPG、JPEG、PNG文件格式")])],1)],1)]),t._v(" "),e("el-form-item",{attrs:{label:"经营范围",prop:"business_scope"}},[e("el-input",{staticClass:"up-input-big",on:{input:t.validateFormM},model:{value:t.baseData.business_scope,callback:function(a){t.$set(t.baseData,"business_scope",a)},expression:"baseData.business_scope"}})],1)],1),t._v(" "),e("div",{staticClass:"shop-model_foot"},[t._t("footer")],2)],1)},staticRenderFns:[]};var h=e("C7Lr")(m,p,!1,function(t){e("0lzi"),e("1uJ7")},"data-v-5dabb1bc",null);a.a=h.exports},dErF:function(t,a){},"j9r/":function(t,a){},keaO:function(t,a){},rzqn:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("3cXf"),i=e.n(s),r=e("a2vD"),o=e("6nXL"),n=e("9aGi"),c=e("GAg9"),l=e("wNIt"),m=e("N6PA"),p=e("P9l9"),h={data:function(){var t=this;return{agentId:r.a.getAgentid(),tagSelect:["中餐"],tagSelectCopyT:[],shopTag:[{text:o.B.toString(o.B.CHINESE),idx:o.B.CHINESE},{text:o.B.toString(o.B.WESTERN),idx:o.B.WESTERN},{text:o.B.toString(o.B.SOUTHEASTASIA),idx:o.B.SOUTHEASTASIA},{text:o.B.toString(o.B.FAST),idx:o.B.FAST},{text:o.B.toString(o.B.VEGETALE),idx:o.B.VEGETALE},{text:o.B.toString(o.B.CASUAL),idx:o.B.CASUAL},{text:o.B.toString(o.B.DINNER),idx:o.B.DINNER},{text:o.B.toString(o.B.GROUP),idx:o.B.GROUP},{text:o.B.toString(o.B.HOTPOT),idx:o.B.HOTPOT},{text:o.B.toString(o.B.TEADRINK),idx:o.B.TEADRINK},{text:o.B.toString(o.B.INTERNATIONAL),idx:o.B.INTERNATIONAL}],restaurants:[],imgbase_url:"./php",isShowBigImg:!0,showImg:!1,isImg:!0,isSelectError:!1,canotChangeSrc:"",dialogVisible:!0,isNoSalesMen:!1,isCantSbase:!0,shop_img:e("LycU"),basicInfroForm:{from:"",salesMen:"",shop_logo:"",shop_name:"",telephone:"",phone:"",SurePassword:"",password:"",email:"",shop_area:"",cityinfo:{},agent_name:"",shop_address:"",address:"",shopTagArr:[],flooerNo:"",shop_id:""},fromOptions:[],rules:{shop_name:[{required:!0,validator:function(t,a,e){var s=m.b.isSpacebar(a);""===a?e(new Error("请输入店铺名称")):s?e():e(new Error("店铺名称不能包含空格符"))},trigger:"change,blur"}],telephone:[{required:!0,validator:function(t,a,e){var s=m.b.isLandLinePhone(a);return a?s?void e():e(new Error("请输入合法的电话号码")):e(new Error("请输入电话号码"))},trigger:"change,blur"}],shop_area:[{required:!0,validator:function(a,e,s){var i=m.b.isShopArea(e);return e?isNaN(e)?(t.isCantSbase=!0,s(new Error("请输入有效的店铺面积"))):i?void s():(t.isCantSbase=!0,s(new Error("请输入有效的店铺面积(最多保留两位小数)"))):(t.isCantSbase=!0,s(new Error("请输入店铺面积")))},trigger:"change,blur"}],agent_name:[{required:!0,validator:function(t,a,e){var s=m.b.isPersonName(a);""===a?e(new Error("请输入联系人姓名")):s?e():e(new Error("姓名格式可为中英文，不包括特殊数字和字符"))},trigger:"change,blur"}],phone:[{required:!0,validator:function(t,a,e){var s=m.b.isTelePhone(a);return a?s?void e():e(new Error("请输入合法的电话号码")):e(new Error("请输入电话号码"))},trigger:"change,blur"}],email:[{required:!0,validator:function(t,a,e){var s=m.b.isEmail(a);""===a?e(new Error("请输入邮箱地址")):s?e():e(new Error("请输入正确的邮箱格式"))},trigger:"change,blur"}],mypassword:[{required:!0,validator:function(t,a,e){var s=m.b.isPassWord(a);""===a?e(new Error("请输入密码")):(s||e(new Error("密码格式必须是字母、数字，不能使用特殊字符，长度在6-16之间")),e())},trigger:"change,blur"}],SurePassword:[{required:!0,validator:function(a,e,s){""===e?s(new Error("请再次输入密码")):e!==t.basicInfroForm.mypassword?s(new Error("两次输入密码不一致!")):s()},trigger:"change,blur"}],address:[{required:!0,message:"请输入完整地址",trigger:"input"}],from:[{required:!0,message:"请选择来源",trigger:"change,blur"}],salesMen:[{required:!0,message:"请输入销售人员",trigger:"input,change"}]},isCHoosedTag:!1,cityinfo:{province:"",city:"",area:""}}},props:["baseData"],components:{citySelect:n.a,ImgUpload:c.a,codeImg:l.default},computed:{baseDataArr:function(){return this.baseData},isCantInput:function(){return!!this.baseDataArr.shop_id}},mounted:function(){this.restaurants=this.loadAll(),this.isRsets&&this.$refs.basicInfoForm&&this.$refs.basicInfoForm.resetFields()},created:function(){var t=this;this.$nextTick(function(){t.getEmployeeList(),t.getInfo(),t.getFromList()})},methods:{getFromList:function(){var t=this;Object(p.G)({get_from_list:1,only_from:1}).then(function(a){0===a.ret?t.fromOptions=a.data.list:t.$slnotify({message:o.X.toString(a.ret)})})},getInfo:function(){if(this.basicInfroForm.shop_name=this.baseDataArr.shop_name,this.baseDataArr.shop_logo&&this.baseDataArr.shop_id&&(this.basicInfroForm.shop_logo=this.baseDataArr.shop_logo),this.basicInfroForm.shop_area=this.baseDataArr.shop_area,this.basicInfroForm.telephone=this.baseDataArr.telephone,this.basicInfroForm.phone=this.baseDataArr.phone,this.basicInfroForm.salesMen=this.baseDataArr.employee_name,this.basicInfroForm.mypassword=this.baseDataArr.password,this.basicInfroForm.address=this.baseDataArr.address,this.basicInfroForm.from=this.baseDataArr.from,this.basicInfroForm.email=this.baseDataArr.email,this.basicInfroForm.agent_name=this.baseDataArr.real_name,this.basicInfroForm.shop_id=this.baseDataArr.shop_id,this.basicInfroForm.SurePassword=this.baseDataArr.password,this.baseDataArr.shop_model){var t=i()(this.baseDataArr.shop_model);this.tagSelect=JSON.parse(t)}this.cityinfo.area=this.baseDataArr.area,this.cityinfo.city=this.baseDataArr.city,this.cityinfo.province=this.baseDataArr.province,this.baseDataArr&&this.baseDataArr.shop_id&&(this.checkFinishInput("basicInfoForm"),this.checkFinishInput("basicInfoFormLine"))},changeProvinces:function(t){this.cityinfo.province=t.province,this.cityinfo.city=t.city,this.cityinfo.area=t.blocks,""===this.cityinfo.province||""===this.cityinfo.city?this.isSelectError=!0:(this.isSelectError=!1,this.checkFinishInput("basicInfoForm"),this.checkFinishInput("basicInfoFormLine"))},querySearch:function(t,a){var e=this.restaurants,s=t?e.filter(this.createFilter(t)):e;s&&s.length>0?this.isNoSalesMen=!1:(this.$slnotify({message:"请输入选择销售人员",duration:1500}),this.isNoSalesMen=!0),a(s)},createFilter:function(t){return function(a){return 0===a.value.toLowerCase().indexOf(t.toLowerCase())}},getEmployeeList:function(){var t=this,a={get_ag_salesman_list:1,agent_id:r.a.getAgentid(),audit_person:[1,2]};Object(p.c)(a).then(function(a){if(0===a.ret){var e=a.data.list;e&&e.length>0&&e.forEach(function(a){a.value=a.ag_employee_name,t.restaurants.push(a)})}else t.$slnotify({message:o.X.toString(a.ret),duration:1500})})},loadAll:function(){return this.restaurants},getPhoto:function(t){this.basicInfroForm.shop_logo=t,this.isShowBigImg=!0,this.isImg=!0},clickImg:function(){this.showImg=!0,this.isImg=!0,this.basicInfroForm.imgSrc=this.basicInfroForm.imgSrc},viewImg:function(){this.showImg=!1},InputFloorNo:function(){this.checkFinishInput("basicInfoForm"),this.checkFinishInput("basicInfoFormLine")},checkFinishInput:function(t){var a=this;this.basicInfroForm.shop_name&&this.basicInfroForm.telephone&&this.basicInfroForm.phone&&this.basicInfroForm.SurePassword&&this.basicInfroForm.mypassword&&this.basicInfroForm.email&&this.basicInfroForm.shop_area&&this.basicInfroForm.agent_name&&this.basicInfroForm.address&&this.basicInfroForm.salesMen&&this.basicInfroForm.from?this.$refs[t].validate(function(t){if(!t)return a.isCantSbase=!0,!1;a.basicInfroForm.cityinfo=a.cityinfo,a.basicInfroForm.shopTagArr=a.tagSelect,a.isCantSbase=!1}):this.isCantSbase=!0},checkFinishInputLine:function(t){var a=this;this.basicInfroForm.shop_name&&this.basicInfroForm.telephone&&this.basicInfroForm.phone&&this.basicInfroForm.SurePassword&&this.basicInfroForm.mypassword&&this.basicInfroForm.email&&this.basicInfroForm.shop_area&&this.basicInfroForm.agent_name&&this.basicInfroForm.address?this.$refs[t].validate(function(t){if(!t)return a.isCantSbase=!0,!1;a.checkFinishInput("basicInfoForm")}):this.isCantSbase=!0},goBackMerchantList:function(){this.$router.push({path:this.$route.query.upPath})},constSubmit:function(){this.$slnotify({message:"请先填写完整信息"})},goToIcbcInfo:function(){this.isCantSbase?this.constSubmit():this.saveBase(this.basicInfroForm,1)},saveBase:function(t,a){var e=this,s={shop_save:1,agent_id:this.agentId,shop_name:t.shop_name,shop_logo:t.shop_logo,shop_area:t.shop_area,address:t.address,shop_model:this.tagSelect,telephone:t.telephone,province:t.cityinfo.province,city:t.cityinfo.city,area:t.cityinfo.area,from:t.from,employee_name:t.salesMen,phone:t.phone,real_name:t.agent_name,email:t.email,password:t.mypassword,re_password:t.SurePassword,shop_bs_save:1};this.shop_id&&(s.shop_id=this.shop_id),Object(p._7)(s).then(function(t){0===t.ret?1===a?(e.shop_id=t.data.shop_id,e.user_id=t.data.userid,e.$emit("goNextStep",e.shop_id)):(e.isCantSbase=!0,scrollTo(0,0),e.baseDataArr.shop_id="",e.cityinfo.province="",e.cityinfo.city="",e.cityinfo.area="",e.tagSelect=["中餐"],e.$refs.basicInfoForm.resetFields(),e.$refs.basicInfoFormLine.resetFields()):e.$slnotify({message:o.X.toString(t.ret)})})},saveInfoSubmit:function(){this.saveBase(this.basicInfroForm,2)}}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"agent-merchant-creat"}},[e("div",{staticClass:"up-part"},[e("el-form",{ref:"basicInfoFormLine",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.basicInfroForm,rules:t.rules}},[e("el-form-item",{attrs:{label:"代理商ID"}},[e("span",[t._v(t._s(t.agentId))])]),t._v(" "),e("el-form-item",{attrs:{label:"销售人员",prop:"salesMen"}},[t.isCantInput?e("span",[t._v(t._s(t.basicInfroForm.salesMen))]):e("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容"},on:{select:function(a){t.checkFinishInputLine("basicInfoFormLine")},input:function(a){t.checkFinishInputLine("basicInfoFormLine")}},model:{value:t.basicInfroForm.salesMen,callback:function(a){t.$set(t.basicInfroForm,"salesMen",a)},expression:"basicInfroForm.salesMen"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"来源",prop:"from"}},[t.isCantInput?e("span",[t._v(t._s(t.baseData.from))]):e("el-select",{attrs:{placeholder:"请选择来源"},on:{change:function(a){t.checkFinishInputLine("basicInfoFormLine")}},model:{value:t.basicInfroForm.from,callback:function(a){t.$set(t.basicInfroForm,"from",a)},expression:"basicInfroForm.from"}},t._l(t.fromOptions,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1)],1),t._v(" "),e("div",{staticClass:"down-part"},[e("el-form",{ref:"basicInfoForm",staticClass:"demo-ruleForm",attrs:{"label-width":"100px",model:t.basicInfroForm,rules:t.rules}},[e("el-form-item",{attrs:{label:"店铺名称",prop:"shop_name"}},[e("el-input",{attrs:{placeholder:"请输入店铺名称"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.shop_name,callback:function(a){t.$set(t.basicInfroForm,"shop_name",a)},expression:"basicInfroForm.shop_name"}})],1),t._v(" "),e("el-form-item",{staticClass:"shop-logo",attrs:{label:"店铺Logo",prop:"shop_logo"}},[t.isShowBigImg?e("div",{staticClass:"logoImg float-left"},[t.isImg?e("div",{staticClass:"img left"},[e("div",{staticClass:"mask"}),t._v(" "),t.basicInfroForm.shop_logo&&""!==t.basicInfroForm.shop_logo?e("img",{attrs:{src:t.imgbase_url+"/img_get.php?img=1&height=100&width=100&imgname="+t.basicInfroForm.shop_logo,alt:""}}):e("img",{attrs:{src:t.shop_img}}),t._v(" "),e("i",{staticClass:"el-icon-zoom-in",on:{click:t.clickImg}})]):t._e()]):t._e(),t._v(" "),t.showImg&&t.basicInfroForm.shop_logo?e("code-img",{attrs:{imgSrc:t.basicInfroForm.shop_logo},on:{clickit:t.viewImg}}):t._e(),t._v(" "),e("img-upload",{staticClass:"img-upload",attrs:{FreedomCrop:!1},on:{"send-image":t.getPhoto}}),t._v(" "),e("div",{staticClass:"text-warp"},[e("p",[t._v("注:支持JPG、JPEG、PNG文件格式,大小不超过5M")])])],1),t._v(" "),e("el-form-item",{attrs:{label:"商户联系人",prop:"agent_name"}},[t.isCantInput?e("span",[t._v(t._s(t.basicInfroForm.agent_name))]):e("el-input",{attrs:{placeholder:"请输入联系人姓名"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.agent_name,callback:function(a){t.$set(t.basicInfroForm,"agent_name",a)},expression:"basicInfroForm.agent_name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[e("el-input",{attrs:{placeholder:"请输入联系电话"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.telephone,callback:function(a){t.$set(t.basicInfroForm,"telephone",a)},expression:"basicInfroForm.telephone"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t.isCantInput?e("span",[t._v(t._s(t.basicInfroForm.phone))]):e("el-input",{attrs:{placeholder:"请输入手机号码(默认登录账号)"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.phone,callback:function(a){t.$set(t.basicInfroForm,"phone",a)},expression:"basicInfroForm.phone"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"账户密码",prop:"mypassword"}},[t.isCantInput?e("span",[t._v("******")]):e("el-input",{attrs:{placeholder:"请输入6-16位密码",type:"password"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.mypassword,callback:function(a){t.$set(t.basicInfroForm,"mypassword",a)},expression:"basicInfroForm.mypassword"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"确认密码",prop:"SurePassword"}},[t.isCantInput?e("span",[t._v("******")]):e("el-input",{attrs:{placeholder:"请输入6-16位密码",type:"password"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.SurePassword,callback:function(a){t.$set(t.basicInfroForm,"SurePassword",a)},expression:"basicInfroForm.SurePassword"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t.isCantInput?e("span",[t._v(t._s(t.basicInfroForm.email))]):e("el-input",{attrs:{placeholder:"请输入邮箱地址"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.email,callback:function(a){t.$set(t.basicInfroForm,"email",a)},expression:"basicInfroForm.email"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"商户面积",prop:"shop_area"}},[e("el-input",{attrs:{placeholder:"请输入商户面积"},on:{input:function(a){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.shop_area,callback:function(a){t.$set(t.basicInfroForm,"shop_area",a)},expression:"basicInfroForm.shop_area"}}),t._v(" "),e("span",{staticClass:"black"},[t._v("m²")])],1),t._v(" "),e("el-form-item",{class:{"is-error":t.isSelectError},attrs:{label:"商户地址",prop:"address"}},[e("city-select",{staticClass:"city-select",attrs:{isSelectError:t.isSelectError,cityinfo:t.cityinfo},on:{changeProvinces:t.changeProvinces}}),t._v(" "),e("div",[e("el-input",{attrs:{placeholder:"街道楼盘名称房号"},on:{input:t.InputFloorNo},model:{value:t.basicInfroForm.address,callback:function(a){t.$set(t.basicInfroForm,"address",a)},expression:"basicInfroForm.address"}})],1),t._v(" "),t.isSelectError?e("p",[t._v("请输入街道楼盘名称房号")]):t._e()],1),t._v(" "),e("el-form-item",{staticClass:"select-must",attrs:{label:"商户业态"}},[e("el-checkbox-group",{attrs:{min:1},model:{value:t.tagSelect,callback:function(a){t.tagSelect=a},expression:"tagSelect"}},t._l(t.shopTag,function(a){return e("el-checkbox-button",{key:a.text,class:{"sl-btn-select-active":t.tagSelect.indexOf(a.text)>-1},attrs:{label:a.text}},[t._v("\n            "+t._s(a.text)+"\n          ")])}),1),t._v(" "),e("span",[t._v("(注 : 最多选择两个业态)")])],1)],1)],1),t._v(" "),e("div",{staticClass:"footer"},[t.isCantSbase?e("div",[e("div",{staticClass:"cant-click-btn sl-btn-bg-b-gray"},[t._v("下一步")]),t._v(" "),e("div",{staticClass:"can-click-btn sl-btn-bg-b-gray"},[t._v("保存并提交")]),t._v(" "),e("div",{staticClass:"cancel-btn sl-btn-bd-b-blue",on:{click:t.goBackMerchantList}},[t._v("取消")])]):e("div",[e("div",{staticClass:"cant-click-btn sl-btn-bd-b-blue",on:{click:t.goToIcbcInfo}},[t._v("下一步")]),t._v(" "),e("div",{staticClass:"can-click-btn sl-btn-bd-b-blue",on:{click:t.saveInfoSubmit}},[t._v("保存并提交")]),t._v(" "),e("div",{staticClass:"cancel-btn sl-btn-bd-b-blue",on:{click:t.goBackMerchantList}},[t._v("取消")])])])])},staticRenderFns:[]};var b=e("C7Lr")(h,u,!1,function(t){e("dErF"),e("j9r/")},"data-v-76ff00e4",null);a.default=b.exports},"ysq/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("aA9S"),i=e.n(s),r=e("PTAg"),o=e("rzqn"),n=e("P9l9"),c=e("a2vD"),l=e("6nXL"),m={data:function(){return{agentId:c.a.getAgentid(),isShowBaseInfo:!0,baseInfo:{},shop_id:"",user_id:"",baseData:{},userData:{},formBusiness:{},isCantSbsiness:!0,isCantSbase:!0,isRset:!1,addTabTitle:"商户列表"}},components:{creatMerchant:o.default,ShopBusinessData:r.a},created:function(){},beforeRouteEnter:function(t,a,e){"/agent/area/certificate"==a.path?e(function(t){t.addTabTitle="商户认证"}):e()},methods:{fromBaseInfo:function(t){this.isCantSbase=!1,this.baseInfo=t},cantSubmit:function(){this.isCantSbase=!0},goNextStep:function(t){this.shop_id=t,this.isShowBaseInfo=!1},validateForm:function(t,a){t?(this.isCantSbsiness=!1,this.formBusiness=a):this.isCantSbsiness=!0},goToBaseInfo:function(){var t=this;this.isShowBaseInfo=!0;var a={get_shop_info:1,shop_bs_info:1,shop_id:this.shop_id};Object(n._6)(a).then(function(a){0===a.ret?t.baseData=a.data.shopinfo:t.$slnotify({message:l.X.toString(a.ret)})})},goToMerchantList:function(){var t=this,a={business_save:1,shop_id:this.shop_id,add:1};a=i()({},a,this.formBusiness),Object(n.w)(a).then(function(a){0===a.ret?(t.$slnotify({message:"提交成功",duration:1500}),t.goBackMerchantList()):t.$slnotify({message:l.X.toString(a.ret),duration:1500})})},goBackMerchantList:function(){this.$router.push("/agent/area/merchant")},constSubmit:function(){this.$slnotify({message:"请先填写完整信息"})}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"new-merchant"},[e("div",{staticClass:"nav-bar"},[e("span",{on:{click:t.goBackMerchantList}},[t._v(t._s(t.addTabTitle)+">")]),t._v(" "),e("span",{staticClass:"text-blue"},[t._v("新增商户")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowBaseInfo,expression:"isShowBaseInfo"}],staticClass:"base-content"},[e("creat-merchant",{attrs:{baseData:t.baseData},on:{goNextStep:t.goNextStep}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowBaseInfo,expression:"!isShowBaseInfo"}],staticClass:"icbc-content"},[e("shop-business-data",{on:{validateForm:t.validateForm}})],1),t._v(" "),t.isShowBaseInfo?t._e():e("div",{staticClass:"footer"},[e("div",{staticClass:"cant-click-btn sl-btn-bd-b-blue",on:{click:t.goToBaseInfo}},[t._v("上一步")]),t._v(" "),t.isCantSbsiness?e("div",{staticClass:"can-click-btn sl-btn-bg-b-gray",on:{click:t.constSubmit}},[t._v("提交")]):e("div",{staticClass:"can-click-btn sl-btn-bd-b-blue",on:{click:t.goToMerchantList}},[t._v("提交")])])])},staticRenderFns:[]};var h=e("C7Lr")(m,p,!1,function(t){e("+2X3"),e("keaO")},"data-v-481df25c",null);a.default=h.exports}});