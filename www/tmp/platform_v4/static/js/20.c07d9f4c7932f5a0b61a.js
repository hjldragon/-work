webpackJsonp([20,82,148],{"1t2I":function(t,e){},"25J5":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),n=s("XRCa"),r=s("9rMa"),l=s("Tr5C"),o=s("6nXL"),c=s("P9l9"),h=s("a2vD"),u={components:{certiSearch:n.default,certiTable:l.default},data:function(){return{shop_id:null,userid:h.a.getUserid(),searchMain:{business_status:o.a.DURING,shop_name:"",shop_id:"",from:"",employee_name:"",begin_time:"",end_time:"",agent_name:""},sort_name:"ctime",desc:-1,list:[],emptyType:1,total:10,listQuery:{page:1,limit:10},businessStatus:o.a.DURING}},created:function(){},computed:a()({},Object(r.d)({ACS:function(t){return t.perimission.sysPermis},PL_K:function(t){return t.perimission.PL_K}})),methods:{getList:function(){var t=this;this.businessStatus=this.searchMain.business_status;var e={shop_business_list:1,sort_name:this.sort_name,business_status:this.searchMain.business_status,employee_name:this.searchMain.employee_name,from:this.searchMain.from,shop_id:this.searchMain.shop_id,begin_time:this.searchMain.begin_time,end_time:this.searchMain.end_time,shop_name:this.searchMain.shop_name,agent_name:this.searchMain.agent_name,desc:this.desc,page_size:this.listQuery.limit,page_no:this.listQuery.page,platform:1};Object(c._6)(e).then(function(e){0===e.ret?(t.list=e.data.list,t.total=e.data.total,t.listQuery.page>1&&0===t.list.length&&(t.listQuery.page--,t.getList())):t.$slnotify({message:o.X.toString(e.ret)})})},search_m:function(t){this.searchMain.shop_name=t.shop_name||"",this.searchMain.shop_id=t.shop_id||"",this.searchMain.from=t.from||"",this.searchMain.begin_time=t.begin_time||"",this.searchMain.end_time=t.end_time||"",this.searchMain.employee_name=t.employee_name||"",this.searchMain.business_status=t.business_status,this.searchMain.agent_name=t.agent_name||"",this.emptyType=2,this.listQuery.page=1,this.getList()},sort:function(t){this.sort_name=t.prop,"descending"===t.order?this.desc=-1:"ascending"===t.order&&(this.desc=1,this.getList())},handleSizeChange:function(t){this.listQuery.limit=t,this.listQuery.page=1,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},certifiPush:function(t){this.ACS[this.PL_K.PL_SHOP_SAVE_BS]?(this.shop_id=t.id,this.$router.push({path:"/officialmanage/shopCertiApply",query:{shop_id:this.shop_id,upPath:this.$route.path,apply:!1}})):this.$slnotify({message:"操作权限不足"})},certifiApply:function(t){this.ACS[this.PL_K.SHOP_APPLY_CER]?(this.shop_id=t.id,this.$router.push({path:"/officialmanage/shopCertiApply",query:{shop_id:this.shop_id,upPath:this.$route.path,apply:!0}})):this.$slnotify({message:"操作权限不足"})},certifi:function(t){this.ACS[this.PL_K.SHOP_AUDIT]?(this.shop_id=t.id,this.$router.push({path:"/officialmanage/shopCertifipage",query:{shop_id:this.shop_id,agent_name:t.agent_name}})):this.$slnotify({message:"操作权限不足"})},certifiPro:function(t,e){this.ACS[this.PL_K.AUDIT_PLAN]?(this.shop_id=t.id,this.$router.push({path:"/officialmanage/shopCertiResult",query:{shop_id:this.shop_id,title:e,audit_plan:t.audit_plan,business_status:t.business_status}})):this.$slnotify({message:"操作权限不足"})},onKeyCerti:function(t){var e=this;if(this.ACS[this.PL_K.SHOP_AUDIT]){var s={one_power_audit:1,userid:this.userid};s.shop_id=t.id,Object(c.u)(s).then(function(t){0===t.ret?(e.getList(),e.$slnotify({message:"管理员一键审核商户成功"})):e.$slnotify({message:o.X.toString(t.ret)})})}else this.$slnotify({message:"操作权限不足"})}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"agent-certi-box"},[t._m(0),t._v(" "),s("certi-search",{on:{search:t.search_m}}),t._v(" "),s("div",{staticClass:"table-content change-default"},[s("certi-table",{attrs:{list:t.list,emptyType:t.emptyType,businessStatus:t.businessStatus},on:{certifi:t.certifi,certifiPro:t.certifiPro,certifiPush:t.certifiPush,certifiApply:t.certifiApply,onKeyCerti:t.onKeyCerti,sort:t.sort}})],1),t._v(" "),s("div",{staticClass:"pagination-content change-pagination-default"},[s("el-pagination",{staticClass:"page-el",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-own-bar"},[e("span",{staticClass:"cant-click-nav"},[this._v("商户管理")]),this._v("\n    >\n    "),e("span",{staticClass:"current-nav"},[this._v("商户认证")])])}]};var _=s("C7Lr")(u,p,!1,function(t){s("VWoI"),s("1t2I")},"data-v-627748c6",null);e.default=_.exports},TmIf:function(t,e){},Tr5C:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("aA9S"),a=s.n(i),n=s("4YfN"),r=s.n(n),l=s("r2UX"),o=(s("EuEE"),s("6nXL")),c=s("a2vD"),h=s("9rMa"),u={components:{EmptyTable:l.a},data:function(){return{AgentBusinessStatus:o.a,auditPlan:c.a.getAuditPer(),isAdmin:c.a.getIsAdmin(),wxDialogShow:!1,certiTitle:"",certifiObj:null}},props:{list:{type:[Array,Object],default:function(){return[]}},emptyType:{type:[Number],default:1},businessStatus:{type:[Number,Array]}},computed:r()({isListEmpty:function(){return 0===this.list.length},waitCertifi:function(){return this.businessStatus==o.a.DURING},noCertifi:function(){return this.businessStatus==o.a.NO},errCertifi:function(){return this.businessStatus==o.a.FAIL}},Object(h.d)({ACS:function(t){return t.perimission.sysPermis},PL_K:function(t){return t.perimission.PL_K}})),methods:{certifi:function(t){if(!this.ACS[this.PL_K.SHOP_AUDIT])return this.$slnotify({message:"操作权限不足"});var e=a()({},t);this.$emit("certifi",e)},certifiPro:function(t,e){if(1==e&&!this.ACS[this.PL_K.AUDIT_PLAN])return this.$slnotify({message:"操作权限不足"});var s=a()({},t);this.$emit("certifiPro",s,e)},certifiPush:function(t){if(!this.ACS[this.PL_K.PL_SHOP_SAVE_BS])return this.$slnotify({message:"操作权限不足"});var e=a()({},t);this.$emit("certifiPush",e)},certifiApply:function(t){if(!this.ACS[this.PL_K.SHOP_APPLY_CER])return this.$slnotify({message:"操作权限不足"});var e=a()({},t);this.$emit("certifiApply",e)},handlerOnKey:function(t){this.wxDialogShow=!0,this.certiTitle=t.shop_name,this.certifiObj=a()({},t)},onKeyCerti:function(t){this.wxDialogShow=!1,this.$emit("onKeyCerti",this.certifiObj)},sort:function(t){this.$emit("sort",t)},clearClose:function(){this.wxDialogShow=!1,this.certifiObj={}}},mounted:function(){this.$refs.merchantAuthenticationTable.$refs.bodyWrapper.style.minHeight="460px"}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"certi-table-id"},[s("el-table",{ref:"merchantAuthenticationTable",attrs:{data:t.list,stripe:"","default-sort":{prop:"ctime",order:"descending"}},on:{"sort-change":t.sort}},[s("el-table-column",{attrs:{type:"index",sortable:"",label:"序号",align:"center",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"ctime",label:"新增时间","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("formatTimeD")(e.row.ctime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID","min-width":"50",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"shop_name",label:"商户名称","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.shop_name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"agent_type",label:"代理商名称","min-width":"50",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.agent_name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.province+e.row.city+e.row.area+e.row.address||"--"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"from_salesman",label:"销售人员","min-width":"50",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.employee_name||"--"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"from",label:"来源","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.from||"--"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"business_status",label:"认证状态",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:{"err-status":e.row.business_status==t.AgentBusinessStatus.FAIL}},[t._v(t._s(t._f("shopState")(e.row.business_status)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"operate",label:"操作","min-width":"130",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.waitCertifi?s("span",[t.isAdmin?t._e():s("span",[s("span",{staticClass:"examine-btn btn-oprate-green certi-btn-big",on:{click:function(s){t.certifiPro(e.row,1)}}},[t._v("审核进度")])]),t._v(" "),t.isAdmin?s("span",[s("span",{staticClass:"btn-oprate-blue certi-btn-big",on:{click:function(s){t.handlerOnKey(e.row)}}},[t._v("一键审核")])]):t._e()]):t._e(),t._v(" "),t.errCertifi?s("span",[s("span",{staticClass:"examine-btn btn-oprate-blue certi-btn-big",on:{click:function(s){t.certifiPush(e.row)}}},[t._v("补充资料")]),t._v(" "),s("span",{staticClass:"examine-btn btn-oprate-green certi-btn-big",on:{click:function(s){t.certifiPro(e.row,2)}}},[t._v("审核结果")])]):t._e(),t._v(" "),t.noCertifi?s("span",[s("span",{staticClass:"examine-btn btn-oprate-blue certi-btn-big",on:{click:function(s){t.certifiApply(e.row)}}},[t._v("申请认证")])]):t._e()]}}])})],1),t._v(" "),t.isListEmpty?s("empty-table",{attrs:{type:t.emptyType}}):t._e(),t._v(" "),s("el-dialog",{attrs:{visible:t.wxDialogShow,top:"35vh",width:"520px"},on:{"update:visible":function(e){t.wxDialogShow=e},close:t.clearClose}},[s("div",[s("div",{staticClass:"head-nav"},[s("span",[t._v("商户一键审核")])]),t._v(" "),s("div",{staticClass:"dialog-main-c"},[t._v("\n\n        确定一键通过审核 商户: "+t._s(t.certiTitle)+"?\n      ")]),t._v(" "),s("div",{staticClass:"foot-btn-box"},[s("div",{staticClass:"btn of-btn-bd-m-blue",on:{click:t.clearClose}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"btn save-s-gradient",on:{click:t.onKeyCerti}},[t._v("确定")])])])])],1)},staticRenderFns:[]};var _=s("C7Lr")(u,p,!1,function(t){s("a8lB"),s("TmIf")},"data-v-461396dc",null);e.default=_.exports},VWoI:function(t,e){},XRCa:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("aA9S"),a=s.n(i),n=s("4YfN"),r=s.n(n),l=s("9rMa"),o=s("6nXL"),c=s("P9l9"),h=s("a2vD"),u=s("6ROu"),p=s.n(u),_={data:function(){return{width:"300px",state1:null,employee_list:[],agentid:h.a.getAgentid(),statusOption:[{label:o.a.toString(o.a.NO),value:o.a.NO},{label:o.a.toString(o.a.DURING),value:o.a.DURING},{label:o.a.toString(o.a.FAIL),value:o.a.FAIL}],fromOption:[],employeeOptions:[],searchMain:{business_status:o.a.DURING,shop_name:"",shop_id:"",from:null,employee_name:null,date:"",begin_time:"",end_time:"",agent_name:null}}},created:function(){this.getEmployeeOption(),this.getFromList();var t=this.pageSearchState[this.$route.path];t&&(this.searchMain.business_status=t.business_status),this.search()},watch:{"searchMain.date":function(t){return t?(this.searchMain.begin_time=parseInt(p()(t[0]).format("X")),this.searchMain.end_time=parseInt(p()(t[1]).format("X"))+86400):(this.searchMain.begin_time="",this.searchMain.end_time=""),t}},computed:r()({},Object(l.d)({pageSearchState:function(t){return t.app.pageSearchState}})),methods:r()({},Object(l.c)(["PAGE_SEARCH_STATE"]),{search:function(){var t=a()({},this.searchMain);this.PAGE_SEARCH_STATE({key:this.$route.path,value:t}),this.$emit("search",t)},getEmployeeOption:function(){var t=this,e={get_ag_salesman_list:1,agent_id:h.a.getPlAgentid(),audit_person:[1,2]};Object(c.c)(e).then(function(e){0===e.ret?t.employeeOptions=e.data.list:t.$slnotify({message:o.X.toString(e.ret)})})},getFromList:function(){var t=this;Object(c.G)({get_from_list:1,only_from:1}).then(function(e){0===e.ret?t.fromOption=e.data.list:t.$slnotify({message:o.X.toString(e.ret)})})}})},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-content clearfix search-content-width-fix"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"name fl clearfix search-item"},[t._m(0),t._v(" "),s("div",{staticClass:"fl"},[s("el-input",{attrs:{placeholder:"请输商户名称"},model:{value:t.searchMain.shop_name,callback:function(e){t.$set(t.searchMain,"shop_name",e)},expression:"searchMain.shop_name"}})],1)]),t._v(" "),s("div",{staticClass:"name fl clearfix search-item"},[t._m(1),t._v(" "),s("div",{staticClass:"fl"},[s("el-input",{attrs:{placeholder:"商户ID"},model:{value:t.searchMain.shop_id,callback:function(e){t.$set(t.searchMain,"shop_id",e)},expression:"searchMain.shop_id"}})],1)]),t._v(" "),s("div",{staticClass:"name fl clearfix search-item"},[t._m(2),t._v(" "),s("div",{staticClass:"fl"},[s("el-select",{attrs:{placeholder:"全部"},model:{value:t.searchMain.from,callback:function(e){t.$set(t.searchMain,"from",e)},expression:"searchMain.from"}},[s("el-option",{key:"全部",attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.fromOption,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})})],2)],1)]),t._v(" "),s("div",{staticClass:"name fl clearfix search-item"},[t._m(3),t._v(" "),s("div",{staticClass:"fl"},[s("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchMain.date,callback:function(e){t.$set(t.searchMain,"date",e)},expression:"searchMain.date"}})],1)])]),t._v(" "),s("div",{staticClass:"clearfix"},[s("div",{staticClass:"name fl clearfix search-item"},[t._m(4),t._v(" "),s("div",{staticClass:"fl"},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.searchMain.agent_name,callback:function(e){t.$set(t.searchMain,"agent_name",e)},expression:"searchMain.agent_name"}})],1)]),t._v(" "),s("div",{staticClass:"name fl clearfix search-item"},[t._m(5),t._v(" "),s("div",{staticClass:"fl"},[s("el-select",{attrs:{placeholder:"全部"},model:{value:t.searchMain.employee_name,callback:function(e){t.$set(t.searchMain,"employee_name",e)},expression:"searchMain.employee_name"}},[s("el-option",{key:"全部",attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.employeeOptions,function(t){return s("el-option",{key:t.ag_employee_name,attrs:{label:t.ag_employee_name,value:t.ag_employee_name}})})],2)],1)]),t._v(" "),s("div",{staticClass:"name fl clearfix search-item"},[t._m(6),t._v(" "),s("div",{staticClass:"fl"},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.searchMain.business_status,callback:function(e){t.$set(t.searchMain,"business_status",e)},expression:"searchMain.business_status"}},t._l(t.statusOption,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),s("div",{staticClass:"name fl clearfix search-item"},[s("div",{staticClass:"fr search-btn-box"},[s("div",{staticClass:"search-btn of-btn-bd-search fl",on:{click:t.search}},[t._v("搜索")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("商户名称:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("商户ID:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("来源")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("新增时间:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("代理商名称:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("销售人员:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"label-text"},[this._v("状态:")])])}]};var m=s("C7Lr")(_,f,!1,function(t){s("gEjP")},"data-v-1b36741e",null);e.default=m.exports},a8lB:function(t,e){},gEjP:function(t,e){}});