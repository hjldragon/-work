webpackJsonp([90],{OlVn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("6nXL"),s=n("P9l9"),a=(n("EuEE"),n("r2UX")),r=n("7vbe"),l={components:{EmptyTable:a.a,DialogWarnTip:r.default},data:function(){return{vendor_ownership:"",vendor_name:"",list:[],emptyType:1,multipleSelection:[],total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,DamangeVendorNotice:i.k,tipVisiable:!1,tipTitle:"提示信息",tipText:"确定要通知运营商？",operatVendor:null}},computed:{isListEmpty:function(){return 0===this.list.length}},created:function(){this.getList()},mounted:function(){this.$refs.damangeVendorListTableAdjust.$refs.bodyWrapper.style.minHeight="518px"},methods:{getList:function(){var t=this,e={get_vendor_list:1,vendor_status:i.V.DAMAGE,page_size:this.listQuery.limit,page_no:this.listQuery.page};this.vendor_ownership&&(e.ownership=this.vendor_ownership),this.vendor_name&&(e.vendor_name=this.vendor_name),this.isSort&&(e.sortby=this.sortLabel,e.sort=this.sortOrder),Object(s._14)(e).then(function(e){0===e.ret?(t.list=e.data.vendor_list||[],t.total=e.data.total,t.list=t.list.map(function(t){return t.address_str=""+t.province+t.city+t.area+t.address,t})):t.$slnotify({message:i.X.toString(e.ret)})})},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},search:function(){this.emptyType=2,this.listQuery.page=1,this.getList()},openTipDialog:function(t){this.operatVendor=t,this.tipVisiable=!0},handelTipDialogCancel:function(){this.operatVendor=null,this.tipVisiable=!1},handleDeleteConfirm:function(){var t=this,e={send_fault:1,fault_id:this.operatVendor.fault_id};Object(s.D)(e).then(function(e){0===e.ret?(t.getList(),t.handelTipDialogCancel()):t.$slnotify({message:i.X.toString(e.ret)})})}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"vendor-damage-machine"}},[n("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:">"}},[n("el-breadcrumb-item",[t._v("设备管理")]),t._v(" "),n("el-breadcrumb-item",[t._v("故障设备")])],1),t._v(" "),n("div",{staticClass:"vendor-damage-content"},[t._m(0),t._v(" "),n("div",{staticClass:"search-content clearfix"},[n("div",{staticClass:"search-left fl clearfix"},[n("div",{staticClass:"search-item fl vendor_ownership"},[n("span",{staticClass:"label-title"},[t._v("设备所有权")]),t._v(" "),n("el-input",{attrs:{placeholder:"运营商或者服务商名称"},model:{value:t.vendor_ownership,callback:function(e){t.vendor_ownership=e},expression:"vendor_ownership"}})],1),t._v(" "),n("div",{staticClass:"search-item fl vendor_name"},[n("span",{staticClass:"label-title"},[t._v("名称/编号")]),t._v(" "),n("el-input",{attrs:{placeholder:"名称/编号"},model:{value:t.vendor_name,callback:function(e){t.vendor_name=e},expression:"vendor_name"}})],1),t._v(" "),n("div",{staticClass:"search-item search-btn-h-28 fl",on:{click:t.search}},[t._v("搜索")])]),t._v(" "),n("div",{staticClass:"search-right fr"},[n("div",{staticClass:"search-item search-btn-h-28",on:{click:t.search}},[t._v("刷新")])])]),t._v(" "),n("div",{staticClass:"table-content change-default"},[n("el-table",{ref:"damangeVendorListTableAdjust",attrs:{data:t.list,stripe:""},on:{"sort-change":t.sort}},[n("el-table-column",{attrs:{prop:"vendor_num",label:"设备编号","min-width":"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.vendor_num))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"vendor_name",label:"设备名称","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.vendor_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.address_str))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"vendor_num",label:"生产编号","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.vendor_num))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"sell_goods_type",label:"型号","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.sell_goods_type))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"fault_num",label:"故障次数","min-width":"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.fault_num))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"ownership",label:"设备所有权","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.ownership))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"opr",label:"操作","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"table-oprbtn-group"},[e.row.is_inform===t.DamangeVendorNotice.NO?n("span",{staticClass:"opr-btn",on:{click:function(n){t.openTipDialog(e.row)}}},[t._v("通知运营商")]):t._e(),t._v(" "),e.row.is_inform===t.DamangeVendorNotice.YES?n("span",{staticClass:"opr-btn"},[t._v("已通知")]):t._e()])]}}])})],1),t._v(" "),t.isListEmpty?n("empty-table",{attrs:{type:t.emptyType}}):t._e()],1),t._v(" "),n("div",{staticClass:"pagination-contentrr change-pagination-default"},[n("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)]),t._v(" "),n("dialog-warn-tip",{attrs:{text:t.tipText,title:t.tipTitle,visible:t.tipVisiable},on:{"on-cancel":t.handelTipDialogCancel,"on-confirm":t.handleDeleteConfirm}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"change-titlerr"},[e("span",[this._v("故障列表")])])}]};var c=n("C7Lr")(l,o,!1,function(t){n("c2/E"),n("e5O2")},"data-v-1eb711ac",null);e.default=c.exports},"c2/E":function(t,e){},e5O2:function(t,e){}});