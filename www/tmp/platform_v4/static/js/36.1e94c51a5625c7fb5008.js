webpackJsonp([36,87],{"9oVi":function(s,t){},RppQ:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("4YfN"),a=e.n(o),i=e("9rMa"),c=e("P9l9"),l=e("6nXL"),n={data:function(){return{firstCate:"",secondCate:"",cateById:{},secondData:[],list:[{category_id:"11",category_name:"实体商品",list:[{category_id:"111",category_name:"硬件",list:[{category_id:"1111",category_name:"收银机"},{category_id:"1112",category_name:"收银机"},{category_id:"1114",category_name:"收银机"}]}]},{category_id:"22",category_name:"虚拟商品"}],categoryArr:[],parentId:""}},computed:a()({},Object(i.d)({category_id_list:function(s){return s.vendor_manage.category_id_list}}),{thirdDisabled:function(){return!1}}),watch:{category_id_list:{handler:function(){this.getCategorys()},deep:!0}},created:function(){this.getCategorys()},methods:a()({},Object(i.c)(["VMG_SET_GOODCATEID"]),{init:function(){this.firstCate=this.category_id_list[0]||"",this.secondCate=this.category_id_list[1]||"",this.cateById=this.getCateById(this.list),this.firstCate&&(this.secondData=(this.cateById[this.firstCate]||{}).list||[])},setGoodCateId:function(){this.VMG_SET_GOODCATEID({category_id_list:[this.firstCate,this.secondCate]})},getCategorys:function(){var s=this,t={vg_category_list:1,shop_id:l.Q.shop_id};Object(c._16)(t).then(function(t){0===t.ret?(s.list=t.data.list,s.init()):s.$slnotify({message:l.X.toString(t.ret)})})},getCateById:function(){var s={};return function t(e){e.forEach(function(e){e.hasOwnProperty("category_id")&&(s[e.category_id]=e),e.hasOwnProperty("list")&&e.list.length>0&&t(e.list)})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s},handlerFirstChange:function(){this.secondCate="",this.secondData=(this.cateById[this.firstCate]||{}).list||[],this.setGoodCateId(),this.$emit("on-change",this.firstCate)},handlerSecondChange:function(){this.setGoodCateId(),this.$emit("on-change",this.secondCate)}})},r={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"select-cate clearfix",attrs:{id:"vendor-manage-goods-cate"}},[e("div",{staticClass:"first-cate fl"},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:s.handlerFirstChange},model:{value:s.firstCate,callback:function(t){s.firstCate=t},expression:"firstCate"}},s._l(s.list,function(s){return e("el-option",{key:s.category_id,attrs:{label:s.category_name,value:s.category_id}})}),1)],1),s._v(" "),e("div",{staticClass:"second-cate fl"},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:s.handlerSecondChange},model:{value:s.secondCate,callback:function(t){s.secondCate=t},expression:"secondCate"}},s._l(s.secondData,function(s){return e("el-option",{key:s.category_id,attrs:{label:s.category_name,value:s.category_id}})}),1)],1)])},staticRenderFns:[]};var _=e("C7Lr")(n,r,!1,function(s){e("aRe1"),e("9oVi")},"data-v-37bcd3a6",null);t.default=_.exports},STbp:function(s,t){},aRe1:function(s,t){},c5Ze:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("4YfN"),a=e.n(o),i=e("GAg9"),c=e("7+am"),l=e("RppQ"),n=e("/hEl"),r=e("P9l9"),_=e("6nXL"),d=e("9rMa"),g=e("EuEE"),p={components:{SlUpload:i.a,PrePicture:c.a,SelectCate:l.default,SelectCheckbox:n.default},data:function(){return{vendor_goods_id:"",goods_name:"",goods_cate:"",goods_produce_comp:"",goods_spec:"",goods_price:"",goods_cost_price:"",goods_stock_num:"",goods_bar_code:"",goods_pic_fir:"",goods_pic_sec:"",goods_weight:"",selectWeight:!0,noBarCode:!1,base_url:"./php",preImg:"",showPicture:!1}},computed:a()({},Object(d.d)({category_id_list:function(s){return s.vendor_manage.category_id_list}}),{secondCate:function(){return this.category_id_list[1]},picArr:function(){var s=[];return s.push(this.goods_pic_fir),s.push(this.goods_pic_sec),s},showSaveBtn:function(){return!!(this.goods_name&&this.secondCate&&this.goods_spec&&this.goods_price&&this.goods_cost_price&&this.goods_stock_num&&this.goods_weight&&(this.goods_bar_code||this.noBarCode))}}),watch:{noBarCode:function(s){s&&(this.goods_bar_code="")}},created:function(){this.vendor_goods_id=this.$route.query.goodsid||"",this.vendor_goods_id&&this.getGoodsInfo()},methods:a()({},Object(d.c)(["VMG_SET_GOODCATEID"]),{getGoodsInfo:function(){var s=this,t={get_goods_info:1,vendor_goods_id:this.vendor_goods_id};Object(r._17)(t).then(function(t){if(0===t.ret){var e=t.data.info||{};s.goods_name=e.vendor_goods_name,s.goods_produce_comp=e.from_company,s.goods_spec=e.goods_spec,s.goods_price=e.goods_price,s.goods_cost_price=e.goods_cost_price,s.goods_stock_num=e.goods_stock,s.goods_bar_code=e.goods_bar_code,s.goods_weight=e.goods_weight,e.is_weight?s.selectWeight=!0:s.selectWeight=!1,s.goods_bar_code||(s.noBarCode=!0),s.goods_pic_fir=(e.goods_img_list||[])[0]||"",s.goods_pic_sec=(e.goods_img_list||[])[1]||"",s.VMG_SET_GOODCATEID({category_id_list:e.category_id})}else s.$slnotify({message:_.X.toString(t.ret)})})},goodsSave:function(){var s=this,t={vendor_goods_save:1,shop_id:_.Q.shop_id,vendor_goods_name:this.goods_name,from_company:this.goods_produce_comp,goods_spec:this.goods_spec,goods_price:this.goods_price,goods_cost_price:this.goods_cost_price,goods_stock:this.goods_stock_num,goods_bar_code:this.goods_bar_code,category_id:this.category_id_list,goods_weight:this.goods_weight};this.noBarCode&&(t.goods_bar_code="");var e=[];this.picArr.forEach(function(s){s&&e.push(s)}),t.goods_img_list=e,this.selectWeight?t.is_weight=1:t.is_weight=0,this.vendor_goods_id&&(t.vendor_goods_id=this.vendor_goods_id),t.sale_off=0,Object(r._18)(t).then(function(t){0===t.ret?(s.$slnotify({message:"保存成功"}),setTimeout(function(){s.$router.go(-1)},2e3)):s.$slnotify({message:_.X.toString(t.ret)})})},getPicture:function(s,t){t?this.goods_pic_fir=s||"":this.goods_pic_sec=s||""},picturePreveiw:function(s){this.preImg=s?this.goods_pic_fir:this.goods_pic_sec,this.showPicture=!0},clearPicture:function(s){s?this.goods_pic_fir="":this.goods_pic_sec=""},isclosePicture:function(){this.showPicture=!1},handleCancelClick:function(){this.$router.go(-1)},checkRound:function(s){this[s]=g.a.checkRound(this[s])},checkNum:function(s){this[s]=g.a.clearNoNum(this[s])}})},u={render:function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{attrs:{id:"vendor-goods-edit"}},[o("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:">"}},[o("el-breadcrumb-item",[s._v("设备管理")]),s._v(" "),o("el-breadcrumb-item",{attrs:{to:{path:"/official/vendor/goods"}}},[s._v("商品管理")]),s._v(" "),s.$route.query.goodsid?o("el-breadcrumb-item",[s._v("编辑商品")]):o("el-breadcrumb-item",[s._v("新增商品")])],1),s._v(" "),o("div",{staticClass:"goods-baseinfo"},[s._m(0),s._v(" "),o("el-row",{staticClass:"baseinfo-content"},[o("el-col",{attrs:{md:24,lg:11}},[o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("商品名称：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("el-input",{attrs:{placeholder:"请输入"},model:{value:s.goods_name,callback:function(t){s.goods_name="string"==typeof t?t.trim():t},expression:"goods_name"}})],1)])],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",[s._v("生产企业：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("el-input",{attrs:{placeholder:"请输入"},model:{value:s.goods_produce_comp,callback:function(t){s.goods_produce_comp=t},expression:"goods_produce_comp"}})],1)])],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("商品售价：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){s.checkNum("goods_price")}},model:{value:s.goods_price,callback:function(t){s.goods_price=t},expression:"goods_price"}})],1)])],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("库存数量：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){s.checkRound("goods_stock_num")}},model:{value:s.goods_stock_num,callback:function(t){s.goods_stock_num=t},expression:"goods_stock_num"}})],1)])],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}}),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13,offset:5}},[o("div",[o("select-checkbox",{attrs:{lable:"是否支持称重出货型"},model:{value:s.selectWeight,callback:function(t){s.selectWeight=t},expression:"selectWeight"}})],1)])],1)],1),s._v(" "),o("el-col",{attrs:{md:24,lg:11}},[o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("商品分类：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("select-cate")],1)])],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("商品规格：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("el-input",{attrs:{placeholder:"请输入"},model:{value:s.goods_spec,callback:function(t){s.goods_spec=t},expression:"goods_spec"}})],1)])],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("商品成本价：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){s.checkNum("goods_cost_price")}},model:{value:s.goods_cost_price,callback:function(t){s.goods_cost_price=t},expression:"goods_cost_price"}})],1)])],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("商品条码：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",[o("el-input",{attrs:{placeholder:"请输入",disabled:s.noBarCode},model:{value:s.goods_bar_code,callback:function(t){s.goods_bar_code=t},expression:"goods_bar_code"}})],1)]),s._v(" "),o("el-col",{attrs:{span:4,offset:1}},[o("select-checkbox",{attrs:{lable:"无条码"},model:{value:s.noBarCode,callback:function(t){s.noBarCode=t},expression:"noBarCode"}})],1)],1),s._v(" "),o("el-row",{staticClass:"base-item"},[o("el-col",{staticClass:"base-label",attrs:{span:6}},[o("span",{staticClass:"sl-must"},[s._v("商品重量：")])]),s._v(" "),o("el-col",{staticClass:"base-value",attrs:{span:13}},[o("div",{staticClass:"weight-input"},[o("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){s.checkNum("goods_weight")}},model:{value:s.goods_weight,callback:function(t){s.goods_weight=t},expression:"goods_weight"}}),s._v(" "),o("span",{staticClass:"weight-unit"},[s._v("G")])],1)])],1)],1)],1)],1),s._v(" "),o("div",{staticClass:"goods-picture"},[s._m(1),s._v(" "),o("div",{staticClass:"picture-content"},[o("el-row",[o("el-col",{attrs:{lg:22}},[o("el-row",{staticClass:"pic-item"},[o("el-col",{staticClass:"pic-label",attrs:{md:6,lg:3}},[o("span",[s._v("商品图片：")])]),s._v(" "),o("el-col",{staticClass:"pic-value flex-box",attrs:{md:18,lg:21}},[o("div",{staticClass:"goods__pic flex-box"},[s.goods_pic_fir?s._e():o("div",{staticClass:"goods__pic--default"},[o("img",{staticClass:"goods__pic__img--default",attrs:{src:e("HU22")}}),s._v(" "),o("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__upload_circle",attrs:{isOfficial:1,"image-size":1024,"freedom-crop":!1},on:{"send-image":function(t){s.getPicture(t,!0)}}})],1),s._v(" "),s.goods_pic_fir?o("div",{staticClass:"goods__pic--preview"},[o("img",{staticClass:"goods__pic__img",attrs:{src:s.base_url+"/img_get.php?img=1&imgname="+s.goods_pic_fir}}),s._v(" "),o("span",{staticClass:"picture-actions"},[o("span",{staticClass:"picture-preview",on:{click:function(t){s.picturePreveiw(!0)}}},[o("i",{staticClass:"el-icon-zoom-in"})]),s._v(" "),o("span",{staticClass:"picture-delete",on:{click:function(t){s.clearPicture(!0)}}},[o("i",{staticClass:"el-icon-delete"})])])]):s._e(),s._v(" "),s.goods_pic_fir?o("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__uploa_text flex-none",attrs:{"image-size":1024,"freedom-crop":!1,isTextBtn:1,"btn-text":"重新上传"},on:{"send-image":function(t){s.getPicture(t,!0)}}}):s._e()],1),s._v(" "),o("div",{staticClass:"goods__pic flex-box"},[s.goods_pic_sec?s._e():o("div",{staticClass:"goods__pic--default"},[o("img",{staticClass:"goods__pic__img--default",attrs:{src:e("HU22")}}),s._v(" "),o("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__upload_circle",attrs:{isOfficial:1,"freedom-crop":!1,"image-size":1024},on:{"send-image":function(t){s.getPicture(t,!1)}}})],1),s._v(" "),s.goods_pic_sec?o("div",{staticClass:"goods__pic--preview"},[o("img",{staticClass:"goods__pic__img",attrs:{src:s.base_url+"/img_get.php?img=1&imgname="+s.goods_pic_sec}}),s._v(" "),o("span",{staticClass:"picture-actions"},[o("span",{staticClass:"picture-preview",on:{click:function(t){s.picturePreveiw(!1)}}},[o("i",{staticClass:"el-icon-zoom-in"})]),s._v(" "),o("span",{staticClass:"picture-delete",on:{click:function(t){s.clearPicture(!1)}}},[o("i",{staticClass:"el-icon-delete"})])])]):s._e(),s._v(" "),s.goods_pic_sec?o("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__uploa_text flex-none",attrs:{"freedom-crop":!1,"image-size":1024,isTextBtn:1,"btn-text":"重新上传"},on:{"send-image":function(t){s.getPicture(t,!1)}}}):s._e()],1)])],1)],1)],1),s._v(" "),o("el-row",{staticClass:"upload-tip"},[o("el-col",{attrs:{offset:3,span:21}},[s._v("注：支持 jpg .jpeg .png 格式，小于1M")])],1),s._v(" "),o("div",{staticClass:"btn-group"},[o("div",{staticClass:"ven-btn-bd-b-blue cancel",on:{click:s.handleCancelClick}},[s._v("取消")]),s._v(" "),s.showSaveBtn?o("div",{staticClass:"ven-btn-bg-b-blue confirm",on:{click:s.goodsSave}},[s._v("保存")]):o("div",{staticClass:"ven-btn-bd-b-gray"},[s._v("\n                    保存\n                ")])])],1)]),s._v(" "),s.showPicture?o("pre-picture",{attrs:{"img-src":s.preImg},on:{clickit:s.isclosePicture}}):s._e()],1)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"change-titlerr"},[t("span",[this._v("商品信息")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"change-titlerr"},[t("span",[this._v("设备图片")])])}]};var h=e("C7Lr")(p,u,!1,function(s){e("STbp"),e("h5on")},"data-v-c034edf2",null);t.default=h.exports},h5on:function(s,t){}});