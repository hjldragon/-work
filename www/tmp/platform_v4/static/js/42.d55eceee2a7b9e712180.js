webpackJsonp([42,130],{NCSA:function(e,s){},R9Yx:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("9aGi"),i=t("SahK"),o=t("P9l9"),l=t("6nXL"),n=t("EuEE"),c=t("N6PA"),r=t("/hEl"),d={components:{CitySelect:a.a,PictureEdit:i.default,SelectCheckbox:r.default},data:function(){return{vendor_id:"",vendor_num:"",vendor_name:"",vendor_cargoway_num:"",vendor_model:"",goods_model:"",address:"",vendor_ownership:"",person:"",phone:"",lackgoods:1,damage:1,vendor_type:null,max_weight:"",error_weight:"",selectSailing:!1,showShopExistTip:!1,cityinfo:{province:"",city:"",area:""},vendorTypeOptions:[{label:l.W.toString(l.W.UPDOWN),value:l.W.UPDOWN},{label:l.W.toString(l.W.WEIGHT),value:l.W.WEIGHT}],VendorType:l.W,picArr:[]}},computed:{showSaveBtn:function(){return!!(this.vendor_num&&this.vendor_name&&this.vendor_cargoway_num&&this.vendor_model&&this.vendor_ownership&&this.person&&this.phone&&this.cityinfo.province&&this.cityinfo.city)&&(this.vendor_type!==l.W.WEIGHT||!(!this.max_weight||!this.error_weight))}},watch:{selectSailing:function(e){e&&(this.vendor_ownership=l.Q.vendor_ownership,this.showShopExistTip=!1)}},created:function(){this.vendor_id=this.$route.query.vendorid||"",this.vendor_id&&this.getVendorInfo()},methods:{getVendorInfo:function(){var e=this,s={get_vendor_info:1,vendor_id:this.vendor_id};Object(o._14)(s).then(function(s){if(0===s.ret){var t=s.data.info||{};e.vendor_type=t.vendor_type,e.vendor_num=t.vendor_num,e.vendor_name=t.vendor_name,e.vendor_cargoway_num=t.aisle_num,e.vendor_model=t.vendor_model,e.goods_model=t.sell_goods_type,e.cityinfo.province=t.province,e.cityinfo.city=t.city,e.cityinfo.area=t.area,e.address=t.address,e.vendor_ownership=t.ownership,e.person=t.vendor_person,e.phone=t.person_phone,e.lackgoods=t.is_stockout,e.damage=t.is_fault,e.picArr=t.vendor_img,e.max_weight=t.max_weight,e.error_weight=t.error_weight,e.vendor_ownership===l.Q.vendor_ownership&&(e.selectSailing=!0)}else e.$slnotify({message:l.X.toString(s.ret)})})},changeProvinces:function(e){this.cityinfo.province=e.province,this.cityinfo.city=e.city,this.cityinfo.area=e.blocks},getPicture:function(e){this.picArr=e},checkPhone:function(){if(this.phone)return!!c.b.isTelePhone(this.phone)||(this.$notify({title:"警告",message:"请输入11位手机号码",type:"warning"}),!1)},handleConfirmClick:function(){var e=this;if(this.checkPhone()){var s={save_vendor:1,vendor_num:this.vendor_num,vendor_name:this.vendor_name,aisle_num:this.vendor_cargoway_num,vendor_model:this.vendor_model,sell_goods_type:this.goods_model,province:this.cityinfo.province,city:this.cityinfo.city,area:this.cityinfo.area,address:this.address,ownership:this.vendor_ownership,vendor_person:this.person,person_phone:this.phone,is_stockout:this.lackgoods,is_fault:this.damage},t=[];this.picArr.forEach(function(e){e&&t.push(e)}),s.vendor_img=t,s.vendor_type=this.vendor_type,this.vendor_type===l.W.WEIGHT&&(s.max_weight=this.max_weight,s.error_weight=this.error_weight),this.vendor_id&&(s.vendor_id=this.vendor_id),Object(o._21)(s).then(function(s){0===s.ret?(e.$slnotify({message:"保存成功"}),setTimeout(function(){e.$router.go(-1)},2e3)):e.$slnotify({message:l.X.toString(s.ret)})})}},checkIsShop:function(){var e=this;if(this.vendor_ownership){var s={is_shop:1,ownership:this.vendor_ownership};Object(o._21)(s).then(function(s){0===s.ret?e.showShopExistTip=!1:l.X.SHOP_NOT_EXIST===s.ret?e.showShopExistTip=!0:e.$slnotify({message:l.X.toString(s.ret)})})}},handleCancelClick:function(){this.$router.go(-1)},checkNum:function(e){this.vendor_cargoway_num=n.a.checkRound(this.vendor_cargoway_num)},checkDecimal:function(e){this[e]=n.a.clearNoNum(this[e])}}},_={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"vendor-machine-edit"}},[t("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:">"}},[t("el-breadcrumb-item",[e._v("设备管理")]),e._v(" "),t("el-breadcrumb-item",{attrs:{to:{path:"/official/vendor/machine"}}},[e._v("设备列表")]),e._v(" "),e.$route.query.vendorid?t("el-breadcrumb-item",[e._v("编辑设备")]):t("el-breadcrumb-item",[e._v("新增设备")])],1),e._v(" "),t("div",{staticClass:"machine-edit-content"},[e._m(0),e._v(" "),t("el-row",{staticClass:"baseinfo-content"},[t("el-col",{attrs:{md:24,lg:12}},[t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{span:6}},[t("span",{staticClass:"sl-must"},[e._v("设备编号：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.vendor_num,callback:function(s){e.vendor_num=s},expression:"vendor_num"}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{span:6}},[t("span",{staticClass:"sl-must"},[e._v("设备类型：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.vendor_type,callback:function(s){e.vendor_type=s},expression:"vendor_type"}},e._l(e.vendorTypeOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{span:6}},[t("span",{staticClass:"sl-must"},[e._v("货道数：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(s){return e.checkNum(s)}},model:{value:e.vendor_cargoway_num,callback:function(s){e.vendor_cargoway_num=s},expression:"vendor_cargoway_num"}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{span:6}},[t("span",[e._v("售货类型：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.goods_model,callback:function(s){e.goods_model=s},expression:"goods_model"}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item vendor_ownership"},[t("el-col",{staticClass:"base-label",attrs:{span:6}},[t("span",{staticClass:"sl-must"},[e._v("设备所有权：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入",disabled:e.selectSailing},on:{blur:e.checkIsShop},nativeOn:{input:function(s){e.showShopExistTip=!1}},model:{value:e.vendor_ownership,callback:function(s){e.vendor_ownership=s},expression:"vendor_ownership"}})],1)]),e._v(" "),t("el-col",{attrs:{span:4,offset:1}},[t("select-checkbox",{attrs:{lable:"赛领科技"},model:{value:e.selectSailing,callback:function(s){e.selectSailing=s},expression:"selectSailing"}})],1),e._v(" "),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showShopExistTip,expression:"showShopExistTip"}],staticClass:"ownership-tip",attrs:{offset:6,span:13}},[e._v("该运营商不存在")])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{span:6}},[t("span",{staticClass:"sl-must"},[e._v("负责人：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.person,callback:function(s){e.person=s},expression:"person"}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{span:6}},[t("span",[e._v("缺货实时通知：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#4877E7","inactive-color":"#D8D8D8"},model:{value:e.lackgoods,callback:function(s){e.lackgoods=s},expression:"lackgoods"}})],1)])],1)],1),e._v(" "),t("el-col",{attrs:{md:24,lg:12}},[t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}},[t("span",{staticClass:"sl-must"},[e._v("设备名称：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.vendor_name,callback:function(s){e.vendor_name=s},expression:"vendor_name"}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}},[t("span",{staticClass:"sl-must"},[e._v("设备型号：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.vendor_model,callback:function(s){e.vendor_model=s},expression:"vendor_model"}})],1)])],1),e._v(" "),e.vendor_type===e.VendorType.WEIGHT?t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}},[t("span",{staticClass:"sl-must"},[e._v("电子秤最大承载值：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",{staticClass:"weight-input"},[t("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(s){e.checkDecimal("max_weight")}},model:{value:e.max_weight,callback:function(s){e.max_weight=s},expression:"max_weight"}}),e._v(" "),t("span",{staticClass:"weight-unit"},[e._v("KG")])],1)])],1):e._e(),e._v(" "),e.vendor_type===e.VendorType.WEIGHT?t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}},[t("span",{staticClass:"sl-must"},[e._v("称重误差值：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",{staticClass:"weight-input"},[t("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(s){e.checkDecimal("error_weight")}},model:{value:e.error_weight,callback:function(s){e.error_weight=s},expression:"error_weight"}}),e._v(" "),t("span",{staticClass:"weight-unit"},[e._v("G")])],1)])],1):e._e(),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}},[t("span",{staticClass:"sl-must"},[e._v("地址：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("city-select",{staticClass:"item-city-select",attrs:{cityinfo:e.cityinfo},on:{changeProvinces:e.changeProvinces}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}}),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13,offset:8}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.address,callback:function(s){e.address=s},expression:"address"}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}},[t("span",{staticClass:"sl-must"},[e._v("负责人号码：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-input",{attrs:{placeholder:"请输入"},on:{blur:e.checkPhone},model:{value:e.phone,callback:function(s){e.phone=s},expression:"phone"}})],1)])],1),e._v(" "),t("el-row",{staticClass:"base-item"},[t("el-col",{staticClass:"base-label",attrs:{md:6,lg:8}},[t("span",[e._v("故障实时通知：")])]),e._v(" "),t("el-col",{staticClass:"base-value",attrs:{span:13}},[t("div",[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#4877E7","inactive-color":"#D8D8D8"},model:{value:e.damage,callback:function(s){e.damage=s},expression:"damage"}})],1)])],1)],1)],1),e._v(" "),t("picture-edit",{attrs:{"pic-arr":e.picArr},on:{"send-pic":e.getPicture}}),e._v(" "),t("div",{staticClass:"btn-group"},[t("div",{staticClass:"ven-btn-bd-b-blue cancel",on:{click:e.handleCancelClick}},[e._v("取消")]),e._v(" "),e.showSaveBtn?t("div",{staticClass:"ven-btn-bg-b-blue confirm",on:{click:e.handleConfirmClick}},[e._v("保存")]):t("div",{staticClass:"ven-btn-bd-b-gray"},[e._v("\n                保存\n            ")])])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"baseinfo"},[s("div",{staticClass:"change-titlerr"},[s("span",[this._v("基础信息")])])])}]};var p=t("C7Lr")(d,_,!1,function(e){t("fs9k"),t("NCSA")},"data-v-91ded9b4",null);s.default=p.exports},SahK:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("GAg9"),i=t("7+am"),o={components:{SlUpload:a.a,PrePicture:i.a},props:{picArr:Array},data:function(){return{goods_pic_fir:"",goods_pic_sec:"",base_url:"./php",preImg:"",showPicture:!1}},watch:{picArr:{handler:function(e){Array.isArray(e)&&(1===e.length?this.goods_pic_fir=e[0]:2===e.length&&(this.goods_pic_fir=e[0],this.goods_pic_sec=e[1]))},deep:!0}},methods:{getPicture:function(e,s){s?this.goods_pic_fir=e||"":this.goods_pic_sec=e||"";var t=[];t.push(this.goods_pic_fir),t.push(this.goods_pic_sec),this.$emit("send-pic",t)},picturePreveiw:function(e){this.preImg=e?this.goods_pic_fir:this.goods_pic_sec,this.showPicture=!0},clearPicture:function(e){e?this.goods_pic_fir="":this.goods_pic_sec=""},isclosePicture:function(){this.showPicture=!1}}},l={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"vendor-picture"},[e._m(0),e._v(" "),a("div",{staticClass:"picture-content"},[a("el-row",[a("el-col",{attrs:{lg:24}},[a("el-row",{staticClass:"pic-item"},[a("el-col",{staticClass:"pic-label",attrs:{md:6,lg:3}},[a("span",[e._v("设备图片：")])]),e._v(" "),a("el-col",{staticClass:"pic-value flex-box",attrs:{md:18,lg:21}},[a("div",{staticClass:"goods__pic flex-box"},[e.goods_pic_fir?e._e():a("div",{staticClass:"goods__pic--default"},[a("img",{staticClass:"goods__pic__img--default",attrs:{src:t("HU22")}}),e._v(" "),a("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__upload_circle",attrs:{scale:1.35,isOfficial:1,"image-size":1024,"freedom-crop":!1},on:{"send-image":function(s){e.getPicture(s,!0)}}})],1),e._v(" "),e.goods_pic_fir?a("div",{staticClass:"goods__pic--preview"},[a("img",{staticClass:"goods__pic__img",attrs:{src:e.base_url+"/img_get.php?img=1&imgname="+e.goods_pic_fir}}),e._v(" "),a("span",{staticClass:"picture-actions"},[a("span",{staticClass:"picture-preview",on:{click:function(s){e.picturePreveiw(!0)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),a("span",{staticClass:"picture-delete",on:{click:function(s){e.clearPicture(!0)}}},[a("i",{staticClass:"el-icon-delete"})])])]):e._e(),e._v(" "),e.goods_pic_fir?a("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__uploa_text flex-none",attrs:{scale:1.35,"image-size":1024,"freedom-crop":!1,isTextBtn:1,"btn-text":"重新上传"},on:{"send-image":function(s){e.getPicture(s,!0)}}}):e._e()],1),e._v(" "),a("div",{staticClass:"goods__pic flex-box"},[e.goods_pic_sec?e._e():a("div",{staticClass:"goods__pic--default"},[a("img",{staticClass:"goods__pic__img--default",attrs:{src:t("HU22")}}),e._v(" "),a("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__upload_circle",attrs:{isOfficial:1,scale:1.35,"freedom-crop":!1,"image-size":1024},on:{"send-image":function(s){e.getPicture(s,!1)}}})],1),e._v(" "),e.goods_pic_sec?a("div",{staticClass:"goods__pic--preview"},[a("img",{staticClass:"goods__pic__img",attrs:{src:e.base_url+"/img_get.php?img=1&imgname="+e.goods_pic_sec}}),e._v(" "),a("span",{staticClass:"picture-actions"},[a("span",{staticClass:"picture-preview",on:{click:function(s){e.picturePreveiw(!1)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),a("span",{staticClass:"picture-delete",on:{click:function(s){e.clearPicture(!1)}}},[a("i",{staticClass:"el-icon-delete"})])])]):e._e(),e._v(" "),e.goods_pic_sec?a("sl-upload",{ref:"slUploadFir",staticClass:"goods__pic__uploa_text flex-none",attrs:{scale:1.35,"freedom-crop":!1,"image-size":1024,isTextBtn:1,"btn-text":"重新上传"},on:{"send-image":function(s){e.getPicture(s,!1)}}}):e._e()],1)])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"upload-tip"},[a("el-col",{attrs:{offset:3,span:21}},[e._v("注：支持 jpg .jpeg .png 格式，小于1M")])],1)],1),e._v(" "),e.showPicture?a("pre-picture",{attrs:{"img-src":e.preImg},on:{clickit:e.isclosePicture}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"change-titlerr"},[s("span",[this._v("设备图片")])])}]};var n=t("C7Lr")(o,l,!1,function(e){t("eqgF")},"data-v-42fd1487",null);s.default=n.exports},eqgF:function(e,s){},fs9k:function(e,s){}});