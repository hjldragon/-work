webpackJsonp([46],{WGMt:function(e,r){},blh5:function(e,r,t){"use strict";t.d(r,"a",function(){return i}),t.d(r,"b",function(){return l});var a=t("P9l9"),o=t("a2vD"),n=t("6nXL"),i=function(){var e=this,r=[],t={get_ag_department_list:1,agent_id:o.a.getAgentid(),page_size:1e5,page_no:1};return Object(a.z)(t).then(function(t){if(0===t.ret){var a=t.data.ag_department_list;a&&a.length>0&&a.forEach(function(e){var t={};t.label=e.ag_department_name,t.ag_department_id=e.ag_department_id,r.push(t)})}else e.$slnotify({message:n.X.toString(t.ret),duration:1e3})}),r},l=function(){var e=this,r=[],t={get_ag_role_list:1,agent_id:o.a.getAgentid(),page_size:1e5,page_no:1};return Object(a.g)(t).then(function(t){if(0===t.ret){var a=t.data.list;a&&a.length>0&&a.forEach(function(e){var t={};t.label=e.role_name,t.ag_position_id=e.ag_role_id,r.push(t)})}else e.$slnotify({message:n.X.toString(t.ret),duration:1e3})}),r}},nVPD:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("P9l9"),o=t("6nXL"),n=t("a2vD"),i=(t("swMD"),t("N6PA")),l=t("blh5"),s={data:function(){var e=this;return{isCantClick:!0,ruleForm2:{password:"",checkPass:"",phone:"",real_name:"",sex:"",employee_num:"",ag_employee_id:"",isFreeze:"启用",remark:"",ag_position_name:"",ag_department_name:"",department_id:"",position_id:"",ag_role_id:"",userId:""},IsStaffFreeze:o.x,positionArr:[],departmentArr:[],statusOptions:[{label:o.x.toString(o.x.NO),idx:o.x.NO},{label:o.x.toString(o.x.YES),idx:o.x.YES}],rules:{password:[{required:!0,validator:function(r,t,a){var o=i.b.isPassWord(t);""===t?a(new Error("请输入密码")):(o||(e.isCantClick=!0,a(new Error("密码格式必须是字母、数字，不能使用特殊字符，长度在6-16之间"))),a())},trigger:["change","blur"]}],checkPass:[{required:!0,validator:function(r,t,a){""===t?a(new Error("请再次输入密码")):t!==e.ruleForm2.password?a(new Error("两次输入密码不一致!")):a()},trigger:["change","blur"]}],phone:[{required:!0,validator:function(r,t,a){var o=i.b.isTelePhone(t);return t?o?void a():(e.isCantClick=!0,a(new Error("请输入合法的电话号码"))):a(new Error("请输入电话号码"))},trigger:["change","blur"]}],real_name:[{required:!0,validator:function(r,t,a){var o=i.b.isPersonName(t);""===t?a(new Error("请输入联系人姓名")):o?a():(e.isCantClick=!0,a(new Error("姓名格式可为中英文，不包括特殊数字和字符")))},trigger:["change","blur"]}],ag_role_id:[{required:!0,validator:function(r,t,a){""===e.ruleForm2.ag_role_id?a(new Error("请选择角色")):a()},trigger:["change","blur"]}],ag_department_name:[{required:!0,validator:function(r,t,a){""===e.ruleForm2.ag_department_name?a(new Error("请选择部门")):a()},trigger:["change","blur"]}],employee_num:[{required:!0,message:"请输入员工编号",trigger:["change","blur"]}]}}},props:{listUrl:{type:String,required:!0,default:""},detailUrl:{type:String,required:!0,default:""}},created:function(){this.getDepartPosiArr(),this.$route.query.ag_employee_id&&""!==this.$route.query.ag_employee_id&&this.getForm()},methods:{getForm:function(){var e=this;this.$route.query.ag_employee_id&&""!==this.$route.query.ag_employee_id&&(this.staffId=this.$route.query.ag_employee_id||"");var r={get_ag_employee_info:1,ag_employee_id:this.staffId};Object(a.c)(r).then(function(r){0===r.ret?(e.ruleForm2.real_name=r.data.agemployee.real_name,e.ruleForm2.ag_position_name=r.data.agemployee.ag_position_name,e.ruleForm2.ag_role_id=r.data.agemployee.ag_role_id,e.ruleForm2.ag_department_name=r.data.agemployee.ag_department_name,e.ruleForm2.phone=r.data.agemployee.phone,e.ruleForm2.password=r.data.agemployee.password,e.ruleForm2.remark=r.data.agemployee.remark,e.ruleForm2.ag_employee_id=r.data.agemployee.ag_employee_id,e.ruleForm2.isFreeze=r.data.agemployee.is_freeze,e.ruleForm2.checkPass=r.data.agemployee.password,e.ruleForm2.department_id=r.data.agemployee.ag_department_id,e.ruleForm2.position_id=r.data.agemployee.ag_position_id,e.ruleForm2.employee_num=r.data.agemployee.employee_num,""!==e.ruleForm2.password&&""!==e.ruleForm2.phone&&""!==e.ruleForm2.real_name&&""!==e.ruleForm2.ag_position_name&&""!==e.ruleForm2.ag_department_name?e.isCantClick=!1:e.isCantClick=!0):e.$slnotify({message:o.X.toString(r.ret)})})},getDepartPosiArr:function(){this.departmentArr=Object(l.a)(),this.positionArr=Object(l.b)()},changeDepartment:function(e){this.ruleForm2.department_id=this.ruleForm2.ag_department_name,this.checkFinishInput(e)},checkFinishInput:function(e){var r=this;""!==this.ruleForm2.password&&""!==this.ruleForm2.phone&&""!==this.ruleForm2.real_name&&""!==this.ruleForm2.ag_role_id&&""!==this.ruleForm2.ag_department_name?this.$refs[e].validate(function(e){r.isCantClick=!e}):this.isCantClick=!0},saveInfo:function(){this.checkFinishInput("ruleForm2"),this.$emit("saveInfo",this.ruleForm2)},cancelInfo:function(){this.$router.push({path:this.listUrl,query:{activIndex:"1",choosedDepartId:this.$route.query.choosed_depart_id,choosedDepartName:this.$route.query.choosed_depart_name}})}}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"staff-creat-area"}},[t("div",{staticClass:"info-bord"},[t("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,rules:e.rules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"员工编号",prop:"employee_num"}},[e.ruleForm2.ag_employee_id?t("span",[e._v(e._s(e.ruleForm2.employee_num))]):t("el-input",{attrs:{placeholder:"请输入员工编号"},on:{input:function(r){e.checkFinishInput("ruleForm2")}},model:{value:e.ruleForm2.employee_num,callback:function(r){e.$set(e.ruleForm2,"employee_num",r)},expression:"ruleForm2.employee_num"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名",prop:"real_name"}},[t("el-input",{attrs:{placeholder:"请输入员工姓名"},on:{input:function(r){e.checkFinishInput("ruleForm2")}},model:{value:e.ruleForm2.real_name,callback:function(r){e.$set(e.ruleForm2,"real_name",e._n(r))},expression:"ruleForm2.real_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"selct-box",attrs:{label:"角色",prop:"ag_role_id"}},[t("el-select",{attrs:{placeholder:"请选择角色"},on:{change:function(r){e.checkFinishInput("ruleForm2")}},model:{value:e.ruleForm2.ag_role_id,callback:function(r){e.$set(e.ruleForm2,"ag_role_id",r)},expression:"ruleForm2.ag_role_id"}},e._l(e.positionArr,function(e){return t("el-option",{key:e.ag_position_id,attrs:{label:e.label,value:e.ag_position_id}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"selct-box",attrs:{label:"部门",prop:"ag_department_name"}},[t("el-select",{attrs:{placeholder:"请选择部门"},on:{change:function(r){e.changeDepartment("ruleForm2")}},model:{value:e.ruleForm2.ag_department_name,callback:function(r){e.$set(e.ruleForm2,"ag_department_name",r)},expression:"ruleForm2.ag_department_name"}},e._l(e.departmentArr,function(e){return t("el-option",{key:e.ag_department_id,attrs:{label:e.label,value:e.ag_department_id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号码"},on:{input:function(r){e.checkFinishInput("ruleForm2")}},model:{value:e.ruleForm2.phone,callback:function(r){e.$set(e.ruleForm2,"phone",e._n(r))},expression:"ruleForm2.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[t("el-input",{attrs:{type:"password",id:"type-pass-word","auto-complete":"off",placeholder:"请输入密码"},on:{input:function(r){e.checkFinishInput("ruleForm2")}},model:{value:e.ruleForm2.password,callback:function(r){e.$set(e.ruleForm2,"password",r)},expression:"ruleForm2.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{placeholder:"请输入备注，字数不超过150字"},model:{value:e.ruleForm2.remark,callback:function(r){e.$set(e.ruleForm2,"remark",r)},expression:"ruleForm2.remark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"账号状态"}},[t("el-radio-group",{model:{value:e.ruleForm2.isFreeze,callback:function(r){e.$set(e.ruleForm2,"isFreeze",r)},expression:"ruleForm2.isFreeze"}},e._l(e.statusOptions,function(r){return t("el-radio",{key:r.idx,attrs:{label:r.idx,value:r.idx}},[e._v(e._s(r.label))])}),1)],1)],1),e._v(" "),t("div",{staticClass:"btn-group"},[e.isCantClick?t("div",{staticClass:"save-btn cant-click sl-btn-bg-b-gray"},[e._v("保存")]):t("div",{staticClass:"save-btn sl-btn-bd-b-blue",on:{click:e.saveInfo}},[e._v("保存")]),e._v(" "),t("div",{staticClass:"cancel-btn sl-btn-bd-b-blue",on:{click:e.cancelInfo}},[e._v("取消")])])],1)])},staticRenderFns:[]};var m={data:function(){return{listUrl:"/agent/area/organize",detailUrl:"/areaagent/editStaffDetail"}},created:function(){},computed:{},components:{detailForm:t("C7Lr")(s,u,!1,function(e){t("WGMt"),t("sg4I")},"data-v-09935a45",null).exports},methods:{cancelInfo:function(){this.$router.push({path:this.listUrl,query:{activIndex:"1",choosedDepartId:this.$route.query.choosed_depart_id,choosedDepartName:this.$route.query.choosed_depart_name}})},saveInfo:function(e){var r=this,t={ag_employee_save:1,agent_id:n.a.getAgentid(),real_name:e.real_name,phone:e.phone,password:e.password,remark:e.remark,employee_num:e.employee_num,ag_role_id:e.ag_role_id,ag_department_id:e.department_id,is_freeze:e.isFreeze};this.$route.query.ag_employee_id&&(t.ag_employee_id=this.$route.query.ag_employee_id),Object(a.d)(t).then(function(e){0===e.ret?r.$router.push({path:r.listUrl,query:{activIndex:"1",choosedDepartId:r.$route.query.choosed_depart_id,choosedDepartName:r.$route.query.choosed_depart_name}}):-10006===e.ret||-10026===e.ret?r.$slnotify({message:"该手机号码已被注册"}):r.$slnotify({message:o.X.toString(e.ret)})})}}},d={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"staff-creat-area"}},[t("div",{staticClass:"header"},[t("p",[t("span",{staticClass:"black",on:{click:e.cancelInfo}},[e._v("员工管理")]),e._v(" "),t("span",[e._v(">")]),e._v(" "),e.$route.query.ag_employee_id?t("span",{staticClass:"btn-text-blue"},[e._v("编辑员工信息")]):t("span",{staticClass:"btn-text-blue"},[e._v("创建员工")])])]),e._v(" "),t("div",{staticClass:"basic-info"},[t("div",{staticClass:"info-bord"},[t("detail-form",{attrs:{detailUrl:e.detailUrl,listUrl:e.listUrl},on:{saveInfo:e.saveInfo}})],1)])])},staticRenderFns:[]};var p=t("C7Lr")(m,d,!1,function(e){t("zRWB")},"data-v-757b044a",null);r.default=p.exports},sg4I:function(e,r){},zRWB:function(e,r){}});