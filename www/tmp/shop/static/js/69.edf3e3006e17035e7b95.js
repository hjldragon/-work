webpackJsonp([69],{"1zgL":function(e,t,a){"use strict";function i(e){a("6L35"),a("d8P3")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("F54D"),s=a("aS+W"),o=a("QAAC"),l=i,r=Object(o.a)(n.a,s.a,s.b,!1,l,"data-v-091f30e8",null);t.default=r.exports},"6L35":function(e,t,a){var i=a("O+5D");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("FIqI")("99fc90aa",i,!0,{})},F54D:function(e,t,a){"use strict";(function(e){var i=a("3cXf"),n=a.n(i),s=a("O3OP"),o=a("a2vD"),l=a("swMD"),r=a("EuEE");t.a={props:["name","history","hisTaOb"],data:function(){var e=this;return{boxTop:"35vh",addTags:[],edits:!0,deleteTags:[],value:"",beforDeleteTags:[],hisTaObData:{},shuopId:"",oldTa:"",hisTagObj:{},tableObj:{},cantAddTip:!1,cantDeleTip:!1,showDelete:!0,ruleForm:{inputValue:""},rules:{inputValue:[{validator:function(t,a,i){""===a?i(new Error("标签不能为空")):e.addTags&&-1!==e.addTags.indexOf(e.ruleForm.inputValue)?i(new Error("标签已经存在")):a.length>5?i(new Error("标签名称不能超过5个字符")):e.addTags&&e.addTags.length>=30?i(new Error("已超过标签上限，请先删除再添加!")):i()},trigger:"click"}]}}},created:function(){this.initTagList(),this.shuopId=o.a.getShopid()},methods:{initTagList:function(){var e=this;this.hisTaObData=this.hisTaOb;var t=s.a.getBackstageName(this.name.id);s.a.getTagArr({get_shop_label:1,label_name:t},function(a){if(null!==l.a.getItem("hisTagObj")&&void 0!==l.a.getItem("hisTagObj")||e.hisTaObData&&e.hisTaObData[e.name.id]&&0!==e.hisTaObData[e.name.id].length){var i=e.hisTaObData&&e.hisTaObData[e.name.id]&&0===e.hisTaObData[e.name.id].length?e.hisTaObData:l.a.getItem("hisTagObj");e.hisTaObData&&null!==e.hisTaObData||(e.hisTaObData=l.a.getItem("hisTagObj")),e.hisTagObj=s.a.isNull(i[e.name.id]),e.tableObj=void 0===l.a.getItem("hisTagObj")?[]:l.a.getItem("hisTagObj")[e.name.id],e.tableObj=s.a.isNull(e.tableObj);var n=[];n=s.a.objTansToArr(a.data[t]),e.addTags=s.a.getUniqueType(e.hisTagObj,n)}else e.addTags=void 0===a.data[t]?[]:a.data[t],null===a.data[t]&&(e.addTags=[]),void 0!==e.history&&""!==e.history&&-1===e.addTags.indexOf(e.history)&&e.addTags.push(e.history)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.addTags&&t.addTags.push(t.ruleForm.inputValue),t.ruleForm.inputValue=""})},addTag:function(e){this.submitForm(e),void 0!==this.addTags&&this.addTags.length>=30&&(this.cantAddTip=!0)},selectTag:function(t,a){if(!0===this.showDelete)e(".tag").eq(a).addClass("selected").siblings().removeClass("selected"),this.value=t;else{if(this.value="",void 0!==l.a.getItem("hisTagObj")&&-1!==this.tableObj.indexOf(t)&&this.history===t)return this.oldTa=t,void this.$slnotify({message:"该标签已被使用,不能被删除!"});this.deleteTags=this.deleteArrayItem(this.addTags,t),this.cantDeleTip=!1}},confirm:function(){var e=this;""===this.value&&(this.value=this.history);var t=s.a.getBackstageName(this.name.id),a={save_label:1,shop_id:this.shuopId,label_name:t};a&&(a[t]=n()(this.addTags)),s.a.editTagArr(a,function(){e.$emit("my-add",[e.value,e.name.id,e.addTags])})},cancel:function(){this.$emit("my-cancle",[this.name.id,this.addTags])},deleteArrayItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return this.history===t?(this.oldTa=t,void this.$slnotify({message:"该标签已被使用,不能被删除!"})):(e.forEach(function(a,i){if(a===t)return void e.splice(i,1)}),e)},showDeleteSelect:function(){this.beforDeleteTags=this.addTags.slice(),this.deleteTags=this.addTags.slice(),e(".tag").removeClass("selected").addClass("selecteDelete"),this.showDelete=!1},afterShowDelete:function(){e(".tag").removeClass("selecteDelete");for(var t in e(".tag"))e(".tag")[t].innerText===this.history&&e(".tag")[t].classList.add("selected");this.cantDeleTip=!1,this.cantAddTip=!1},confirmDelete:function(){this.oldTa===this.history?(this.afterShowDelete(),this.addTags=this.beforDeleteTags,this.showDelete=!0):(this.afterShowDelete(),this.addTags=this.deleteTags,this.showDelete=!0,this.deleteTagMethods())},deleteTagMethods:function(){var e=s.a.getBackstageName(this.name.id),t={save_label:1,shop_id:this.shuopId,label_name:e};t&&(t[e]=n()(this.addTags)),s.a.editTagArr(t)},cancelDelete:function(){this.afterShowDelete(),this.addTags=this.beforDeleteTags,this.showDelete=!0}},mounted:function(){var t=this,a=document.documentElement.clientWidth;this.boxTop=r.a.changeDialogTop("35vh","28vh","20vh",a),e(window).resize(function(){a=document.documentElement.clientWidth,t.boxTop=r.a.changeDialogTop("35vh","28svh","20vh",a)})}}}).call(t,a("L7Pj"))},NG4l:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAATtJREFUKBVjZICC////M770qk8BcpMZ/jNqg4UZ/18F0nPFtzXOYWRk/A8SYwQRr4NaJf9+/7UEqMkJxEcHQMX7mDnZYkTXVT9nApkMU8yiIsnAyM8FVw9ig8RABkHVMDJnnvqf+v8/Qx5IQqgjgYHDWovhx+GrDIwcrAxCnYkM3H7mDD/P3WX49+6z4tdlB56yAI1LBhn59/VHhr9vPjGwyouBFYLEQOzfD1+B5UB8IEhmgnnw/8dvDO/K54MVgBTCFIPEQHJgAAwMJgiLeJKJARJ0YM+C3AwzGeQUEBskBg8IoFqQDXNB5jOL8jMwi/CBnQRyxvvyBWA2SAwkBwVzGSER1rAHFHSgkAJ5HuZmkMkgxX/uPGcAxYX4tgYXJlAMgiIFJACSgCkGmQhiwxRD1fwHxzRYksikAQBZz6bA60d9pgAAAABJRU5ErkJggg=="},"O+5D":function(e,t,a){var i=a("L4zZ");t=e.exports=a("UTlt")(!1),t.push([e.i,'.mask[data-v-091f30e8]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:9990;background:rgba(0,0,0,.5);-webkit-box-sizing:border-box;box-sizing:border-box}.messageBox[data-v-091f30e8]{width:540px;min-height:370px;background:#fff;z-index:9991}.heade[data-v-091f30e8]{font-family:MicrosoftYaHei;font-size:16px;color:#fff;letter-spacing:.57px;text-align:center;background:#5a8cff;height:40px;line-height:40px}.main[data-v-091f30e8]{padding-left:80px;font-size:12px}.add[data-v-091f30e8]{width:100%;margin:40px 0 20px;cursor:pointer}.el-button[data-v-091f30e8]{width:60px;height:34px}.el-button[data-v-091f30e8],.el-button[data-v-091f30e8]:hover{color:#4877e7;border:1px solid #4877e7;cursor:pointer}.btn .el-button[data-v-091f30e8],.deleteBtn .el-button[data-v-091f30e8]{color:#4877e7;width:160px;height:40px;cursor:pointer;margin-bottom:50px}.el-button.confirm_btn[data-v-091f30e8]{background:#4877e7;color:#fff;margin-right:60px;margin-left:0;cursor:pointer}.main .btn[data-v-091f30e8]{margin-top:90px;padding-top:20px;margin-bottom:30px;cursor:pointer}.deleteBtn[data-v-091f30e8]{margin-top:20px;cursor:pointer}.tag[data-v-091f30e8]{position:relative;padding:5px 10px;border:1px solid #d8d8d8;color:#666;font-size:12px;text-align:center;vertical-align:middle;margin:0 5px 10px;border-radius:5px;display:inline-block;cursor:pointer}.tagGroup[data-v-091f30e8]{width:400px;list-style:none}.tag.selected[data-v-091f30e8]{background:#4877e7;border:1px solid #4877e7;color:#fff;z-index:9992}.red[data-v-091f30e8]{font-size:12px;color:#e7487e;cursor:pointer}.tab-tips[data-v-091f30e8]{display:inline-block;margin-top:28px}.inputContainer .add-btn[data-v-091f30e8]{width:60px;height:32px;font-size:14px;color:#5a8cff;line-height:32px;text-align:center;border:1px solid #5a8cff;margin-top:4px;margin-left:20px;margin-right:10px;display:inline-block;cursor:pointer}.inputContainer[data-v-091f30e8]{margin-bottom:60px}.left[data-v-091f30e8]{float:left}.delete_btn[data-v-091f30e8]{position:absolute;left:450px;cursor:pointer}.deleteSelect[data-v-091f30e8]{position:absolute;top:50px;left:440px}.blue[data-v-091f30e8]{font-size:12px;color:#4877e7;margin-right:10px}.selecteDelete[data-v-091f30e8]:after{width:12px;height:12px;position:absolute;content:"";background-image:url('+i(a("NG4l"))+");background-repeat:no-repeated;top:0;right:0;cursor:pointer}.selecteDelete[data-v-091f30e8]{border:1px solid #d8d8d8!important;color:#666!important}.tips[data-v-091f30e8]{color:red;font-size:12px}",""])},O3OP:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});var i=a("EuEE"),n=a("6nXL"),s=a("KGCO"),o={getTableData:function(e,t){i.a.DataEncSubmit("seat_get.php",e,function(e){t&&"function"==typeof t&&t(e)})},changeTableData:function(e,t){i.a.DataEncSubmit("seat_save.php",e,function(e){t&&"function"==typeof t&&t(e)})},shallowRefresh:function(e){s.a.replace({path:"/refresh",query:{name:e}})},getQrCode:function(e,t){i.a.DataEncSubmit("img_get.php",e,function(e){t&&"function"==typeof t&&t(e)})},getId:function(e,t){i.a.DataEncSubmit("gen_id.php",e,function(e){t&&"function"==typeof t&&t(e)})},search:function(e,t,a){var i=[];for(var s in a)e&&e!==n.B.code[0]||""!==t?""===t&&a[s].seat_region===e?i.push(a[s]):a[s].seat_region===e&&(a[s].seat_id.indexOf(t)>-1||a[s].seat_name.indexOf(t)>-1)?i.push(a[s]):e===n.B.code[0]&&(a[s].seat_id.indexOf(t)>-1||a[s].seat_name.indexOf(t)>-1)?i.push(a[s]):!e&&(a[s].seat_id.indexOf(t)>-1||a[s].seat_name.indexOf(t)>-1)&&i.push(a[s]):i=a;return i},getTableEditor:function(e,t){i.a.DataEncSubmit("seat_get.php",e,function(e){t&&"function"==typeof t&&t(e)})},changePage:function(t,a,i){for(var n in t)t[n]=Number(t[n]+1),a===i?e(".el-checkbox__input").eq(t[n]).addClass("is-checked"):e(".el-checkbox__input").eq(t[n]).removeClass("is-checked")},editTagArr:function(e,t){i.a.DataEncSubmit("shopinfo_save.php",e,function(e){t&&"function"==typeof t&&t(e)})},getTagArr:function(e,t){i.a.DataEncSubmit("shopinfo_get.php",e,function(e){t&&"function"==typeof t&&t(e)})},getBackstageName:function(e){return"SEAT_REGION"===e?e="shop_seat_region":"SEAT_TYPE"===e?e="shop_seat_type":"TABLE_TYPE"===e&&(e="shop_seat_shape"),e},getUniqueList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(void 0!==e&&e.length>0){for(var t={},a=[],i=[],n=[],s=[],o=[],l=0;l<e.length;l++)-1===a.indexOf(e[l].seat_type)&&a.push(e[l].seat_type),-1===i.indexOf(e[l].seat_region)&&i.push(e[l].seat_region),-1===n.indexOf(e[l].seat_shape)&&n.push(e[l].seat_shape),-1===s.indexOf(e[l].seat_id)&&s.push(e[l].seat_id),-1===o.indexOf(e[l].seat_name)&&o.push(e[l].seat_name);return t.SEAT_REGION=i,t.SEAT_TYPE=a,t.TABLE_TYPE=n,t.TABLE_NO=s,t.SEAT_NAME=o,t}},getUniqueType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0!==e&&void 0!==t){var a=function(e){return-1===t.indexOf(e)};return e.filter(a).concat(t)}},objTansToArr:function(e){var t=[];for(var a in e)t.push(e[a]);return t},isNull:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++)null!=e[t]&&""!==e[t]||e.splice(t,1);return e}}}).call(t,a("L7Pj"))},"aS+W":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"selectTable"}},[a("el-dialog",{staticClass:"delete-dialog",attrs:{width:"540px",visible:e.edits,top:e.boxTop,"show-close":!1,"before-close":e.cancel},on:{"update:visible":function(t){e.edits=t}}},[a("div",{staticClass:"messageBox"},[a("div",{staticClass:"heade"},[e._v("添加"+e._s(e.name.label)+" ")]),e._v(" "),a("div",{staticClass:"main"},[a("span",{staticClass:"tab-tips"},[e._v("请选择标签（ 单选 ）")]),e._v(" "),e.showDelete?a("span",{staticClass:"red delete_btn tab-tips",attrs:{type:"text",size:"small"},on:{click:e.showDeleteSelect}},[e._v("\n        删除\n      ")]):e._e(),e._v(" "),a("div",{staticClass:"add"},[a("ul",{staticClass:"tagGroup"},e._l(e.addTags,function(t,i){return a("li",{key:i,staticClass:"tag",class:[{selected:e.history==t&&e.showDelete},{selecteDelete:!e.showDelete},"tag"],on:{click:function(a){e.selectTag(t,i)}}},[e._v(e._s(t))])}))]),e._v(" "),a("div",{staticClass:"inputContainer"},[e.showDelete?a("el-form",{ref:"Form",staticClass:"left",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{prop:"inputValue"}},[a("el-input",{attrs:{placeholder:"请输入标签名称，字数不超过5个字"},model:{value:e.ruleForm.inputValue,callback:function(t){e.$set(e.ruleForm,"inputValue",t)},expression:"ruleForm.inputValue"}})],1)],1):e._e(),e._v(" "),e.showDelete?a("div",{staticClass:"add-btn left",on:{click:function(t){e.addTag("Form")}}},[e._v("添加")]):e._e()],1),e._v(" "),e.showDelete?a("div",{staticClass:"btn"},[a("el-button",{staticClass:"confirm_btn ",on:{click:e.confirm}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1):a("div",{staticClass:"deleteBtn"},[a("el-button",{staticClass:"confirm_btn ",on:{click:e.confirmDelete}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.cancelDelete}},[e._v("取消")])],1)])])])],1)},n=[]},d8P3:function(e,t,a){var i=a("qf5t");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("FIqI")("3b7e3f1c",i,!0,{})},qf5t:function(e,t,a){t=e.exports=a("UTlt")(!1),t.push([e.i,"#selectTable .el-input{margin-left:20px;width:300px;height:34px}#selectTable .el-form-item__error{position:absolute;top:100%;left:6%;font-size:12px;color:#e7487e}#selectTable .el-dialog__body,#selectTable .el-dialog__header{padding:0}",""])}});