webpackJsonp([3,48],{"+hjI":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("aA9S"),s=i.n(a),n=i("4YfN"),l=i.n(n),r=i("9rMa"),o=i("r2UX"),d=(i("EuEE"),i("6nXL")),c=i("P9l9"),h=i("a2vD"),p=i("N6PA"),u={data:function(){return{emptyType:1,agentId:h.a.getAgentid(),isEdit:!1,posiData:[],row:{},role_name:null,role_name_err:!1,ag_po_id:null,ag_po_id_err:!1,editDialog:!1,list:[],IsEdit:d.v,total:10,listQuery:{page:1,limit:10}}},created:function(){this.getList(),this.getPositionList()},computed:l()({role_title:function(){return this.isEdit?"编辑角色":"新增角色"}},Object(r.d)({ACS:function(t){return t.perimission.sysPermis},AG_K:function(t){return t.perimission.AG_K}})),components:{EmptyTable:o.a},methods:{getList:function(){var t=this;if(this.ACS[this.AG_K.AG_ROLE_LIST]){var e={get_ag_role_list:1,agent_id:this.agentId,page_size:this.listQuery.limit,page_no:this.listQuery.page};Object(c.g)(e).then(function(e){0===e.ret?(t.list=e.data.list,t.total=e.data.total,t.listQuery.page>1&&0===t.list.length&&(t.listQuery.page--,t.getList())):t.$slnotify({message:d.X.toString(e.ret)})})}},getPositionList:function(){var t=this,e={get_ag_position_list:1,agent_id:this.agentId,page_size:1e5,page_no:1};Object(c.e)(e).then(function(e){0===e.ret?t.posiData=e.data.position_list||[]:t.$slnotify({message:d.X.toString(e.ret)})})},select_posi:function(t){this.ag_po_id_err=!1,this.ag_po_id=t.ag_position_id},handleSave:function(){var t=this;if(this.checkrole_name()&&this.checkpl_id()){var e={save_ag_role:1,agent_id:this.agentId,role_name:this.role_name,ag_position_id:this.ag_po_id};this.row.ag_role_id&&(e.ag_role_id=this.row.ag_role_id),Object(c.h)(e).then(function(e){0==e.ret?(t.$slnotify({message:"保存成功",duration:1500}),t.getList(),t.clearClose()):t.$slnotify({message:d.X.toString(e.ret),duration:1500})})}},clearTip:function(){this.role_name_err=!1,this.ag_po_id_err=!1},addRole:function(){this.ACS[this.AG_K.ADD_AG_ROLE]?(this.row={},this.role_name="",this.ag_po_id=null,this.editDialog=!0,this.isEdit=!1):this.$slnotify({message:"操作权限不足"})},edit:function(t){if(this.ACS[this.AG_K.EDIT_AG_ROLE]){this.isEdit=!0;var e=s()({},t);this.row=e,this.role_name=this.row.role_name,this.ag_po_id=this.row.ag_position_id,this.editDialog=!0}else this.$slnotify({message:"操作权限不足"})},handleDelete:function(t){var e=this;if(this.ACS[this.AG_K.DEL_AG_ROLE]){s()({},t);this.row=t;var i={delete_ag_role:1,ag_role_id:this.row.ag_role_id};Object(c.h)(i).then(function(t){0==t.ret?(e.$slnotify({message:"删除成功",duration:1500}),e.getList()):e.$slnotify({message:d.X.toString(t.ret),duration:1500})})}else this.$slnotify({message:"操作权限不足"})},clearClose:function(){this.editDialog=!1,this.row={},this.role_name="",this.ag_po_id=null,this.role_name_err=!1,this.ag_po_id_err=!1},checkrole_name:function(){var t=this.role_name,e=!p.a.isEmpty(t);return(!e||t.trim().indexOf(" ")>=0)&&(this.role_name_err=!0,e=!1),e},checkpl_id:function(){var t=this.ag_po_id,e=!p.a.isEmpty(t);return(!e||t.trim().indexOf(" ")>=0)&&(this.ag_po_id_err=!0,e=!1),e},handleSizeChange:function(t){this.listQuery.limit=t,this.listQuery.page=1,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()}},mounted:function(){this.$refs.manageGoodsListTableAdjust.$refs.bodyWrapper.style.minHeight="473px"}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"change-default rankTableOfficial role-box"},[i("div",{staticClass:"change-titlerr rank-title rank-title-official"},[i("span",[t._v("角色列表")]),t._v(" "),i("span",{staticClass:"fr add-btn",on:{click:t.addRole}},[i("span",{staticClass:"add-btn-blue"}),t._v("\n      新增角色\n    ")])]),t._v(" "),i("div",{staticClass:"table-official"},[i("el-table",{ref:"manageGoodsListTableAdjust",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"角色","min-width":"50%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.role_name)+"\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"20%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"text-blue btn-text-blue",attrs:{type:"text"},on:{click:function(i){t.edit(e.row)}}},[t._v("编辑\n          ")]),t._v(" "),e.row.entry_type!==t.IsEdit.YES?i("span",{staticClass:"btn-text-red table-btn",attrs:{type:"text"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除\n          ")]):t._e()]}}])})],1),t._v(" "),t.list&&0!==t.list.length?t._e():i("empty-table",{attrs:{type:t.emptyType}})],1),t._v(" "),i("div",{staticClass:"pagination-content change-pagination-default",attrs:{slot:"pagination"},slot:"pagination"},[i("el-pagination",{staticClass:"sl-pagination page-el",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),i("el-dialog",{attrs:{visible:t.editDialog,"close-on-click-modal":!1,top:"28vh",width:"540px"},on:{"update:visible":function(e){t.editDialog=e},close:t.clearClose}},[i("div",[i("div",{staticClass:"head-nav"},[i("span",[t._v(t._s(t.role_title))])]),t._v(" "),i("div",{staticClass:"form-item"},[i("div",{staticClass:"form-label"},[i("span",{staticClass:"sl-must"}),t._v(" 角色名称\n        ")]),t._v(" "),i("div",{staticClass:"form-input"},[i("el-input",{class:{"border-redtip":t.role_name_err},attrs:{placeholder:"请输入"},on:{blur:t.checkrole_name},nativeOn:{input:function(e){return t.clearTip(e)}},model:{value:t.role_name,callback:function(e){t.role_name=e},expression:"role_name"}}),t._v(" "),t.role_name_err?i("div",{staticClass:"errtip"},[i("span",[t._v("请输入角色名称")])]):t._e()],1)]),t._v(" "),i("div",{staticClass:"form-item"},[i("div",{staticClass:"form-label"},[i("span",{staticClass:"sl-must"}),t._v(" 职级分配\n        ")]),t._v(" "),i("div",{staticClass:"form-input cleafix"},[t._l(t.posiData,function(e){return i("span",{key:e.ag_position_id,staticClass:"select-po fl",class:{active:t.ag_po_id===e.ag_position_id},on:{click:function(i){t.select_posi(e)}}},[t._v("\n            "+t._s(e.ag_position_name)+"\n          ")])}),t._v(" "),t.ag_po_id_err?i("div",{staticClass:"errtip"},[i("span",[t._v("请选择关联职位")])]):t._e()],2)]),t._v(" "),i("div",{staticClass:"foot-btn-box"},[i("div",{staticClass:"btn of-btn-bd-m-blue",on:{click:t.clearClose}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"btn save-s-gradient",on:{click:t.handleSave}},[t._v("保存")])])])])],1)},staticRenderFns:[]};var _=i("C7Lr")(u,g,!1,function(t){i("lWxv"),i("7JMv"),i("NEg1")},"data-v-71e77332",null);e.default=_.exports},"+thK":function(t,e){},"3sWp":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAAAXNSR0IArs4c6QAAAjlJREFUOBGlVDFvE1EMtl+uUgsXCbHRtQgSCRBDfwcqSLD1xARrgigTQwYmimhWGCqUCAaQSn8IQ4EhDaIrM1IPKKSN+ey7d3kkOTiJN5z97M/2O7/vmQjrMGkPVbIqTPSTSBqQ8Ky3RKWtNGm/jNL11kfsJIL9EonQLA5up9gsavLNkfduEo2346XmWX5+d8R/lAC4xnwj0iBm1kq2TkR2zCgil71RpQNqMzTU+122QtLpuPTg60no9LoGxb2tByhup3ntHWUStcfbSCtxv+vmgdLk/hWR4/csd54tpD8Gv+aBChvTgZ1RDd+T9nX9vcKpCgD1Xvd8puYezfztaP8FWnANzflCwg/r/advcnd2Eej7YwA2vDGU8cqZGnc6Y6cly0Aa4Ns2czdhtonubuX3RSOcfH/iyDURNrKwPDIgUbQa9558mAHCAHqNAT5XqTSu8ZXTXs3LFNpOLzZuO9/Q0BHqSgpjpDceJq3PJLTi9yqVnad6W29VL65QN7rsKkk2p4Myb/DFkWvEGz6R9xQJ/3aLHlwmPbfVn7HxaDD454nKsnk7ThwvNptOCfjfyTQp+qq5ImMz9vq4iKOrZcTwB5mW+vBIjvdAGtZcNsMwly4oEJNghLRDKPBXWKAqohqC+WZo5k+RvjMczmYE5t0CHDb4KqTLIUFt5LJbnvvqq2c0pOeiDSTlkj3wqXlYJadRBsPB87HgYRicDbbhGlq5hh9aRY+XzY9RhIB3aN1uvHRxV59QGKf6b51q83z8B/65AAAAAElFTkSuQmCC"},"62Uw":function(t,e){},"7JMv":function(t,e){},BAPP:function(t,e,i){"use strict";var a=i("aA9S"),s=i.n(a),n=(i("EuEE"),i("6nXL")),l={props:{data:{type:[Array,Object],default:function(){return{}}}},computed:{IsEdit:function(){return n.v},tableData:function(){return this.data}},created:function(){},methods:{edit:function(t){var e=s()({},t);this.$emit("edit",e)},handleDelete:function(t){var e=s()({},t);this.$emit("delete",e)}},mounted:function(){this.$refs.manageGoodsListTableAdjust.$refs.bodyWrapper.style.minHeight="473px"}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"change-default"},[i("el-table",{ref:"manageGoodsListTableAdjust",attrs:{data:t.tableData,stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"职位","min-width":"50%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.ag_position_name||e.row.pl_position_name)+"\r\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"20%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"btn-text-blue table-btn",attrs:{type:"text"},on:{click:function(i){t.edit(e.row)}}},[t._v("编辑\r\n          ")]),t._v(" "),e.row.entry_type!==t.IsEdit.YES?i("span",{staticClass:"btn-text-red table-btn",attrs:{type:"text"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除\r\n          ")]):t._e()]}}])})],1),t._v(" "),i("div",{staticClass:"page"},[t._t("pagination")],2)],1)},staticRenderFns:[]};var o={components:{RankTable:i("C7Lr")(l,r,!1,function(t){i("+thK")},"data-v-4b6f3a87",null).exports},data:function(){return{listQuery:{page:1,limit:10}}},props:{rankData:{type:[Array,Object],required:!0,default:function(){}}},computed:{tableData:function(){return this.rankData&&this.rankData.length>0?this.getPageList(this.rankData,this.listQuery.limit,this.listQuery.page):this.rankData},total:function(){return this.rankData.length}},methods:{edit:function(t){this.$emit("editPosition",t)},handleDelete:function(t){this.$emit("deletePosition",t)},handleSizeChange:function(t){console.log("表格条数改变",t)},handleCurrentChange:function(t){console.log("表格当前页改变",t)},addRank:function(){this.$emit("addPsition")},getPageList:function(t,e,i){if(void 0!==t&&t.length>0){return t.filter(function(t,a){return a<e*i&&a>=e*(i-1)})}}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rank-table-box"},[i("div",{staticClass:"change-titlerr rank-title"},[i("span",[t._v("职位列表")]),t._v(" "),i("span",{staticClass:"rank-btn-add fr btn-text-blue",on:{click:t.addRank}},[t._v("添加职位")])]),t._v(" "),i("rank-table",{attrs:{data:t.tableData},on:{edit:t.edit,delete:t.handleDelete}},[i("div",{staticClass:"pagination-content",attrs:{slot:"pagination"},slot:"pagination"},[i("el-pagination",{staticClass:"page-el",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.$set(t.listQuery,"page",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)},staticRenderFns:[]};var c=i("C7Lr")(o,d,!1,function(t){i("DkEn")},"data-v-1456649a",null);e.a=c.exports},C2Ur:function(t,e,i){"use strict";var a=i("CmqY"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"staff-table"}},[i("div",{staticClass:"staff-table"},[i("div",{staticClass:"change-titlerr rank-title"},[i("span",[t._v("详情列表")]),t._v(" "),i("span",{staticClass:"rank-btn-add fr btn-text-blue",on:{click:t.addRank}},[t._v("添加员工")])]),t._v(" "),i("div",{staticClass:"table-content"},[i("div",{staticClass:"search-content  search-content-width-fix"},[i("span",{staticClass:"label-text"},[t._v("姓名")]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),t._v(" "),i("span",{staticClass:"label-text"},[t._v("状态")]),t._v(" "),i("el-select",{model:{value:t.searchStatus,callback:function(e){t.searchStatus=e},expression:"searchStatus"}},t._l(t.statusArr,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),i("div",{staticClass:"search-btn of-btn-bd-search",on:{click:t.searchMethods}},[t._v("搜索")])],1),t._v(" "),i("div",{staticClass:"table-content-staff change-default"},[i("el-table",{ref:"staffTabeCountent",attrs:{border:"",data:t.staffTableList,stripe:""},on:{"sort-change":t.sort}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"employee_num",label:"员工编号",align:"center","min-width":"80"}}),t._v(" "),i("el-table-column",{attrs:{prop:"real_name",label:"姓名",align:"center","min-width":"80","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"phone",label:"登录手机号",align:"center","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"ag_department_name",label:"部门",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"ag_role_name",label:"角色",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.remark?i("span",{attrs:{size:"small"}},[t._v(t._s(e.row.remark)+"\n            ")]):i("span",{attrs:{size:"small"}},[t._v("--\n            ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"is_freeze",label:"状态",align:"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_freeze===t.isNoFreezed?i("span",{attrs:{size:"small"}},[t._v("启用\n            ")]):i("span",{attrs:{size:"small"}},[t._v("冻结\n            ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_admin!==t.IsAdmin.YES?i("div",[e.row.is_freeze===t.isNoFreezed?i("span",{staticClass:"text-red btn-text-red",attrs:{size:"small",type:"info"},on:{click:function(i){t.handleModifyStatus(e.row,1)}}},[t._v("冻结\n              ")]):i("span",{staticClass:"text-green btn-text-green",attrs:{size:"small",type:"success"},on:{click:function(i){t.handleModifyStatus(e.row,0)}}},[t._v("启用\n              ")]),t._v(" "),i("span",{staticClass:"text-blue btn-text-blue",attrs:{size:"small",type:"text"},on:{click:function(i){t.handleEditStaff(e.row)}}},[t._v("编辑\n              ")]),t._v(" "),i("span",{staticClass:"text-red btn-text-red",attrs:{size:"small",type:"text"},on:{click:function(i){t.handleDeleteBtn(e.row)}}},[t._v("删除\n              ")])]):t._e()]}}])})],1),t._v(" "),t.staffTableList&&0!==t.staffTableList.length?t._e():i("empty-table",{attrs:{type:t.emptyType}})],1)]),t._v(" "),i("div",{staticClass:"page"},[i("div",{staticClass:"pagination-content change-pagination-default"},[i("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.totalStaff},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)])])])},staticRenderFns:[]};var n=function(t){i("jDEV"),i("YIva")},l=i("C7Lr")(a.a,s,!1,n,"data-v-5cf4462c",null);e.a=l.exports},CmqY:function(t,e,i){"use strict";(function(t){var a=i("4YfN"),s=i.n(a),n=i("r2UX"),l=i("9rMa"),r=i("CW5y"),o=(i("a2vD"),i("6nXL"));i("blh5"),i("EuEE"),i("P9l9");e.a={components:{EmptyTable:n.a},data:function(){return{emptyType:1,searchNone:!1,isSort:!1,sortLabel:"",sortOrder:1,tableHeight:0,searchStatus:"",searchName:"",departmentName:"",departmentId:"",operateStatus:"",listQuery:{page:1,limit:10},statusArr:[{label:"全部",value:""},{label:o.x.toString(o.x.NO),value:o.x.NO},{label:o.x.toString(o.x.YES),value:o.x.YES}],treeDataArr:[],choosedDepartId:"",choosedDepartName:"",defaultProps:{label:"label",children:"children"}}},props:{listUrl:{type:String,required:!0,default:""},detailUrl:{type:String,required:!0,default:""},staffList:{type:Array,required:!0,default:function(){}},pageNum:{type:Number,default:1},total:{type:Number,required:!0,default:10}},created:function(){var e=this;this.tableHeight=document.documentElement.clientHeight-474,t(window).resize(function(){e.tableHeight=document.documentElement.clientHeight-474}),this.listQuery.limit=r.a.get(this.$route),this.listQuery.page=this.pageNum},mounted:function(){this.$refs.staffTabeCountent.$refs.bodyWrapper.style.minHeight="420px"},computed:s()({},Object(l.d)({ACS:function(t){return t.perimission.sysPermis},AG_K:function(t){return t.perimission.AG_K}}),{isNoFreezed:function(){return o.x.NO},staffTree:function(){return this.treeData},staffTableList:function(){return this.staffList},IsAdmin:function(){return o.u},totalStaff:function(){return this.total}}),methods:{handleEditStaff:function(t){this.$emit("handelEditBtn",t)},addRank:function(){this.ACS[this.AG_K.ADD_AG_EMPLOYEE]?this.$router.push({path:this.detailUrl,query:{activIndex:"1"}}):this.$slnotify({message:"操作权限不足"})},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getStaffList()},searchMethods:function(){this.listQuery.page=1,this.searchNone=!0;var t={};t.name=this.searchName,t.status=this.searchStatus,this.$emit("searchMethods",t)},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,r.a.set(this.$route,t);var e={page:this.listQuery.page,limit:this.listQuery.limit};this.$emit("handleSizeChange",e)},handleCurrentChange:function(t){this.listQuery.page=t,this.$emit("handleCurrentChange",t)},handleModifyStatus:function(t,e){var i={};i.row=t,i.status=e,this.$emit("handleModifyStatus",i)},handleDeleteBtn:function(t){this.$emit("handleDeleteBtn",t)}}}}).call(e,i("L7Pj"))},DkEn:function(t,e){},F2rO:function(t,e,i){"use strict";(function(t){var a=i("4YfN"),s=i.n(a),n=i("9rMa"),l=i("6nXL"),r=i("C2Ur"),o=i("BAPP"),d=i("CW5y"),c=i("wR+7"),h=i("a2vD"),p=i("+hjI"),u=i("p0I3"),g=i("o1Lc"),_=i("CC2O"),f=i("P9l9");e.a={data:function(){return{agentId:h.a.getAgentid(),activeIndex:"1",height:0,treeData:[{label:"部门管理",children:[]}],defaultProps:{label:"label",children:"children"},isHighlight:!0,staffList:[],listUrl:"/agent/area/organize",detailUrl:"/areaagent/editStaffDetail",freezeDialogVisible:!1,deleteDialogVisible:!1,delDepartDialogVisible:!1,delPOsitionDialogVisible:!1,editDialogVisible:!1,addNewDepart:!1,dia_title:"编辑",departName:"",departmentId:"0",rankData:[],form:{name:""},rules:{name:[{validator:function(t,e,i){""===e?i(new Error("请输入部门名称")):e&&e.length>6?i(new Error("部门名称不能超过6个字")):!1===/^[^ ]+$/.test(e)?i(new Error("部门名称不能包含空格符")):i()},trigger:"change,input,click"}]},AgentIsFreeze:l.b,sucTipText:"",operateStatus:"",operateFreezeData:{},operateDeleteData:{},operatePositionData:{},treeDepart_id:"",listQuery:{page:1,limit:10},listQueryp:{page:1,limit:10},total:10,totalPosition:10,depart_id:0,newName:"",newDpaId:"",choosedDepartId:"",choosedDepartName:"",sucTipImg:i("3CU3"),treeDataNew:[],clickData:null,isIniData:!0,treeDataById:null,routerName:"员工管理"}},components:{staffTable:r.a,rankTable:o.a,ZTree:u.a,roleTable:p.default},created:function(){var e=this;this.height=document.documentElement.clientHeight-350+"px",t(window).resize(function(){e.height=document.documentElement.clientHeight-350+"px"}),this.listQuery.limit=d.a.get(this.$route),this.$route.query.choosedDepartId&&(this.newName=this.$route.query.choosedDepartName,this.choosedDepartName=this.$route.query.choosedDepartName,this.choosedDepartId=this.$route.query.choosedDepartId,this.departmentId=this.choosedDepartId,this.depart_id=this.choosedDepartId),this.ACS[this.AG_K.AG_EMPLOYEE_LIST]?this.activeIndex="1":this.ACS[this.AG_K.AG_ROLE_LIST]?this.activeIndex="3":this.ACS[this.AG_K.AG_POSITION_LIST]&&(this.activeIndex="2"),this.$route.query.activIndex?this.activeIndex=this.$route.query.activIndex:!this.$route.query.activIndex&&this.ACS[this.AG_K.AG_EMPLOYEE_LIST]&&(this.activeIndex="1"),this.treeInfoMethods(),this.getStaffList(),this.getPositionList()},computed:s()({},Object(n.d)({ACS:function(t){return t.perimission.sysPermis},AG_K:function(t){return t.perimission.AG_K}}),{isExpendDepart:function(){return!!this.ACS[this.AG_K.DEPARTMENT_LIST]}}),watch:{activeIndex:function(){switch(this.activeIndex){case"1":this.routerName="员工管理";break;case"2":this.routerName="职级管理";break;case"3":this.routerName="角色管理"}}},methods:{handleSelect:function(t){var e=this;this.searchName="",this.searchStatus="",this.activeIndex=t,this.$route.query.choosedDepartId&&(this.newName=this.$route.query.choosedDepartName,this.choosedDepartId=this.$route.query.choosedDepartId,this.choosedDepartName=this.$route.query.choosedDepartName,this.depart_id=this.choosedDepartId),"1"===t&&this.$nextTick(function(){e.departmentId="0",e.depart_id="",e.listQuery.page=1,g.c.changeSelecte(e.departmentId,e.treeDataById),e.getStaffList(),e.treeInfoMethods()}),"2"===t&&(this.listQueryp.page=1,this.getPositionList())},hideReezeDialog:function(){this.freezeDialogVisible=!1},freezeOk:function(){var t=this,e={ag_employee_freeze:1,agent_id:this.agentId,ag_employee_id:this.operateFreezeData.ag_employee_id,is_freeze:this.operateStatus};Object(f.d)(e).then(function(e){0===e.ret?(t.operateStatus!==t.AgentIsFreeze.NO?t.$slnotify({message:"冻结成功"}):t.$slnotify({message:"启用成功"}),t.depart_id=t.departmentId,t.getStaffList(),t.isFreezeMethods=!1):t.$slnotify({message:l.X.toString(e.ret)})}),this.freezeDialogVisible=!1},hideReezeDialogHandle:function(){this.freezeDialogVisible=!1,this.deleteDialogVisible=!1,this.deleteDialogVisible=!1,this.editDialogVisible=!1,this.addNewDepart=!1,this.delPOsitionDialogVisible=!1,this.clickData?g.c.changeSelecte(this.clickData.ag_department_id,this.treeDataById):g.c.changeSelecte(this.departmentId,this.treeDataById)},handleModifyStatus:function(t){t.status!==this.AgentIsFreeze.NO?this.ACS[this.AG_K.FREEZE_AG_EMPLOYEE]?(this.freezeDialogVisible=!0,this.operateFreezeData=t.row,this.operateStatus=t.status,this.sucTipText="确定执行冻结操作？"):this.$slnotify({message:"操作权限不足"}):this.ACS[this.AG_K.START_AG_EMPLOYEE]?(this.freezeDialogVisible=!0,this.operateFreezeData=t.row,this.operateStatus=t.status,this.sucTipText="确定执行启用操作？"):this.$slnotify({message:"操作权限不足"})},handleDeleteBtn:function(t){this.ACS[this.AG_K.DEL_AG_EMPLOYEE]?(this.deleteDialogVisible=!0,this.operateDeleteData=t):this.$slnotify({message:"操作权限不足"})},handelEditBtn:function(t){this.ACS[this.AG_K.EDIT_AG_EMPLOYEE]?this.$router.push({path:this.detailUrl,query:{ag_employee_id:t.ag_employee_id,activIndex:"1",choosed_depart_id:this.choosedDepartId,choosed_depart_name:this.choosedDepartName}}):this.$slnotify({message:"操作权限不足"})},deleteOk:function(){var t=this;this.deleteDialogVisible=!1;var e={ag_employee_del:1,ag_employee_id:this.operateDeleteData.ag_employee_id,agent_id:this.agentId};Object(f.d)(e).then(function(e){0===e.ret?(t.$slnotify({message:"删除成功"}),t.depart_id=t.departmentId,t.getStaffList()):t.$slnotify({message:l.X.toString(e.ret)})})},hideDeleteDialog:function(){var t=this;this.freezeDialogVisible=!1,this.deleteDialogVisible=!1,this.deleteDialogVisible=!1,this.editDialogVisible=!1,this.addNewDepart=!1,this.delPOsitionDialogVisible=!1,this.$refs.form.resetFields(),this.newName||(this.newName=this.treeData[0].label,this.departmentId="0"),this.$nextTick(function(){g.c.changeSelecte(t.departmentId,t.treeDataById)})},deleteDepartOk:function(){var t=this,e={ag_department_del:1,ag_department_id:this.departmentId};Object(f.A)(e).then(function(e){0===e.ret?(t.$slnotify({message:"删除成功"}),t.newName="",t.depart_id="",t.choosedDepartId="",t.choosedDepartName="",t.departmentId="0",t.treeInfoMethods(),t.clickData=t.treeData[0],t.getStaffList()):-30033===e.ret?(t.$slnotify({message:"该条目下包含数据，不能被删除"}),t.newName=t.treeNodeKey,t.depart_id=t.departmentId):t.$slnotify({message:l.X.toString(e.ret)}),t.deleteDialogVisible=!1,t.delDepartDialogVisible=!1})},editPosition:function(t){this.ACS[this.AG_K.EDIT_AG_POSITION]?this.$router.push({path:"/areaagent/editPositiDetail",query:{position_id:t.ag_position_id}}):this.$slnotify({message:"操作权限不足"})},deletePosition:function(t){this.ACS[this.AG_K.DEL_AG_POSITION]?(this.operatePositionData=t,this.delPOsitionDialogVisible=!0,this.getPositionList()):this.$slnotify({message:"操作权限不足"})},deletePosiOk:function(){var t=this,e={del_ag_position:1,agent_id:this.agentId,ag_position_id:this.operatePositionData.ag_position_id};Object(f.f)(e).then(function(e){0===e.ret?(t.$slnotify({message:"删除成功"}),t.getPositionList()):-30039===e.ret?t.$slnotify({message:"该条目下包含数据，不能被删除"}):t.$slnotify({message:l.X.toString(e.ret)})}),this.delPOsitionDialogVisible=!1},addPsition:function(){this.ACS[this.AG_K.ADD_AG_POSITION]?this.$router.push("/areaagent/editPositiDetail"):this.$slnotify({message:"操作权限不足"})},hidePosiDialog:function(){this.delPOsitionDialogVisible=!1},checkInput:function(t){var e=this;this.newName=this.form.name,!0===this.repeat&&(this.repeatName=!1),this.$refs[t].validate(function(t){e.isCantClick=!t})},editOk:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.editDialogVisible=!1;var i={ag_department_save:1,agent_id:e.agentId,ag_department_name:e.form.name,ag_department_id:e.departmentId};e.form.name===e.departName?e.hideDeleteDialog():Object(f.A)(i).then(function(t){0===t.ret?(e.depart_id=t.data.ag_department_id,e.$slnotify({message:"修改成功"}),e.treeInfoMethods()):-20034===t.ret?e.$slnotify({message:"该部门已存在"}):e.$slnotify({message:l.X.toString(t.ret)})})}})},addOk:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.editDialogVisible=!1,e.addNewDepart=!1;var i={ag_department_save:1,agent_id:e.agentId,ag_department_name:e.form.name};e.newName=e.form.name,Object(f.A)(i).then(function(t){0===t.ret?(e.form.name="",e.$slnotify({message:"新建成功"}),e.treeInfoMethods(),e.departmentId=t.data.ag_department_id,e.depart_id=e.departmentId,e.getStaffList()):-20034===t.ret?e.$slnotify({message:"该部门已存在"}):e.$slnotify({message:l.X.toString(t.ret)})})}})},searchMethods:function(t){this.listQuery.page=1,this.searchName=t.name,this.searchStatus=t.status,this.getStaffList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getStaffList()},handleSizeChange:function(t){this.listQuery.page=t.page,this.listQuery.limit=t.limit,d.a.set(this.$route,this.listQuery.limit),this.getStaffList()},handleCurrentChangeP:function(t){this.listQueryp.page=t,this.getPositionList()},handleSizeChangeP:function(t){this.listQueryp.page=1,this.listQueryp.limit=t,d.a.set(this.$route,t),this.getPositionList()},treeInfoMethods:function(){var t=this;if(this.isExpendDepart){this.treeData[0].children=[];var e={get_ag_department_list:1,agent_id:this.agentId,page_size:1e5,page_no:1};Object(f.z)(e).then(function(e){if(0===e.ret){var i=e.data.ag_department_list,a=[];i&&i.length>0&&i.forEach(function(t){var e={};e.label=t.ag_department_name,e.ag_department_id=t.ag_department_id,a.push(e)});var s=e.data.ag_department_list,n=g.c.addTitleAgentTree(s);_.default.set(t.treeDataNew,0,n),g.c.generateKey(t.treeDataNew,0),g.c.initTreeData(t.treeDataNew),g.c.selectIcon(t.treeDataNew),t.treeDataByIds(),g.c.changeSelecte(t.departmentId,t.treeDataById)}else t.$slnotify({message:l.X.toString(e.ret)})})}else this.$nextTick(function(){t.newName||(t.newName=t.treeData[0].label,t.departmentId="0"),g.c.changeSelecte(t.departmentId,t.treeDataById)})},getStaffTree:function(){var t=this;if(this.isExpendDepart){this.treeData[0].children=[];var e={get_ag_department_list:1,agent_id:this.agentId,page_size:1e5,page_no:1};Object(f.z)(e).then(function(e){if(0===e.ret){var i=e.data.ag_department_list,a=[];i&&i.length>0&&i.forEach(function(t){var e={};e.label=t.ag_department_name,e.ag_department_id=t.ag_department_id,a.push(e)}),t.treeData[0].children=a,t.$nextTick(function(){t.newName||(t.newName=t.treeData[0].label)})}else t.$slnotify({message:l.X.toString(e.ret)})})}else this.$nextTick(function(){t.newName||(t.newName=t.treeData[0].label)})},getStaffList:function(){var t=this;if(this.ACS[this.AG_K.AG_EMPLOYEE_LIST]){this.searchStatus!==l.b.NO&&this.searchStatus!==l.b.YES&&(this.searchStatus="");var e={get_ag_employee_list:1,agent_id:this.agentId,page_size:this.listQuery.limit,page_no:this.listQuery.page};this.searchName&&(e.real_name=this.searchName),(this.searchStatus||0===this.searchStatus)&&(e.is_freeze=this.searchStatus),this.isSort&&(e.sort_name=this.sortLabel,e.desc=this.sortOrder),this.depart_id&&(e.ag_department_id=this.depart_id),Object(f.c)(e).then(function(e){0===e.ret?(t.listQuery.page>1&&0===e.data.ag_employee_list.length&&(t.listQuery.page--,t.getStaffList()),e.data.ag_employee_list&&e.data.ag_employee_list.length>0?(t.staffList=e.data.ag_employee_list,t.isListEmpty=!1,t.total=e.data.total):(t.staffList=[],t.total=0,t.isListEmpty=!0,!0===t.isSearch?t.searchNone=!0:t.searchNone=!1)):t.$slnotify({message:l.X.toString(e.ret)})})}},getDepartStaff:function(t){var e=this;this.searchName="",this.searchStatus="";var i={get_department_agent:1,ag_department_id:t,page_size:this.listQuery.limit,page_no:this.listQuery.page};Object(f.z)(i).then(function(t){0===t.ret?t.data.ag_employee_list&&t.data.ag_employee_list.length>0?e.staffList=t.data.ag_employee_list:e.staffList=[]:e.$slnotify({message:l.X.toString(t.ret)})})},getPositionList:function(){var t=this;if(this.ACS[this.AG_K.AG_POSITION_LIST]){var e={get_ag_position_list:1,agent_id:this.agentId,page_size:this.listQueryp.limit,page_no:this.listQueryp.page};Object(f.e)(e).then(function(e){0===e.ret?(t.rankData=e.data.position_list,t.totalPosition=e.data.total,t.listQueryp.page>1&&0===t.rankData.length&&(t.listQueryp.page--,t.getList())):t.$slnotify({message:l.X.toString(e.ret)})})}},nodeExpand:function(t,e){this.isHighlight=!1;e.key;this.isSearch=!1,this.listQuery.page=1,this.depart_id=e.data.ag_department_id,this.getStaffList()},handleNodeClick:function(t,e){this.isHighlight=!0,this.isSearch=!1,this.listQuery.page=1,this.depart_id=e.data.ag_department_id,this.departmentId=e.data.ag_department_id,this.treeNodeKey=e.key,e.expanded=!0,this.newName=e.key,e.childNodes&&0===e.childNodes.length?this.isExpendDepart?(this.depart_id=e.data.ag_department_id,this.choosedDepartId=t.ag_department_id,this.choosedDepartName=e.key):this.$slnotify({message:"部门操作权限不足"}):(this.$router.replace("/agent/area/organize"),this.choosedDepartId="",this.choosedDepartName=""),this.getStaffList()},currentChange:function(){this.isHighlight=!0},addNewPosition:function(){this.isDetailDialog=!this.isDetailDialog},renderContent:function(t,e){var i=e.node,a=e.data,s=e.store,n=this;return t(c.a,{props:{DATA:a,NODE:i,STORE:s},on:{nodeAdd:function(t,e,i){return n.handleAdd(t,e,i)},nodeEdit:function(t,e,i){return n.handleEdit(t,e,i)},nodeDel:function(t,e,i){return n.handleDelete(t,e,i)}}})},handleAdd:function(t,e,i){this.ACS[this.AG_K.ADD_DEPARTMENT]?(this.suOrfa=!0,this.repeat=!1,this.clickData=null,this.isIniData=!1,this.dia_title="新增",this.editDialogVisible=!0,this.addNewDepart=!0,this.departmentName="",this.form.name="",this.departmentId="",i.expanded||(i.expanded=!0)):this.$slnotify({message:"操作权限不足"})},handleEdit:function(t,e,i){this.ACS[this.AG_K.EDIT_DEPARTMENT]?(this.dia_title="编辑",this.suOrfa=!0,this.isIniData=!1,this.editDialogVisible=!0,this.form.name=i.data.label,this.departName=i.data.label,this.departmentId=i.data.ag_department_id,this.choosedDepartId=i.data.ag_department_id,this.choosedDepartName=i.data.label,this.clickData=i.data):this.$slnotify({message:"操作权限不足"})},handleDelete:function(t,e,i){this.ACS[this.AG_K.DEL_DEPARTMENT]?(this.suOrfa=!0,this.treeNodeKey=i.data.label,this.isIniData=!1,this.deleteDialogVisible=!0,this.delDepartDialogVisible=!0,this.form.name=i.data.label,this.departmentId=i.data.ag_department_id,this.choosedDepartId=i.data.ag_department_id,this.clickData=i.data):this.$slnotify({message:"操作权限不足"})},treeDataByIds:function(){this.treeDataById=g.c.treeDataById(this.treeDataNew)},selectNodeActive:function(t){this.clickData=t,this.isSearch=!1,this.listQuery.page=1,this.newName=t.ag_department_name,this.depart_id=t.ag_department_id,this.departmentId=t.ag_department_id,g.c.changeSelecte(this.departmentId,this.treeDataById),t.ag_department_id&&0!==t.ag_department_id?this.isExpendDepart?(this.depart_id=t.ag_department_id,this.choosedDepartId=t.ag_department_id,this.choosedDepartName=t.ag_department_name):this.$slnotify({message:"部门操作权限不足"}):(this.$router.replace("/agent/area/organize"),this.choosedDepartId="",this.choosedDepartName=""),this.getStaffList()},addCategorys:function(t){this.departmentId=t.ag_department_id,g.c.changeSelecte(this.departmentId,this.treeDataById),this.ACS[this.AG_K.ADD_DEPARTMENT]?(this.suOrfa=!0,this.repeat=!1,this.clickData=null,this.isIniData=!1,this.dia_title="新增",this.editDialogVisible=!0,this.addNewDepart=!0,this.departmentName="",this.form.name=""):this.$slnotify({message:"操作权限不足"})},deleteCategorys:function(t){this.ACS[this.AG_K.DEL_DEPARTMENT]?(this.suOrfa=!0,this.treeNodeKey=t.ag_department_name,this.isIniData=!1,this.deleteDialogVisible=!0,this.delDepartDialogVisible=!0,this.form.name=t.ag_department_name,this.departmentId=t.ag_department_id,this.choosedDepartId=t.ag_department_id,this.clickData=t):this.$slnotify({message:"操作权限不足"})},openEditorDialog:function(t){this.ACS[this.AG_K.EDIT_DEPARTMENT]?(this.dia_title="编辑",this.suOrfa=!0,this.isIniData=!1,this.editDialogVisible=!0,this.form.name=t.ag_department_name,this.departName=t.ag_department_name,this.departmentId=t.ag_department_id,this.choosedDepartId=t.ag_department_id,this.choosedDepartName=t.ag_department_name,this.clickData=t):this.$slnotify({message:"操作权限不足"})}}}}).call(e,i("L7Pj"))},"Gy/c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("F2rO"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"staff-list"}},[i("div",{staticClass:"nav-own-bar"},[i("span",{staticClass:"cant-click-nav"},[t._v("组织管理")]),t._v("\n    >\n    "),i("span",{staticClass:"current-nav"},[t._v(t._s(t.routerName))])]),t._v(" "),i("div",{staticClass:"titlebar"},[i("el-menu",{attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[t.ACS[t.AG_K.AG_EMPLOYEE_LIST]?i("el-menu-item",{attrs:{index:"1"}},[t._v("员工管理")]):t._e(),t._v(" "),t.ACS[t.AG_K.AG_ROLE_LIST]?i("el-menu-item",{attrs:{index:"3"}},[t._v("角色管理")]):t._e(),t._v(" "),t.ACS[t.AG_K.AG_POSITION_LIST]?i("el-menu-item",{attrs:{index:"2"}},[t._v("职位管理")]):t._e()],1)],1),t._v(" "),"1"===t.activeIndex&&t.ACS[t.AG_K.AG_EMPLOYEE_LIST]?i("div",{staticClass:"staff-tree change-tree-default"},[t._m(0),t._v(" "),i("z-tree",{ref:"tree",attrs:{isStaff:!0,treeData:t.treeDataNew},on:{"node-click":t.selectNodeActive,"delete-category":t.deleteCategorys,"editor-category":t.openEditorDialog,"add-category":t.addCategorys}})],1):t._e(),t._v(" "),i("div",{staticClass:"table-list"},["1"===t.activeIndex?i("staff-table",{attrs:{listUrl:t.listUrl,detailUrl:t.detailUrl,staffList:t.staffList,total:t.total,pageNum:t.listQuery.page},on:{handleModifyStatus:t.handleModifyStatus,handleDeleteBtn:t.handleDeleteBtn,handelEditBtn:t.handelEditBtn,searchMethods:t.searchMethods,handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}}):t._e(),t._v(" "),"3"===t.activeIndex?i("role-table"):t._e(),t._v(" "),"2"===t.activeIndex?i("rank-table",{attrs:{listUrl:t.listUrl,detailUrl:t.detailUrl,rankData:t.rankData,totalPosition:t.totalPosition},on:{editPosition:t.editPosition,deletePosition:t.deletePosition,addPsition:t.addPsition,handleCurrentChange:t.handleCurrentChangeP,handleSizeChange:t.handleSizeChangeP}}):t._e()],1),t._v(" "),i("el-dialog",{staticClass:"nopadding freeze-dialog",attrs:{visible:t.freezeDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.freezeDialogVisible=e},close:t.hideReezeDialogHandle}},[i("div",{staticClass:"freeze-content"},[i("img",{attrs:{src:t.sucTipImg}}),t._v(" "),i("span",{staticClass:"freeze-tip"},[t._v(t._s(t.sucTipText))])]),t._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.freezeOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideReezeDialog}},[t._v("取消")])])]),t._v(" "),i("el-dialog",{staticClass:"nopadding delete-dialog",attrs:{visible:t.deleteDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.deleteDialogVisible=e},close:t.hideReezeDialogHandle}},[i("div",{staticClass:"freeze-content"},[i("img",{attrs:{src:t.sucTipImg}}),t._v(" "),t.delDepartDialogVisible?i("span",{staticClass:"freeze-tip"},[t._v("确定要删除该部门？")]):i("span",{staticClass:"freeze-tip"},[t._v("确定删除该员工？")])]),t._v(" "),t.delDepartDialogVisible?i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.deleteDepartOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])]):i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.deleteOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])])]),t._v(" "),i("el-dialog",{staticClass:"div-box",attrs:{title:t.dia_title,visible:t.editDialogVisible,width:"600px"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.hideReezeDialogHandle}},[i("div",{staticClass:"freeze-content"},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[t.addNewDepart?i("el-form-item",{attrs:{label:"部门名称","label-width":"120px",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},on:{input:function(e){t.checkInput("form")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1):i("el-form-item",{attrs:{label:"修改部门名称","label-width":"120px",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},on:{input:function(e){t.checkInput("form")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),t._v(" "),t.addNewDepart?i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:function(e){t.addOk("form")}}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])]):i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:function(e){t.editOk("form")}}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])])]),t._v(" "),i("el-dialog",{staticClass:"nopadding delete-dialog",attrs:{visible:t.delPOsitionDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.delPOsitionDialogVisible=e},close:t.hideReezeDialogHandle}},[i("div",{staticClass:"freeze-content"},[i("img",{attrs:{src:t.sucTipImg}}),t._v(" "),i("span",{staticClass:"freeze-tip"},[t._v("确定删除该职位？")])]),t._v(" "),i("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"btn-Dialogok sl-btn-bd-b-blue",on:{click:t.deletePosiOk}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"btn-Dialogcancel sl-btn-bd-b-blue",on:{click:t.hideDeleteDialog}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"change-titlerr rank-title"},[e("span",[this._v("部门列表")])])}]};var n=function(t){i("jXsU"),i("d3iN")},l=i("C7Lr")(a.a,s,!1,n,"data-v-51fb3a10",null);e.default=l.exports},NEg1:function(t,e){},YIva:function(t,e){},"YVy+":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAAAXNSR0IArs4c6QAAARtJREFUOBHVU8ENwjAMpBVCvGGH/tiFCXgCL9YqA3STbtK+KdwFO3JSRwh4ICylts/nq9ski0XJKhbuMLhtJFWCnFlqJXnyNIGva22oYBLfFJt7tsI6PpLqDEiqmpAlNij2nme37RC1k2JLDdSDcEC81u9D3iPeaV3/XMwZgNRgfThjIvV1gjnC9sEHk/kuSMZEnFULICVpsliILbFIIjMjxtcB7xNVS7QFi+tJGwE2luTGIG2wBipk1roNvwMxHkflJnnjdnYycPZYPJFlM0LFHwUON5c2YR3LaqgEGh4eCbAVihfJ40bMEwTGT6NxokQI+YorCuQBisEcXM9NUvL4LjHpQoKrP78QOUnyXPBKXN/8yotG6JH4D9wDXN5k0yNgAkEAAAAASUVORK5CYII="},blh5:function(t,e,i){"use strict";i.d(e,"a",function(){return l}),i.d(e,"b",function(){return r});var a=i("P9l9"),s=i("a2vD"),n=i("6nXL"),l=function(){var t=this,e=[],i={get_ag_department_list:1,agent_id:s.a.getAgentid(),page_size:1e5,page_no:1};return Object(a.z)(i).then(function(i){if(0===i.ret){var a=i.data.ag_department_list;a&&a.length>0&&a.forEach(function(t){var i={};i.label=t.ag_department_name,i.ag_department_id=t.ag_department_id,e.push(i)})}else t.$slnotify({message:n.X.toString(i.ret),duration:1e3})}),e},r=function(){var t=this,e=[],i={get_ag_role_list:1,agent_id:s.a.getAgentid(),page_size:1e5,page_no:1};return Object(a.g)(i).then(function(i){if(0===i.ret){var a=i.data.list;a&&a.length>0&&a.forEach(function(t){var i={};i.label=t.role_name,i.ag_position_id=t.ag_role_id,e.push(i)})}else t.$slnotify({message:n.X.toString(i.ret),duration:1e3})}),e}},d3iN:function(t,e){},jDEV:function(t,e){},jXsU:function(t,e){},lWxv:function(t,e){},o1Lc:function(t,e,i){"use strict";i.d(e,"c",function(){return l}),i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o});var a=i("CC2O"),s=(i("a2vD"),i("EuEE")),n=i("P9l9"),l={initTreeData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e=e.map(function(e){return a.default.set(e,"canEditor",!1),a.default.set(e,"addIcon",!0),a.default.set(e,"editorIcon",!0),a.default.set(e,"deleteIcon",!0),a.default.set(e,"isShowBtn",!1),a.default.set(e,"isActive",!1),a.default.set(e,"breakshow",!1),a.default.set(e,"allShow",!1),a.default.set(e,"isExpand",!0),a.default.set(e,"isFolder",!1),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.initTreeData(e.employee_list),e})},addTitleToTree:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return a.default.set(e,"pl_department_name","部门管理"),a.default.set(e,"employee_list",t),a.default.set(e,"isThree",!0),a.default.set(e,"isActive",!0),a.default.set(e,"pl_department_id","0"),e},addTitleAgentTree:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return a.default.set(e,"ag_department_name","部门管理"),a.default.set(e,"employee_list",t),a.default.set(e,"isThree",!0),a.default.set(e,"isActive",!0),a.default.set(e,"ag_department_id","0"),e},generateKey:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments[1];return e=e.map(function(e,a){return e.key=i+"-"+a.toString(),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.generateKey(e.employee_list,e.key),e})},getKeylength:function(t){if(!s.a.isEmpty(t))return t.split("-").length},selectIcon:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=e.map(function(e){var i=t.getKeylength(e.key);2===i?(e.addIcon=!0,e.editorIcon=!1,e.deleteIcon=!1,e.isExpand=!0,e.isActive=!0):3===i?(e.addIcon=!1,e.editorIcon=!0,e.deleteIcon=!0,e.isExpand=!1,e.isFolder=!0):4===i&&(e.addIcon=!1,e.editorIcon=!1,e.deleteIcon=!1),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.selectIcon(e.employee_list)})},saveDepartName:function(){var t=[];return function e(i){i.forEach(function(i){i.hasOwnProperty("pl_department_name")&&"部门管理"!==i.pl_department_name&&t.push(i.pl_department_name),i.hasOwnProperty("employee_list")&&i.employee_list.length>0&&e(i.employee_list)})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),t},treeDataById:function(){var t={};return function e(i){i.forEach(function(i){i.hasOwnProperty("pl_department_id")?t[i.pl_department_id]=i:i.hasOwnProperty("employee_id")&&(t[i.employee_id]=i),i.hasOwnProperty("ag_department_id")?t[i.ag_department_id]=i:i.hasOwnProperty("employee_id")&&(t[i.employee_id]=i),i.hasOwnProperty("employee_list")&&i.employee_list.length>0&&e(i.employee_list)})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),t},changeSelecte:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in e)e.hasOwnProperty(i)&&(e[i].isActive=t===i);return e},getDutyArr:function(t){var e=[];return t.forEach(function(t){-1===e.indexOf(t.position_name)&&e.push(t.position_name)}),e},getDutyDepartId:function(t,e){var i;return t.forEach(function(t){void 0!==t.position_name?t.position_name===e&&(i=t.position_id):t.pl_department_name===e&&(i=t.department_id)}),i},getTotal:function(t){if(void 0!==t&&t.length>0){for(var e=0,i=0;i<t.length;i++)e++;return e}},getPageList:function(t,e,i){if(void 0!==t&&t.length>0){return t.filter(function(t,a){return a<e*i&&a>=e*(i-1)})}}},r=function(){var t=[];return Object(n.z)({get_pl_department_list:1,page_size:1e5,page_no:1}).then(function(e){if(0===e.ret){var i=e.data.pl_department_list;i&&i.length>0&&i.forEach(function(e){var i={};i.label=e.pl_department_name,i.pl_department_id=e.pl_department_id,t.push(i)})}}),t},o=function(){var t=[];return Object(n.X)({get_pl_role_list:1,only_name:1,page_size:1e5,page_no:1}).then(function(e){if(0===e.ret){console.log("平台角色=>",e);var i=e.data.list;i&&i.length>0&&i.forEach(function(e){var i={};i.label=e.role_name,i.pl_position_id=e.pl_role_id,t.push(i)})}}),t}},o4s6:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM0OEE5QzdGNzkxMzExRThBNkUwRURGMTRFOTM4NTlGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM0OEE5QzgwNzkxMzExRThBNkUwRURGMTRFOTM4NTlGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzQ4QTlDN0Q3OTEzMTFFOEE2RTBFREYxNEU5Mzg1OUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzQ4QTlDN0U3OTEzMTFFOEE2RTBFREYxNEU5Mzg1OUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4SASNEAAABLklEQVR42mL0qHjBgAWwAXEAFFsCsRQQ/wLiJ0B8HojXA/FGqBgKYMFiWCAQdwGxChZLNKA4EojvAHE5EK9DVsSExGYG4k6oAhUGwgCkZi1UDzM2F7YBcRkD6QCmpxzZhSEEDLOFYnyGhsAMBIVNPwFXHIFifGACyCyQgaFALMNAOZAG4jAmaNKgFggAGWhKRQNNQAZKYIkARjQMA+ji6BElyYQttZMA/mPLKc+BmBdJ7DAWjYy4DEADz0EuvETFMDwDMnADFQ3cADJwNbQUoRQ8BZkFi5QiAoptgNiagJpCIP4Jy8sgV3bjUXyYQNbrhpqBUnxVAvEUMrw6FaoXozz8C8S50FLjDhEG3YGWAzlQvThLbFChuRmqGFR6G0MzPizgz0KrgNXYMgVAgAEAsXw4J+QeCL0AAAAASUVORK5CYII="},"wR+7":function(t,e,i){"use strict";var a={props:["NODE","DATA","STORE"],data:function(){return{editImg:i("YVy+"),addImg:i("o4s6"),deleteImg:i("3sWp")}},created:function(){},methods:{nodeAdd:function(t,e,i){this.$emit("nodeAdd",t,e,i)},nodeEdit:function(t,e,i){this.$emit("nodeEdit",t,e,i)},nodeDel:function(t,e,i){this.$emit("nodeDel",t,e,i)}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"tree-expand"},[i("span",{staticClass:"tree-label"},[t.DATA.pl_department_id||t.DATA.ag_department_id?i("span",[t._v(t._s(t.DATA.label))]):i("span",{staticClass:"isTitle"},[t._v(t._s(t.DATA.label))])]),t._v(" "),i("span",{staticClass:"tree-btn"},[t.DATA.pl_department_id||t.DATA.ag_department_id?i("img",{staticClass:"edit-btn",attrs:{src:t.editImg,alt:""},on:{click:function(e){e.stopPropagation(),t.nodeEdit(t.STORE,t.DATA,t.NODE)}}}):t._e(),t._v(" "),t.DATA.pl_department_id||t.DATA.ag_department_id?t._e():i("img",{staticClass:"add-btn",attrs:{src:t.addImg,alt:""},on:{click:function(e){e.stopPropagation(),t.nodeAdd(t.STORE,t.DATA,t.NODE)}}}),t._v(" "),t.DATA.pl_department_id||t.DATA.ag_department_id?i("img",{staticClass:"delete-btn",attrs:{src:t.deleteImg,alt:""},on:{click:function(e){e.stopPropagation(),t.nodeDel(t.STORE,t.DATA,t.NODE)}}}):t._e()])])},staticRenderFns:[]};var n=i("C7Lr")(a,s,!1,function(t){i("62Uw")},"data-v-7197d890",null);e.a=n.exports}});