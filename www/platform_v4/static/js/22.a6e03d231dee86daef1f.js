webpackJsonp([22,56,108],{GMrA:function(t,e){},TWVw:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("ltuQ"),a=i("X3YX"),o={components:{TableGood:s.default,TreeTable:a.default}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"good-list"},[e("tree-table",{staticClass:"tree-good"}),this._v(" "),e("table-good",{staticClass:"table-good"})],1)},staticRenderFns:[]};var n=i("C7Lr")(o,l,!1,function(t){i("Y1ca")},"data-v-4a588921",null);e.default=n.exports},X3YX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={components:{TreeGood:i("h7tv").default},mounted:function(){}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"treeTableHeight",staticClass:"tree-table"},[e("div",{staticClass:"change-titlerr"},[this._v("商品分类")]),this._v(" "),e("div",{ref:"treeContentMaxHeight",staticClass:"tree-content"},[e("tree-good")],1)])},staticRenderFns:[]};var o=i("C7Lr")(s,a,!1,function(t){i("jf/7")},"data-v-ac08bf2a",null);e.default=o.exports},Y1ca:function(t,e){},aF1R:function(t,e,i){"use strict";(function(t){var s=i("4YfN"),a=i.n(s),o=i("r2UX"),l=i("P9l9"),n=(i("a2vD"),i("6nXL")),r=i("EuEE"),c=i("6ROu"),u=i.n(c),d=i("9rMa"),p=i("FvnR");e.a={components:{EmptyTable:o.a,PhonePreview:p.default},data:function(){return{value2:!0,selanumTime:null,goods_name:"",saleStatus:"",list:[],emptyType:1,multipleSelection:[],total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}}]},SaleStatus:n.L,saleStatusItem:[{value:n.L.ALL,label:n.L.toString(n.L.ALL)},{value:n.L.YES,label:n.L.toString(n.L.YES)},{value:n.L.NO,label:n.L.toString(n.L.NO)}],singleDelete:!1,muDelete:!1,goodArrOpr:[],dialogDelId:"",showSearchBottom:!1,previewVisible:!1,previewObj:{}}},computed:a()({},Object(d.d)({search_category:function(t){return t.shopmall_goods.search_category}}),{isListEmpty:function(){return 0===this.list.length}}),created:function(){this.getList()},watch:{search_category:function(t){this.emptyType=2,this.listQuery.page=1,this.getList()}},mounted:function(){var e=this.$refs.manageGoodsListTableAdjust.$refs.bodyWrapper;this.$nextTick(function(){r.a.AdjustMinHeight(e)}),t(window).resize(function(){r.a.AdjustMinHeight(e)})},methods:a()({},Object(d.c)(["SMG_SET_SEARCHCATE"]),{getList:function(){var t=this,e={get_goods_list:1,is_draft:0,is_recycle:0,page_size:this.listQuery.limit,page_no:this.listQuery.page};if(this.goods_name&&(e.goods_name=this.goods_name),!r.a.isEmpty(this.selanumTime)){var s=this.selanumTime[0],a=this.selanumTime[1];e.sale_num_begin=parseInt(u()(s).format("YYYYMMDD")),e.sale_num_end=parseInt(u()(a).format("YYYYMMDD"))}(this.saleStatus===n.L.YES||this.saleStatus)&&(this.saleStatus===n.L.YES?e.sale_off=0:this.saleStatus===n.L.NO&&(e.sale_off=1)),this.search_category&&(e.category_id=this.search_category),this.isSort&&(e.sortby=this.sortLabel,e.sort=this.sortOrder),Object(l.M)(e).then(function(e){0===e.ret?(t.list=e.data.goods_list||[],t.total=e.data.total,t.listQuery.page>1&&0===t.list.length&&(t.listQuery.page--,t.getList()),t.list=t.list.map(function(t){t.goods_img_list&&0!==t.goods_img_list.length?t.goods_imgsrc="./php/img_get.php?img=1&width=100&height=100&imgname="+t.goods_img_list[0]:t.goods_imgsrc=i("SEhC"),t.is_hot?t.isHotGoods=!0:t.ishotGoods=!1;var e=t.spec_type,s=t.goods_price,a=[];switch(s.forEach(function(t){t.time_unit===n.m.MONTH||t.time_unit===n.m.QUARTER?t.itemStr=t.time+"个"+n.m.toString(t.time_unit):t.itemStr=""+t.time+n.m.toString(t.time_unit)}),e){case n.n.SPEC:a=s.map(function(t){var e={};return e.label=t.spec_name,e.price=t.price,e.sale_price=t.sale_price,e});break;case n.n.PACK:a=s.map(function(t){var e={};return e.label=t.package,e.price=t.price,e.sale_price=t.sale_price,e});break;case n.n.SPECANDPACK:a=s.map(function(t){var e={};return e.label=t.spec_name+"/"+t.package,e.price=t.price,e.sale_price=t.sale_price,e});break;case n.n.TERMINAL:a=s.map(function(t){var e={};return e.label=n.I.toString(t.terminal)+"/"+t.itemStr,e.price=t.price,e.sale_price=t.sale_price,e});break;case n.n.SERVERTIME:a=s.map(function(t){var e={};return e.label=""+t.itemStr,e.price=t.price,e.sale_price=t.sale_price,e})}return t.spcePriceList=a,t.hasSalePrice=!1,s.forEach(function(e){e.sale_price&&(t.hasSalePrice=!0)}),t})):t.$slnotify({message:n.X.toString(e.ret)})})},search:function(){this.emptyType=2,this.listQuery.page=1,this.getList()},clearSearch:function(){this.selanumTime=null,this.goods_name="",this.saleStatus="",this.SMG_SET_SEARCHCATE({search_category:""}),this.getList()},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},goCrate:function(){this.$router.push({path:"/officialmanage/goodeditor"})},goEdit:function(t){this.$router.push({path:"/officialmanage/goodeditor",query:{goodsid:t}})},goDraft:function(){this.$router.push({path:"/officialmanage/goodsdraft"})},goReycle:function(){this.$router.push({path:"/officialmanage/goodsrecycle"})},deleteGoods:function(){var t=this,e={goods_sale_off:1,goods_id_list:this.goodArrOpr,sale_off:1,type:1};Object(l.P)(e).then(function(e){0===e.ret?(t.singleDialogDeleteCancel(),t.muDialogDelteCancel(),t.getList(),t.$notify({title:"成功",message:"操作成功！",type:"success"})):t.$notify({title:"成功",message:"操作失败！",type:"error"})})},openSingleDialog:function(t){this.dialogDelId=t,this.singleDelete=!0},openMuDialogDlete:function(){0!==this.multipleSelection.length?this.muDelete=!0:this.$notify({title:"警告",message:"请先选择要批量删除项！",type:"warning"})},singleDialogDelete:function(){this.goodArrOpr=[],this.goodArrOpr.push(this.dialogDelId),this.deleteGoods()},singleDialogDeleteCancel:function(){this.singleDelete=!1},muDialogDelteCancel:function(){this.muDelete=!1},muDialogDelete:function(){this.goodArrOpr=[],this.goodArrOpr=this.multipleSelection.map(function(t){return t.goods_id}),this.deleteGoods()},saleOff:function(){var t=this,e={goods_sale_off:1,goods_id_list:this.goodArrOpr,sale_off:1};Object(l.P)(e).then(function(e){0===e.ret?(t.getList(),t.$notify({title:"成功",message:"下架成功！",type:"success"})):t.$notify({title:"失败",message:"下架失败！",type:"error"})})},singleSaleOff:function(t){this.goodArrOpr=[],this.goodArrOpr.push(t),this.saleOff()},muSaleOff:function(){this.goodArrOpr=[],0!==this.multipleSelection.length?(this.goodArrOpr=this.multipleSelection.map(function(t){return t.goods_id}),this.saleOff()):this.$notify({title:"警告",message:"请先选择要下架项！",type:"warning"})},singleSaleOn:function(t){this.goodArrOpr=[],this.goodArrOpr.push(t),this.saleOn()},muSaleOn:function(){this.goodArrOpr=[],0!==this.multipleSelection.length?(this.goodArrOpr=this.multipleSelection.map(function(t){return t.goods_id}),this.saleOn()):this.$notify({title:"警告",message:"请先选择要上架项！",type:"warning"})},saleOn:function(){var t=this,e={goods_sale_off:1,goods_id_list:this.goodArrOpr,sale_off:0};Object(l.P)(e).then(function(e){0===e.ret?(t.getList(),t.$notify({title:"成功",message:"上架成功！",type:"success"})):t.$notify({title:"失败",message:"上架失败！",type:"error"})})},setHotGoods:function(t){var e=this;if(1!==t.sale_off){var i={goods_set_hot:1,goods_id:t.goods_id};t.is_hot?i.is_hot=0:i.is_hot=1,Object(l.P)(i).then(function(t){0===t.ret?e.getList():e.$slnotify({message:n.X.toString(t.ret)})})}else this.$notify({title:"失败",message:"请先上架该商品！",type:"error"})},toggleSearchBottom:function(){this.showSearchBottom=!this.showSearchBottom},openPhonePreviewDialog:function(t){var e=this,i=null,s=null;0!==t.goods_price.length&&(t.hasSalePrice?(i=t.goods_price[0].sale_price,s=t.goods_price[0].price):i=t.goods_price[0].price,t.goods_price.forEach(function(t){e.hasSalePrice?(i>t.sale_price&&(i=t.sale_price),s>t.price&&(s=t.price)):i>t.price&&(i=t.price)})),this.previewObj.goodsName=t.goods_name,this.previewObj.goodsPicture=(t.goods_img_list||[])[0],this.previewObj.phoneDescImgList=t.desc_img_phone,this.previewObj.hasSalePrice=t.hasSalePrice,this.previewObj.firPrice=i,this.previewObj.secPrice=s,this.previewVisible=!0},closePhonePreviewDialog:function(t){this.previewObj={},this.previewVisible=!1}})}}).call(e,i("L7Pj"))},jXlv:function(t,e){},"jf/7":function(t,e){},ltuQ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("aF1R"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"manage-goods-list"}},[s("div",{staticClass:"change-titlerr"},[t._v("列表详情")]),t._v(" "),s("div",{staticClass:"search-content"},[s("div",{staticClass:"search-top clearfix btn-group-font"},[s("div",{staticClass:"fl clearfix"},[s("div",{staticClass:"search-item fl change-input"},[s("span",{staticClass:"label-title"},[t._v("商品名称")]),t._v(" "),s("el-input",{attrs:{placeholder:"名称或者编号"},model:{value:t.goods_name,callback:function(e){t.goods_name=e},expression:"goods_name"}})],1),t._v(" "),s("div",{staticClass:"fl search-item btn-group-font"},[s("span",{staticClass:"label-title"},[t._v("上架状态")]),t._v(" "),s("el-select",{staticClass:"change-input",attrs:{placeholder:"请选择"},model:{value:t.saleStatus,callback:function(e){t.saleStatus=e},expression:"saleStatus"}},t._l(t.saleStatusItem,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("div",{staticClass:"fl clear-search",on:{click:t.clearSearch}},[t._v("清空条件")]),t._v(" "),s("div",{staticClass:"fl clear-search",on:{click:t.toggleSearchBottom}},[s("span",[t._v("更多操作")]),t._v(" "),s("i",{staticClass:"icon el-icon-caret-bottom",class:{"rotate-top":t.showSearchBottom}})])]),t._v(" "),s("div",{staticClass:"fr btn-group-font"},[s("div",{staticClass:"sl-btn-bd-search",on:{click:t.search}},[t._v("搜索")]),t._v(" "),s("div",{staticClass:"sl-btn-bd-search",on:{click:t.goCrate}},[t._v("创建")])])]),t._v(" "),t.showSearchBottom?s("div",{staticClass:"search-bottom clearfix"},[s("div",{staticClass:"fl"},[s("div",{staticClass:"search-item fl"},[s("span",{staticClass:"label-title"},[t._v("销量查询")]),t._v(" "),s("el-date-picker",{attrs:{"unlink-panels":"",editable:!1,type:"daterange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.selanumTime,callback:function(e){t.selanumTime=e},expression:"selanumTime"}})],1)]),t._v(" "),s("div",{staticClass:"fl btn-group-font"},[s("div",{staticClass:"sl-btn-bd-search",on:{click:t.goReycle}},[t._v("回收站")]),t._v(" "),s("div",{staticClass:"sl-btn-bd-search",on:{click:t.goDraft}},[t._v("草稿箱")]),t._v(" "),s("div",{staticClass:"sl-btn-bd-search",on:{click:t.muSaleOn}},[t._v("批量上架")]),t._v(" "),s("div",{staticClass:"sl-btn-bd-search",on:{click:t.muSaleOff}},[t._v("批量下架")]),t._v(" "),s("div",{staticClass:"sl-btn-bd-search",on:{click:t.openMuDialogDlete}},[t._v("批量删除")])])]):t._e()]),t._v(" "),s("div",{staticClass:"table-content change-default-table change-default"},[s("el-table",{ref:"manageGoodsListTableAdjust",attrs:{data:t.list,stripe:""},on:{"sort-change":t.sort,"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{prop:"num_no",label:"序号",width:"55",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"goods_id",label:"编号","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.goods_id))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"goods_img",label:"图片","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("img",{staticClass:"goods_img",attrs:{src:t.row.goods_imgsrc,alt:"good_img"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"goods_name",label:"品名","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.goods_name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"1",label:"价格","min-width":"80",align:"center",sortable:"true","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-popover",{attrs:{trigger:"click",placement:"top"}},[s("el-table",{staticClass:"price-spec-table",attrs:{data:e.row.spcePriceList,border:""}},[s("el-table-column",{attrs:{width:"150",property:"label",label:"规格"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.label))]}}])}),t._v(" "),s("el-table-column",{attrs:{width:"100",property:"price",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("¥ "+t._s(t._f("numFix")(e.row.price)))]}}])}),t._v(" "),e.row.hasSalePrice?s("el-table-column",{attrs:{width:"100",property:"sale_price",label:"促销价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("¥ "+t._s(t._f("numFix")(e.row.sale_price)))]}}])}):t._e()],1),t._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("span",[t._v("¥ "+t._s(t._f("numFix")(e.row.min_price)))])])],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"category_name",label:"商品类别","min-width":"80",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.category_name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"hot_goods",label:"热卖商品","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-switch",{attrs:{disabled:"","active-color":"#4877E7","inactive-color":"#999999"},nativeOn:{click:function(i){t.setHotGoods(e.row)}},model:{value:e.row.isHotGoods,callback:function(i){t.$set(e.row,"isHotGoods",i)},expression:"scope.row.isHotGoods"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"2",label:"销量","min-width":"80",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.sale_num))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"3",label:"库存","min-width":"80",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.stock_num))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"apply_time",label:"操作","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.sale_off===t.SaleStatus.YES?s("span",{staticClass:"red-text",staticStyle:{"padding-right":"10px","padding-bottom":"10px"},on:{click:function(i){t.singleSaleOff(e.row.goods_id)}}},[t._v("下架")]):s("span",{staticClass:"blue-text",staticStyle:{"padding-right":"10px","padding-bottom":"10px"},on:{click:function(i){t.singleSaleOn(e.row.goods_id)}}},[t._v("上架")]),t._v(" "),s("span",{staticClass:"blue-text",on:{click:function(i){t.openPhonePreviewDialog(e.row)}}},[t._v("预览")]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"blue-text",on:{click:function(i){t.goEdit(e.row.goods_id)}}},[t._v("编辑")]),t._v(" "),s("span",{staticClass:"red-text",staticStyle:{"padding-left":"10px","padding-top":"10px"},on:{click:function(i){t.openSingleDialog(e.row.goods_id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.isListEmpty?s("empty-table",{attrs:{type:t.emptyType}}):t._e()],1),t._v(" "),s("div",{staticClass:"pagination-contentrr change-pagination-default"},[s("el-pagination",{staticClass:"sl-pagination",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),s("el-dialog",{staticClass:"dialog-custom-b nopadding",attrs:{visible:t.singleDelete,"show-close":!1,"before-close":t.singleDialogDeleteCancel,width:"540px",top:"30vh"},on:{"update:visible":function(e){t.singleDelete=e}}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),s("div",{staticClass:"dialog-content"},[s("div",{staticClass:"delete-tip"},[s("div",{staticClass:"delete-img"},[s("img",{attrs:{src:i("RrKl"),alt:"提示图片"}})]),t._v(" "),s("div",{staticClass:"delete-text"},[t._v("确认删除选中商品？")])]),t._v(" "),s("div",{staticClass:"button-group"},[s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.singleDialogDelete}},[t._v("确定")]),t._v(" "),s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.singleDialogDeleteCancel}},[t._v("取消")])])])]),t._v(" "),s("el-dialog",{staticClass:"dialog-custom-b nopadding",attrs:{visible:t.muDelete,"show-close":!1,"before-close":t.muDialogDelteCancel,width:"540px",top:"30vh"},on:{"update:visible":function(e){t.muDelete=e}}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),t._v(" "),s("div",{staticClass:"dialog-content"},[s("div",{staticClass:"delete-tip"},[s("div",{staticClass:"delete-img"},[s("img",{attrs:{src:i("RrKl"),alt:"提示图片"}})]),t._v(" "),s("div",{staticClass:"delete-text"},[t._v("确认批量删除选中商品？")])]),t._v(" "),s("div",{staticClass:"button-group"},[s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.muDialogDelete}},[t._v("确定")]),t._v(" "),s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:t.muDialogDelteCancel}},[t._v("取消")])])])]),t._v(" "),s("phone-preview",{attrs:{"preview-visible":t.previewVisible,"preview-obj":t.previewObj},on:{"on-close":t.closePhonePreviewDialog}})],1)},staticRenderFns:[]};var o=function(t){i("jXlv"),i("GMrA")},l=i("C7Lr")(s.a,a,!1,o,"data-v-35aa2064",null);e.default=l.exports}});