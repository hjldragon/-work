webpackJsonp([33],{"47rU":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("g4GM"),n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"adjustHeight",staticClass:"city-freght",attrs:{id:"ep-city-freght"}},[s("div",{staticClass:"table-content change-default-table change-default"},[s("el-table",{ref:"epcityfreghTableAdjust",attrs:{data:e.list,stripe:""},on:{"sort-change":e.sort}},[s("el-table-column",{attrs:{prop:"num_no",label:"序号",width:"55",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:"收货地","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():s("span",[e._v(e._s(t.row.province)+e._s(t.row.city))]),e._v(" "),t.row.isEdit?s("span",{staticClass:"sl-must"}):e._e(),e._v(" "),t.row.isEdit?s("provice-city",{staticClass:"ep-city-select",attrs:{cityinfo:t.row.cityinfo},on:{changeProvinces:function(i){e.handlerCitySelect(t.row,i)}}}):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"first_weight",label:"首重（KG）","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():s("span",{staticClass:"line-test"},[e._v(e._s(t.row.first_weight))]),e._v(" "),t.row.isEdit?s("span",{staticClass:"sl-must"}):e._e(),e._v(" "),t.row.isEdit?s("el-input",{staticClass:"freght",nativeOn:{keyup:function(i){e.checkInput(t.row,"first_weight")}},model:{value:t.row.first_weight,callback:function(i){e.$set(t.row,"first_weight",i)},expression:"scope.row.first_weight"}}):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"first_fee",label:"首费（元）","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():s("span",{staticClass:"line-test"},[e._v(e._s(t.row.first_fee))]),e._v(" "),t.row.isEdit?s("span",{staticClass:"sl-must"}):e._e(),e._v(" "),t.row.isEdit?s("el-input",{staticClass:"freght",nativeOn:{keyup:function(i){e.checkInput(t.row,"first_fee")}},model:{value:t.row.first_fee,callback:function(i){e.$set(t.row,"first_fee",i)},expression:"scope.row.first_fee"}}):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"add_weight",label:"续重（KG）","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():s("span",{staticClass:"line-test"},[e._v(e._s(t.row.add_weight))]),e._v(" "),t.row.isEdit?s("span",{staticClass:"sl-must"}):e._e(),e._v(" "),t.row.isEdit?s("el-input",{staticClass:"freght",nativeOn:{keyup:function(i){e.checkInput(t.row,"add_weight")}},model:{value:t.row.add_weight,callback:function(i){e.$set(t.row,"add_weight",i)},expression:"scope.row.add_weight"}}):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"add_fee",label:"续费（元）","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():s("span",{staticClass:"line-test"},[e._v(e._s(t.row.add_fee))]),e._v(" "),t.row.isEdit?s("span",{staticClass:"sl-must"}):e._e(),e._v(" "),t.row.isEdit?s("el-input",{staticClass:"freght",nativeOn:{keyup:function(i){e.checkInput(t.row,"add_fee")}},model:{value:t.row.add_fee,callback:function(i){e.$set(t.row,"add_fee",i)},expression:"scope.row.add_fee"}}):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"goods_id",label:"操作","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():s("span",{staticClass:"blue-text",staticStyle:{"margin-right":"10px"},on:{click:function(i){e.editClickHandler(t.row)}}},[e._v("编辑")]),e._v(" "),t.row.isEdit?e._e():s("span",{staticClass:"blue-text",on:{click:function(i){e.deleteClickHandler(t.row,t.$index)}}},[e._v("删除")]),e._v(" "),t.row.isEdit?s("span",{staticClass:"blue-text",staticStyle:{"margin-right":"10px"},on:{click:function(i){e.saveClickHandler(t.row,t.$index)}}},[e._v("完成")]):e._e(),e._v(" "),t.row.isEdit?s("span",{staticClass:"blue-text",on:{click:function(i){e.cancelClickHandler(t.row,t.$index)}}},[e._v("取消")]):e._e()]}}])})],1)],1),e._v(" "),s("div",{staticClass:"add-btn flex-box cross-center",on:{click:e.addClickHandler}},[s("img",{attrs:{src:i("Rs2e")}}),e._v(" "),s("span",[e._v("添加")])]),e._v(" "),s("el-dialog",{staticClass:"dialog-custom-b nopadding",attrs:{visible:e.singleDelete,"show-close":!1,"before-close":e.singleDialogDeleteCancel,width:"540px",top:"30vh"},on:{"update:visible":function(t){e.singleDelete=t}}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"}),e._v(" "),s("div",{staticClass:"dialog-content"},[s("div",{staticClass:"delete-tip"},[s("div",{staticClass:"delete-img"},[s("img",{attrs:{src:i("RrKl"),alt:"提示图片"}})]),e._v(" "),s("div",{staticClass:"delete-text"},[e._v("确认删除选中该城市？")])]),e._v(" "),s("div",{staticClass:"button-group"},[s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:e.singleDialogDelete}},[e._v("确定")]),e._v(" "),s("span",{staticClass:"sl-btn-bd-b-blue",on:{click:e.singleDialogDeleteCancel}},[e._v("取消")])])])])],1)},staticRenderFns:[]};var c=function(e){i("gtM2"),i("C/Vx")},r=i("C7Lr")(s.a,n,!1,c,"data-v-c54ca1b4",null);t.default=r.exports},"C/Vx":function(e,t){},WHBJ:function(e,t){},ZYrK:function(e,t){},g4GM:function(e,t,i){"use strict";(function(e){var s=i("EuEE"),n=i("6nXL"),c=i("P9l9"),r=i("yStE");t.a={components:{ProviceCity:r.a},data:function(){return{list:[],emptyType:1,multipleSelection:[],proviceArr:[],cityArr:[],total:100,listQuery:{page:1,limit:10},isSort:!1,sortLabel:"",sortOrder:1,singleDelete:!1,deleteId:""}},created:function(){this.getList()},mounted:function(){var t=this.$refs.epcityfreghTableAdjust.$refs.bodyWrapper;this.$nextTick(function(){s.a.AdjustHeight(t)}),e(window).resize(function(){s.a.AdjustHeight(t)})},methods:{getList:function(){var e=this;Object(c.E)({get_freight_list:1}).then(function(t){0===t.ret?(e.list=t.data.list,e.list=e.list.map(function(t){return t.cityinfo={province:t.province,city:t.city,area:""},e.$set(t,"isEdit",!1),t}),e.proviceArr=e.list.map(function(e){return e.province}),e.cityArr=e.list.map(function(e){return e.city})):e.$slnotify({message:n.X.toString(t.ret)})})},sort:function(e){this.sortLabel=e.prop,"descending"===e.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===e.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getList()},handlerCitySelect:function(e,t){e.province=t.province,e.city=t.city,e.cityinfo.province=t.province,e.cityinfo.city=t.city},editClickHandler:function(e){var t=this.proviceArr.indexOf(e.province),i=this.cityArr.indexOf(e.city);-1!==t&&this.proviceArr.splice(t,1),-1!==i&&this.cityArr.splice(i,1),e.isEdit=!0},deleteClickHandler:function(e,t){this.deleteId=e.freight_id,this.deleteId?this.openDialogDelete():this.list.splice(t,1)},saveClickHandler:function(e,t){var i=this;if(e.province&&e.city&&e.first_fee&&e.add_fee&&e.first_weight&&e.add_weight)if(-1===this.proviceArr.indexOf(e.province)||-1===this.cityArr.indexOf(e.city)){var s={freight_save:1,province:e.province,city:e.city,first_fee:e.first_fee,add_fee:e.add_fee,first_weight:e.first_weight,add_weight:e.add_weight};e.freight_id&&(s.freight_id=e.freight_id),Object(c.F)(s).then(function(s){e.isEdit=!1,0===s.ret?(e.freight_id?i.$notify({title:"成功",message:"编辑成功",type:"success"}):i.$notify({title:"成功",message:"保存成功",type:"success"}),i.getList()):(i.list.splice(t,1),i.$slnotify({message:n.X.toString(s.ret)}))})}else this.$notify({title:"警告",message:"已存在该城市，不能保存",type:"warning"});else this.$notify({title:"警告",message:"请填写完整信息",type:"warning"})},cancelClickHandler:function(e,t){e.freight_id?this.getList():this.list.splice(t,1)},addClickHandler:function(){var e=this;this.list.push({cityinfo:{province:"",city:"",area:""},province:"",city:"",first_weight:"",first_fee:"",add_weight:"",add_fee:"",isEdit:!0}),this.$nextTick(function(){var t=e.$refs.epcityfreghTableAdjust.$refs.bodyWrapper;t.scrollTop=t.scrollHeight})},openDialogDelete:function(){this.singleDelete=!0},singleDialogDeleteCancel:function(){this.singleDelete=!1,this.deleteId=""},singleDialogDelete:function(){var e=this,t={freight_del:1,freight_id_list:[this.deleteId]};Object(c.F)(t).then(function(t){0===t.ret?(e.$slnotify({message:"删除成功"}),e.singleDialogDeleteCancel(),e.getList()):e.$slnotify({message:n.X.toString(t.ret)})})},checkInput:function(e,t){e[t]=s.a.clearNoNum(e[t])}}}}).call(t,i("L7Pj"))},gtM2:function(e,t){},yStE:function(e,t,i){"use strict";var s=i("zaCU"),n=i.n(s),c={props:{cityinfo:{type:Object,default:function(){return{province:"",city:"",area:""}}},isSelectError:{type:Boolean/String,default:!1}},data:function(){return{provinces:n.a,selectedProvince:"",selectedCity:"",selectedBlock:"",cities:[],provincesObj:{},citiesObj:{},bloksObj:{},blocks:[]}},computed:{isError:function(){return this.isSelectError},info:function(){var e={};return e.province=this.provincesObj[this.selectedProvince]&&void 0!==this.provincesObj[this.selectedProvince]?this.provincesObj[this.selectedProvince].value:"",e.city=this.citiesObj[this.selectedCity]&&void 0!==this.citiesObj[this.selectedCity]?this.citiesObj[this.selectedCity].value:"",e.blocks=this.bloksObj[this.selectedBlock]&&void 0!==this.bloksObj[this.selectedBlock]?this.bloksObj[this.selectedBlock].value:"",e}},created:function(){this.initareaCode(),this.initData()},watch:{cityinfo:{handler:function(){this.initData()},deep:!0}},methods:{initData:function(){var e=this,t=this.cityinfo.province,i=this.cityinfo.city,s=this.cityinfo.area;if(void 0!==t||void 0!==i||void 0!==s){for(var n in this.provincesObj)if(this.provincesObj.hasOwnProperty(n)){var c=this.provincesObj[n];if(c.value&&t===c.value){this.selectedProvince=n;break}}for(var r in this.citiesObj)if(this.citiesObj.hasOwnProperty(r)){var l=this.citiesObj[r];if(l.value&&i===l.value){this.selectedCity=r;break}}this.citiesObj[this.selectedCity]&&this.citiesObj[this.selectedCity].children&&this.citiesObj[this.selectedCity].children.length>0&&this.citiesObj[this.selectedCity].children.forEach(function(t){t.value===s&&(e.selectedBlock=t.value)}),this.provincesObj[this.selectedProvince]&&this.provincesObj[this.selectedProvince].children&&(this.cities=this.provincesObj[this.selectedProvince].children),this.citiesObj[this.selectedCity]&&this.citiesObj[this.selectedCity].children&&(this.blocks=this.citiesObj[this.selectedCity].children)}},initareaCode:function(){var e={},t={},i={};(n.a||[]).forEach(function(s){if(s.children){var n=s.children||[];e[s.adcode]=s,n.forEach(function(e){e.value&&e.children&&e.children.length>0&&e.value===e.children[0].value&&e.children.splice(0,1),t[e.adcode]=e,(e.children||[]).forEach(function(e){i[e.adcode]=e})})}}),this.provincesObj=e,this.citiesObj=t,this.bloksObj=i},changeProvinces:function(){this.cities=this.provincesObj[this.selectedProvince].children,this.blocks=this.citiesObj[this.cities[0].adcode].children,this.selectedCity="",this.selectedBlock="",this.$emit("changeProvinces",this.info)},changeCity:function(){this.citiesObj[this.selectedCity]&&this.citiesObj[this.selectedCity].children&&(this.blocks=this.citiesObj[this.selectedCity].children),this.selectedBlock="",this.$emit("changeProvinces",this.info)},changeBlock:function(){this.$emit("changeProvinces",this.info)}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"city-select"}},[i("el-select",{class:{"error-tip":e.isError},attrs:{placeholder:"请选择"},on:{change:e.changeProvinces},model:{value:e.selectedProvince,callback:function(t){e.selectedProvince=t},expression:"selectedProvince"}},e._l(e.provinces,function(e){return i("el-option",{key:e.adcode,attrs:{label:e.value,value:e.adcode}})}),1),e._v(" "),i("el-select",{class:{"error-tip":e.isError},attrs:{name:"province"},on:{change:e.changeCity},model:{value:e.selectedCity,callback:function(t){e.selectedCity=t},expression:"selectedCity"}},e._l(e.cities,function(e){return i("el-option",{key:e.adcode,attrs:{label:e.value,value:e.adcode}})}),1)],1)},staticRenderFns:[]};var l=i("C7Lr")(c,r,!1,function(e){i("WHBJ"),i("ZYrK")},"data-v-56b084e6",null);t.a=l.exports}});