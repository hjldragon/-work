webpackJsonp([27,80,155],{ANHr:function(t,e){},J4sB:function(t,e){},"n+du":function(t,e){},"qK/u":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={components:{agentBusiness:o("RUW0").a},data:function(){return{agent_id:"",upPath:""}},props:{agentId:{type:String}},created:function(){this.upPath=this.$route.query.upPath,this.agent_id=this.agentId},methods:{close:function(){this.$router.push(this.upPath)},success:function(){this.$router.push(this.upPath)},goBaseInfo:function(){this.$emit("goBaseInfo",this.agentId)}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("agent-business",{attrs:{shop_id:this.agent_id,add:!0},on:{close:this.close,success:this.success}},[e("div",{staticClass:"of-btn-bd-b-blue",attrs:{slot:"foot"},on:{click:this.goBaseInfo},slot:"foot"},[this._v("上一步")])])],1)},staticRenderFns:[]},s=o("C7Lr")(i,r,!1,null,null,null);e.default=s.exports},qhSK:function(t,e){},tHKV:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("4YfN"),r=o.n(i),s=o("9rMa"),n=o("yCZz"),a=o("qK/u"),c=(o("P9l9"),o("9aGi"),{components:{baseInfo:n.default,IcbcInfo:a.default},data:function(){return{isShowBaseIbfo:!0,agent_id:""}},created:function(){},beforeRouteEnter:function(t,e,o){o(function(t){t.SET_SELECTMENU({selectMenu:"/official/merchant/list"})})},beforeRouteLeave:function(t,e,o){this.SET_SELECTMENU({selectMenu:""}),o()},methods:r()({},Object(s.c)(["SET_SELECTMENU"]),{showIcbc:function(t){this.isShowBaseIbfo=!1,this.agent_id=t},goBaseInfo:function(t){this.isShowBaseIbfo=!0,this.agentId=t},goMerchantList:function(){this.$router.push("/official/merchant/list")}})}),l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"creat-merchant-official"},[o("div",{staticClass:"nav-own-bar"},[o("span",{staticClass:"cant-click-nav"},[t._v("商户管理")]),t._v("\n       >\n       "),o("span",{staticClass:"can-click-nav",on:{click:t.goMerchantList}},[t._v("商户列表")]),t._v("\n       >\n       "),o("span",{staticClass:"current-nav"},[t._v("新增商户")])]),t._v(" "),t.isShowBaseIbfo?o("base-info",{attrs:{shopId:t.agent_id},on:{goIcbcInfo:t.showIcbc}}):o("icbc-info",{attrs:{agentId:t.agent_id},on:{goBaseInfo:t.goBaseInfo}})],1)},staticRenderFns:[]};var f=o("C7Lr")(c,l,!1,function(t){o("qhSK"),o("J4sB")},"data-v-36182dc1",null);e.default=f.exports},yCZz:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("6nXL"),r=o("9aGi"),s=o("EU70"),n=o("GAg9"),a=o("N6PA"),c=o("P9l9"),l=o("a2vD"),f={data:function(){var t=this;return{isOfficial:1,isTextBtn:0,BtnText:"",agentId:l.a.getPlAgentid(),isSelectError:!1,isCheckAllInput:!1,salesMen:l.a.getSalesMen(),basicInfroForm:{},basicInfroFormc:{},employeeOptions:[],basicInfroFormr:{shop_logo:""},tagSelect:["中餐"],rules:{from:[{required:!0,message:"请选择商户来源",trigger:"change,click"}],address:[{required:!0,validator:function(t,e,o){var i=a.b.isSpacebar(e);e&&""!==e?i?o():o(new Error("地址不能包含空格符")):o(new Error("请输入地址"))},trigger:"change,click"}],shop_name:[{required:!0,validator:function(t,e,o){var i=a.b.isSpacebar(e);e&&""!==e?i?o():o(new Error("店铺名称不能包含空格符")):o(new Error("请输入店铺名称"))},trigger:"change,click"}],employee_name:[{required:!0,message:"请选择销售人员",trigger:"change,click"}],real_name:[{required:!0,validator:function(t,e,o){var i=a.b.isSpacebar(e);e&&""!==e?i?o():o(new Error("商户联系人不能包含空格符")):o(new Error("请输入商户联系人"))},trigger:"change,input,click"}],telephone:[{required:!0,validator:function(t,e,o){var i=a.b.isLandLinePhone(e);return e?i?void o():o(new Error("请输入合法的电话号码")):o(new Error("请输入电话号码"))},trigger:"change,input,click"}],phone:[{required:!0,validator:function(t,e,o){var i=a.b.isTelePhone(e);return e?i?void o():o(new Error("请输入合法的电话号码")):o(new Error("请输入电话号码"))},trigger:"change,input,click"}],password:[{required:!0,validator:function(e,o,i){var r=a.b.isPassWord(o);t.basicInfroForm.password?(r||i(new Error("密码格式必须是字母、数字，不能使用特殊字符，长度在6-16之间")),i()):i(new Error("请输入密码"))},trigger:"change,input,click"}],re_password:[{required:!0,validator:function(e,o,i){t.basicInfroForm.re_password?o!==t.basicInfroForm.password?i(new Error("两次输入密码不一致!")):i():i(new Error("请再次输入密码"))},trigger:"change,input,click"}],email:[{required:!0,validator:function(t,e,o){var i=a.b.isEmail(e);""===e?o(new Error("请输入邮箱地址")):i?o():o(new Error("请输入正确的邮箱格式"))},trigger:"change,input,click"}],shop_area:[{required:!0,validator:function(t,e,o){var i=a.b.isShopArea(e);return e?isNaN(e)?o(new Error("请输入有效的店铺面积")):i?void o():o(new Error("请输入有效的店铺面积(最多保留两位小数)")):o(new Error("请输入店铺面积"))},trigger:"change,input,click"}]},cityinfo:{province:"",city:"",area:""},fromOptions:[],shopTag:[{text:i.B.toString(i.B.CHINESE),idx:i.B.CHINESE},{text:i.B.toString(i.B.WESTERN),idx:i.B.WESTERN},{text:i.B.toString(i.B.SOUTHEASTASIA),idx:i.B.SOUTHEASTASIA},{text:i.B.toString(i.B.FAST),idx:i.B.FAST},{text:i.B.toString(i.B.VEGETALE),idx:i.B.VEGETALE},{text:i.B.toString(i.B.CASUAL),idx:i.B.CASUAL},{text:i.B.toString(i.B.DINNER),idx:i.B.DINNER},{text:i.B.toString(i.B.GROUP),idx:i.B.GROUP},{text:i.B.toString(i.B.HOTPOT),idx:i.B.HOTPOT},{text:i.B.toString(i.B.TEADRINK),idx:i.B.TEADRINK},{text:i.B.toString(i.B.INTERNATIONAL),idx:i.B.INTERNATIONAL}]}},components:{citySelect:r.a,PreviewImg:s.a,ImgUpload:n.a},created:function(){this.getEmployeeOption(),this.getFromList(),this.shopId&&this.getLastStep()},computed:{isCantInput:function(){return!!this.basicInfroForm.shop_id}},props:{shopId:{type:String,default:""}},mounted:function(){this.shopId&&this.getLastStep()},methods:{getFromList:function(){var t=this;Object(c.G)({get_from_list:1,only_from:1}).then(function(e){0===e.ret?t.fromOptions=e.data.list:t.$slnotify({message:i.X.toString(e.ret)})})},getLastStep:function(){var t=this,e={get_shop_info:1,shop_id:this.shopId,shop_bs_info:1,platform:1};Object(c._6)(e).then(function(e){0===e.ret?(t.basicInfroForm=e.data.shopinfo,t.basicInfroForm.from_txt=e.data.shopinfo.from,t.basicInfroForm.from=e.data.shopinfo.from,t.basicInfroForm.re_password=e.data.shopinfo.password,t.basicInfroFormr=e.data.shopinfo,t.tagSelect=e.data.shopinfo.shop_model,""!==t.basicInfroFormr.shop_logo&&null!==t.basicInfroFormr.shop_logo&&(t.isImg=!0,t.isOfficial=0,t.isTextBtn=1,t.BtnText="重新上传"),t.cityinfo.province=e.data.shopinfo.province,t.cityinfo.city=e.data.shopinfo.city,t.cityinfo.area=e.data.shopinfo.area):t.$slnotify({message:i.X.toString(e.ret)})})},getEmployeeOption:function(){var t=this,e={get_ag_salesman_list:1,agent_id:l.a.getPlAgentid(),audit_person:[1,2]};Object(c.c)(e).then(function(e){0===e.ret?t.employeeOptions=e.data.list:t.$slnotify({message:i.X.toString(e.ret)})})},getPhoto:function(t){this.basicInfroFormr.shop_logo=t,""!==this.basicInfroFormr.shop_logo&&null!==this.basicInfroFormr.shop_logo&&(this.isImg=!0,this.isOfficial=0,this.isTextBtn=1,this.BtnText="重新上传")},changeProvinces:function(t){this.cityinfo.province=t.province,this.cityinfo.city=t.city,this.cityinfo.area=t.blocks,""!==this.cityinfo.province&&""!==this.cityinfo.city&&this.basicInfroFormr.address?(this.isSelectError=!1,this.checkFinishInput("basicInfoForm")):this.isSelectError=!0},goNextStep:function(t){var e=this;this.isCheckAllInput=!0,""===this.cityinfo.province||""===this.cityinfo.city||""===this.basicInfroFormr.address?this.isSelectError=!0:this.isSelectError=!1,this.isSelectError||this.$refs[t].validate(function(t){if(!t)return""===e.cityinfo.province||""===e.cityinfo.city||""===e.basicInfroFormr.address?e.isSelectError=!0:e.isSelectError=!1,!1;e.isSelectError=!1,e.saveInfo(1)})},saveAndReset:function(t){var e=this;this.isCheckAllInput=!0,""!==this.cityinfo.province&&""!==this.cityinfo.city&&this.basicInfroFormr.address?(this.isSelectError=!1,this.checkFinishInput("basicInfoForm")):this.isSelectError=!0,this.isSelectError||this.$refs[t].validate(function(t){if(!t)return!1;e.saveInfo(0)})},inputFloor:function(){""!==this.cityinfo.province&&""!==this.cityinfo.city&&this.basicInfroFormr.address?(this.isSelectError=!1,this.checkFinishInput("basicInfoForm")):this.isSelectError=!0},checkFinishInput:function(){""!==this.basicInfroForm.from&&this.basicInfroForm.shop_name&&this.basicInfroForm.real_name&&this.basicInfroForm.phone&&this.basicInfroForm.password&&this.basicInfroForm.re_password&&this.basicInfroForm.email&&this.basicInfroForm.shop_area&&this.basicInfroFormr.address?this.$refs.basicInfoForm.validate(function(t){return!!t}):this.isCheckAllInput&&this.$refs.basicInfoForm.validate(function(t){return!!t})},vaodateInput:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.isCheckAllInput=!1,!1;e.isCheckAllInput&&e.saveInfo(1)})},saveInfo:function(t){var e=this,o={shop_save:1,platform:1,agent_id:this.agentId,shop_name:this.basicInfroForm.shop_name,shop_logo:this.basicInfroFormr.shop_logo,shop_area:this.basicInfroForm.shop_area,address:this.basicInfroFormr.address,shop_model:this.tagSelect,telephone:this.basicInfroForm.telephone,province:this.cityinfo.province,city:this.cityinfo.city,area:this.cityinfo.area,from:this.basicInfroForm.from,employee_name:this.basicInfroForm.employee_name,phone:this.basicInfroForm.phone,real_name:this.basicInfroForm.real_name,email:this.basicInfroForm.email,password:this.basicInfroForm.password,re_password:this.basicInfroForm.re_password,shop_bs_save:1};this.shopId&&(o.shop_id=this.shopId),Object(c._7)(o).then(function(o){0===o.ret?(e.isCheckAllInput=!1,1===t?(e.shop_id=o.data.shop_id,e.$emit("goIcbcInfo",e.shop_id)):(scrollTo(0,0),e.basicInfroForm.shop_id="",e.cityinfo.province="",e.cityinfo.city="",e.cityinfo.area="",e.tagSelect=["中餐"],e.basicInfroFormr.shop_logo="",e.$refs.basicInfoForm.resetFields(),e.$refs.basicInfoFormr.resetFields(),e.isImg=!0,e.isOfficial=1,e.isTextBtn=0,e.BtnText="提交")):(e.isCheckAllInput=!0,e.$slnotify({message:i.X.toString(o.ret)}))})}}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"base-merchant-official"},[o("div",{staticClass:"official-title-bar"},[t._v("新增商户")]),t._v(" "),o("div",{staticClass:"clearfix"},[o("div",{staticClass:"form-item float-left"},[o("el-form",{ref:"basicInfoForm",staticClass:"demo-ruleForm float-left",attrs:{"label-width":"100px",model:t.basicInfroForm,rules:t.rules}},[o("el-form-item",{attrs:{label:"销售人员",prop:"employee_name"}},[t.isCantInput?o("span",[t._v(t._s(t.basicInfroForm.employee_name))]):o("el-select",{attrs:{placeholder:"请选择销售人员"},on:{change:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.employee_name,callback:function(e){t.$set(t.basicInfroForm,"employee_name",e)},expression:"basicInfroForm.employee_name"}},t._l(t.employeeOptions,function(t){return o("el-option",{key:t.ag_employee_name,attrs:{label:t.ag_employee_name,value:t.ag_employee_name}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"商户来源",prop:"from"}},[t.isCantInput?o("span",[t._v(t._s(t.basicInfroForm.from_txt))]):o("el-select",{attrs:{placeholder:"请选择商户来源"},on:{change:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.from,callback:function(e){t.$set(t.basicInfroForm,"from",e)},expression:"basicInfroForm.from"}},t._l(t.fromOptions,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"商户名称",prop:"shop_name"}},[o("el-input",{attrs:{placeholder:"商户名称"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.shop_name,callback:function(e){t.$set(t.basicInfroForm,"shop_name",e)},expression:"basicInfroForm.shop_name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商户联系人",prop:"real_name"}},[t.isCantInput?o("span",[t._v(t._s(t.basicInfroForm.real_name))]):o("el-input",{attrs:{placeholder:"姓名"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.real_name,callback:function(e){t.$set(t.basicInfroForm,"real_name",e)},expression:"basicInfroForm.real_name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[o("el-input",{attrs:{placeholder:"固定电话"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.telephone,callback:function(e){t.$set(t.basicInfroForm,"telephone",e)},expression:"basicInfroForm.telephone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t.isCantInput?o("span",[t._v(t._s(t.basicInfroForm.phone))]):o("el-input",{attrs:{placeholder:"手机号码(默认登录账号)"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.phone,callback:function(e){t.$set(t.basicInfroForm,"phone",e)},expression:"basicInfroForm.phone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"账户密码",prop:"password"}},[t.isCantInput?o("span",[t._v("******")]):o("el-input",{attrs:{type:"password",placeholder:"设置6-16位密码"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.password,callback:function(e){t.$set(t.basicInfroForm,"password",e)},expression:"basicInfroForm.password"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"确认密码",prop:"re_password"}},[t.isCantInput?o("span",[t._v("******")]):o("el-input",{attrs:{type:"password",placeholder:"设置6-16位密码"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.re_password,callback:function(e){t.$set(t.basicInfroForm,"re_password",e)},expression:"basicInfroForm.re_password"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t.isCantInput?o("span",[t._v(t._s(t.basicInfroForm.email))]):o("el-input",{attrs:{placeholder:"电子邮箱"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.email,callback:function(e){t.$set(t.basicInfroForm,"email",e)},expression:"basicInfroForm.email"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商户面积",prop:"shop_area"}},[o("el-input",{attrs:{placeholder:"面积"},on:{input:function(e){t.checkFinishInput("basicInfoForm")}},model:{value:t.basicInfroForm.shop_area,callback:function(e){t.$set(t.basicInfroForm,"shop_area",e)},expression:"basicInfroForm.shop_area"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"form-itemrr float-left"},[o("el-form",{ref:"basicInfoFormr",staticClass:"demo-ruleForm float-left",attrs:{"label-width":"100px",model:t.basicInfroFormr,rules:t.rules}},[o("el-form-item",{staticClass:"address-item",class:{"is-error":t.isSelectError},attrs:{label:"商户地址",prop:"address"}},[o("city-select",{staticClass:"city-select",attrs:{isSelectError:t.isSelectError,cityinfo:t.cityinfo},on:{changeProvinces:t.changeProvinces}}),t._v(" "),o("div",[o("el-input",{staticClass:"input-floo",attrs:{placeholder:"街道楼盘名称房号"},on:{input:t.inputFloor},model:{value:t.basicInfroFormr.address,callback:function(e){t.$set(t.basicInfroFormr,"address",e)},expression:"basicInfroFormr.address"}})],1),t._v(" "),t.isSelectError?o("p",[t._v("请填写商户地址(地址不能包含空格)")]):t._e()],1),t._v(" "),o("el-form-item",{staticClass:"select-must",attrs:{label:"商户业态"}},[o("el-checkbox-group",{attrs:{min:1},model:{value:t.tagSelect,callback:function(e){t.tagSelect=e},expression:"tagSelect"}},t._l(t.shopTag,function(e){return o("el-checkbox-button",{key:e.text,attrs:{label:e.text}},[t._v("\n              "+t._s(e.text)+"\n            ")])}),1)],1),t._v(" "),o("el-form-item",{staticClass:"logo-item",attrs:{label:"商户logo",prop:"shop_logo"}},[o("div",{staticClass:"certi-upload"},[o("Preview-Img",{staticClass:"fl certi-upload_right",attrs:{width:"309px",height:"217px",imgSrc:t.basicInfroFormr.shop_logo}}),t._v(" "),o("img-upload",{staticClass:"certi-upload-btn",class:{"upload-agin":t.BtnText.length>3},attrs:{FreedomCrop:!1,isOfficial:t.isOfficial,isTextBtn:t.isTextBtn,BtnText:t.BtnText},on:{"send-image":t.getPhoto}}),t._v(" "),t.basicInfroFormr.shop_logo?t._e():o("div",{staticClass:"upload-img-text"},[o("span",{staticClass:"unload-title"},[t._v("添加图片")]),t._v(" "),o("div",{staticClass:"upload-text"},[t._v("支持JPG、JPEG、PNG文件格式")])])],1)])],1)],1)]),t._v(" "),o("div",{staticClass:"footer"},[o("div",{staticClass:"of-btn-bd-b-blue cant-click-btn",on:{click:function(e){t.goNextStep("basicInfoForm")}}},[t._v("下一步")]),t._v(" "),o("div",{staticClass:"save-m-gradient",on:{click:function(e){t.saveAndReset("basicInfoForm")}}},[t._v("保存并提交")])])])},staticRenderFns:[]};var h=o("C7Lr")(f,p,!1,function(t){o("ANHr"),o("n+du")},"data-v-545be620",null);e.default=h.exports}});